- id: '1675436816500'
  alias: Monitoring Zaptec Charger Count
  description: 'Überprüft, ob die Anzahl Zaptec Charger dem Helfer Anzahl Zaptec Stationen
    entspricht. '
  trigger:
  - platform: state
    entity_id:
    - sensor.zaptec_installation_5cb131a6_3e77_4aca_acf6_a20ca674043b
  condition:
  - condition: not
    conditions:
    - condition: template
      value_template: '{{ state_attr(''sensor.zaptec_installation_5cb131a6_3e77_4aca_acf6_a20ca674043b'',
        ''active_charger_count'') == states(''input_number.anzahl_zaptec_stationen'')|round(0)
        }}'
  action:
  - service: notify.administrator_rotseepark
    data:
      title: 'HA-Alert Einstellhalle: Anzahl installierte Zaptec Station hat geändert'
      message: 'Installiert waren {{states(''input_number.anzahl_zaptec_stationen'')|round(0)}}
        Stationen , neu sind es {{state_attr(''sensor.zaptec_installation_5cb131a6_3e77_4aca_acf6_a20ca674043b'',
        ''active_charger_count'')}} Stationen. '
  - service: input_number.set_value
    data:
      value: '{{state_attr(''sensor.zaptec_installation_5cb131a6_3e77_4aca_acf6_a20ca674043b'',
        ''active_charger_count'')}}'
    target:
      entity_id: input_number.anzahl_zaptec_stationen
  mode: single
- id: '1675599834353'
  alias: Monitoring Heatpump 19
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.luxtronik_19_param_state
    attribute: parameters
  - platform: time_pattern
    hours: /4
  condition: []
  action:
  - if:
    - condition: template
      value_template: '{% if state_attr(''sensor.luxtronik_19_value_state'', ''values'')|safe
        == ''None'' %}false{%- else -%}true{%- endif %}'
      alias: Prüfe, ob im Value Status gültige Werte vorhanden sind (nicht None)
    then:
    - if:
      - condition: and
        conditions:
        - condition: state
          entity_id: binary_sensor.luxtronik19_asd
          state: 'off'
          for:
            hours: 0
            minutes: 4
            seconds: 0
        - condition: or
          conditions:
          - condition: state
            entity_id: binary_sensor.luxtronik19_vd1
            state: 'on'
            for:
              hours: 0
              minutes: 5
              seconds: 0
          - condition: state
            entity_id: binary_sensor.luxtronik19_vd2
            state: 'on'
            for:
              hours: 0
              minutes: 5
              seconds: 0
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Sensor luxtronik19_asd meldet ein Problem'
          message: Der Status des Sensor luxtronik19_asd ist {{ states('binary_sensor.luxtronik19_asd')
            }}  , jedoch sollte er ON sein, wenn der 1. oder  2. Verdichter läuft
      alias: Prüfe den Status von luxtronik19_asd
    - if:
      - condition: state
        entity_id: binary_sensor.luxtronik19_evu
        state: 'off'
        for:
          hours: 0
          minutes: 5
          seconds: 0
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Sensor luxtronik19_evu meldet ein Problem'
          message: Der Status des Sensor luxtronik19_evu ist {{ states('binary_sensor.luxtronik19_evu')
            }} , jedoch sollte die Energie Versorger Freigabe immer ON sein
      alias: Prüfe den Status von luxtronik19_evu
    - if:
      - condition: state
        entity_id: binary_sensor.luxtronik19_mot
        state: 'off'
        for:
          hours: 0
          minutes: 5
          seconds: 0
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Sensor luxtronik19_mot meldet ein Problem'
          message: Der Status des Sensor luxtronik19_mot ist {{ states('binary_sensor.luxtronik19_mot')
            }} , jedoch sollte der Motorschutz immer ON sein
      alias: Prüfe den Status von luxtronik19_mot
    - if:
      - condition: state
        entity_id: binary_sensor.luxtronik19_hd
        state: 'on'
        for:
          hours: 0
          minutes: 5
          seconds: 0
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Sensor luxtronik19_hd meldet ein Problem'
          message: Der Status des Sensor luxtronik19_hd ist {{ states('binary_sensor.luxtronik19_hd')
            }} , jedoch sollte der Hochdruck immer OFF sein
      alias: Prüfe den Status von luxtronik19_hd
    - if:
      - condition: state
        entity_id: binary_sensor.luxtronik19_nd
        state: 'off'
        for:
          hours: 0
          minutes: 5
          seconds: 0
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Sensor luxtronik19_nd meldet ein Problem'
          message: Der Status des Sensor luxtronik19_nd ist {{ states('binary_sensor.luxtronik19_nd')
            }} , jedoch sollte der Niederdruck immer ON sein
      alias: Prüfe den Status von luxtronik19_nd
    - if:
      - condition: and
        conditions:
        - condition: state
          entity_id: sensor.luxtronik19_trl_soll
          state: '15'
          for:
            hours: 72
            minutes: 0
            seconds: 0
          alias: Rücklauf Soll seit 3 Tagen auf 15°C
        - condition: template
          value_template: '{{ (now().month == 5 and now().day > 15) or now().month
            == 6 }}'
          alias: Es ist ab Mitte Mai oder Juni
        - condition: state
          entity_id: input_boolean.luxtronik_heizphase_haus_19
          state: 'on'
      then:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.luxtronik_heizphase_haus_19
        alias: Schalte Heizphase aus
      - service: input_select.set_options
        data:
          options: '{{ states(''input_select.luxtronik_operation_mode_aus'') }}'
        target:
          entity_id: input_select.luxtronik_19_hz_operation_mode
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Info Heatpump 19: Die Heizphase ist beendet'
          message: none
      alias: Heizphase ausschalten im Mai/Juni wenn 72h lang Heizgrenze überschritten
        (Rücklauf Soll = 15 °C)
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: '{{ states(''sensor.luxtronik19_ta_mittel'')|int <= states(''sensor.luxtronik19_heizgrenze'')|int
            }}'
          alias: Mitteltemperatur kleiner als Heizgrenze
        - condition: template
          value_template: '{{ now().month == 10 or now().month == 11 }}'
          alias: Es ist Oktober oder November
        - condition: state
          entity_id: input_boolean.luxtronik_heizphase_haus_19
          state: 'off'
      then:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.luxtronik_heizphase_haus_19
      - service: input_select.set_options
        data:
          options: '{{ states(''input_select.luxtronik_operation_mode_automatik'')
            }}'
        target:
          entity_id: input_select.luxtronik_19_hz_operation_mode
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Info Heatpump 19: Die Heizphase hat begonnen'
          message: none
      alias: Heizphase einschalten im Oktober/November wenn TA Mittel < Heizgrenze
    - if:
      - condition: and
        conditions:
        - condition: numeric_state
          entity_id: sensor.luxtronik19_ta_mittel
          above: 22
        - condition: template
          value_template: '{{ now().month == 6 or now().month == 7 }}'
          alias: Es ist Juni oder Juli
        - condition: state
          entity_id: input_boolean.luxtronik_kuhlphase_haus_19
          state: 'off'
      then:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.luxtronik_kuhlphase_haus_19
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Info Heatpump 19: Die Kühlphase hat begonnen'
          message: none
      alias: Kühlphase einschalten im Juni/Juli wenn TA Mittel über 22 °C
    - if:
      - condition: and
        conditions:
        - condition: numeric_state
          entity_id: sensor.luxtronik19_ta_mittel
          below: 16
        - condition: template
          value_template: '{{ now().month == 9 }}'
          alias: Es ist September
        - condition: state
          entity_id: input_boolean.luxtronik_kuhlphase_haus_19
          state: 'on'
      then:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.luxtronik_kuhlphase_haus_19
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Info Heatpump 19: Die Kühlphase ist beendet'
          message: Es ist September und TA-Mittel ist unterhalb 16 °C
      alias: Kühlphase ausschalten im September wenn TA Mittel unter 16 °C
  - if:
    - condition: template
      value_template: '{% if state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')|safe
        == ''None'' %}false{%- else -%}true{%- endif %}'
      alias: Prüfe, ob im Parameter Status gültige Werte vorhanden sind (nicht None)
    then:
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''heating_temperature'']
          != -3 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert heating_temperature hat geändert'
          message: Der neue Wert für heating_temperature ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['heating_temperature']}}
      alias: Prüfe den Parameter heating_temperature
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: "{{state_attr('sensor.luxtronik_19_param_state', 'parameters')['warmwater_temperature']
            \n!= states('input_number.luxtronik_19_ww_solltemperatur')|int \n    and
            (state_attr('automation.schalte_ww_setze_ww_solltemperatur_haus_19_bei_anderung','current')|int
            == 0) \n}}"
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert warmwater_temperature hat geändert'
          message: Der neue Wert für warmwater_temperature ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['warmwater_temperature']}}
      alias: Prüfe den Parameter warmwater_temperature (ändert während der TDI)
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''warmwater_temperature'']
            != states(''input_number.luxtronik_ww_normaltemperatur'')|int }}'
        - condition: state
          entity_id: schedule.luxtronik_zeitplan_tdi_haus_19
          state: 'off'
          enabled: true
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert warmwater_temperature hat geändert
            (während TDI)'
          message: Der neue Wert für warmwater_temperature ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['warmwater_temperature']}}
      alias: Prüfe den Parameter warmwater_temperature Normabweichung (nicht während
        der TDI)
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: '{{(state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''heating_operation_mode''])|int
            != states(''input_select.luxtronik_19_hz_operation_mode'')|int }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert heating_operation_mode hat geändert
            (ausserhalb TDI)'
          message: Der neue Wert für heating_operation_mode ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['heating_operation_mode']}}
      alias: Prüfe den Parameter heating_operation_mode (ändert während der TDI)
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: "{{ (((state_attr('sensor.luxtronik_19_param_state', 'parameters')['heating_operation_mode'])|int
            != states('input_select.luxtronik_operation_mode_automatik')|int) \n and
            states('input_boolean.luxtronik_heizphase_haus_19') == 'on') \n or\n (((state_attr('sensor.luxtronik_19_param_state',\n'parameters')['heating_operation_mode'])|int
            != states('input_select.luxtronik_operation_mode_aus')|int) \n and states('input_boolean.luxtronik_heizphase_haus_19')
            == 'off')}}"
        - condition: state
          entity_id: schedule.luxtronik_zeitplan_tdi_haus_19
          state: 'off'
          enabled: true
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert heating_operation_mode hat geändert
            (während TDI)'
          message: Der neue Wert für heating_operation_mode ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['heating_operation_mode']}}
      alias: Prüfe den Parameter heating_operation_mode Normabweichung  (nicht während
        der TDI)
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''warmwater_operation_mode_string'']
          != "Automatik" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert warmwater_operation_mode_string hat
            geändert (ausserhalb TDI)'
          message: Der neue Wert für warmwater_operation_mode_string ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['warmwater_operation_mode_string']}}
      alias: Prüfe den Parameter warmwater_operation_mode_string
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''heating_curve_end_point'']
          != 35 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert heating_curve_end_point hat geändert'
          message: Der neue Wert für heating_curve_end_point ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['heating_curve_end_point']}}
      alias: Prüfe den Parameter heating_curve_end_point
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''heating_curve_parallel_offset'']
          != 22 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert heating_curve_parallel_offset hat
            geändert'
          message: Der neue Wert für heating_curve_parallel_offset ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['heating_curve_parallel_offset']}}
      alias: Prüfe den Parameter heating_curve_parallel_offset
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''deltaHeatingReduction'']
          != 0 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert deltaHeatingReduction hat geändert'
          message: Der neue Wert für deltaHeatingReduction ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['deltaHeatingReduction']}}
      alias: Prüfe den Parameter deltaHeatingReduction
    - if:
      - condition: template
        value_template: "{{ (state_attr('sensor.luxtronik_19_param_state', 'parameters')['hotWaterTemperatureHysteresis']
          \n    != states('input_number.luxtronik_19_ww_hysterese')|int) \n    and
          (state_attr('automation.schalte_ww_setze_ww_hysterese_haus_19_bei_anderung','current')|int
          == 0) \n}}\n"
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert hotWaterTemperatureHysteresis hat
            geändert'
          message: Der neue Wert für hotWaterTemperatureHysteresis ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['hotWaterTemperatureHysteresis']}}
      alias: Prüfe den Parameter hotWaterTemperatureHysteresis
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''returnTemperatureHysteresis'']
          != 3 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert returnTemperatureHysteresis hat geändert'
          message: Der neue Wert für returnTemperatureHysteresis ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['returnTemperatureHysteresis']}}
      alias: Prüfe den Parameter returnTemperatureHysteresis
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''temperature_hot_water_target'']
            != states(''input_number.luxtronik_19_ww_solltemperatur_wunschwert'')|int
            }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert temperature_hot_water_target hat
            geändert'
          message: Der neue Wert für temperature_hot_water_target ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['temperature_hot_water_target']}}
      alias: Prüfe den Parameter temperature_hot_water_target (ändert während der
        TDI)
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''temperature_hot_water_target'']
            != states(''input_number.luxtronik_ww_normaltemperatur'')|int }}'
        - condition: state
          entity_id: schedule.luxtronik_zeitplan_tdi_haus_19
          state: 'off'
          enabled: true
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert temperature_hot_water_target hat
            geändert (während TDI)'
          message: Der neue Wert für temperature_hot_water_target ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['temperature_hot_water_target']}}
      alias: Prüfe den Parameter temperature_hot_water_target Normabweichung  (ausserhalb
        der TDI)
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''thresholdHeatingLimit'']
          != 16 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert thresholdHeatingLimit hat geändert
            (ausserhalb TDI)'
          message: Der neue Wert für thresholdHeatingLimit ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['thresholdHeatingLimit']}}
      alias: Prüfe den Parameter thresholdHeatingLimit
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''returnTemperatureTargetMin'']
          != 15 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert returnTemperatureTargetMin hat geändert'
          message: Der neue Wert für returnTemperatureTargetMin ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['returnTemperatureTargetMin']}}
      alias: Prüfe den Parameter returnTemperatureTargetMin
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''temperature_hot_water_limit'']
          != 60 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert temperature_hot_water_limit hat geändert'
          message: Der neue Wert für temperature_hot_water_limit ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['temperature_hot_water_limit']}}
      alias: Prüfe den Parameter temperature_hot_water_limit
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''heatingOperationTimerTableSelectedString'']
          != "Tage (Mo, Di, ...)" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert heatingOperationTimerTableSelectedString
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableSelectedString ist
            {{state_attr('sensor.luxtronik_19_param_state', 'parameters')['heatingOperationTimerTableSelectedString']}}
      alias: Prüfe den Parameter heatingOperationTimerTableSelectedString
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''heatingOperationTimerTableWeek'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert heatingOperationTimerTableWeek hat
            geändert'
          message: Der neue Wert für heatingOperationTimerTableWeek ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['heatingOperationTimerTableWeek']}}
      alias: Prüfe den Parameter heatingOperationTimerTableWeek
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''heatingOperationTimerTable52MonFri'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert heatingOperationTimerTable52MonFri
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTable52MonFri ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['heatingOperationTimerTable52MonFri']}}
      alias: Prüfe den Parameter heatingOperationTimerTable52MonFri
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''heatingOperationTimerTable52SatSun'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert heatingOperationTimerTable52SatSun
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTable52SatSun ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['heatingOperationTimerTable52SatSun']}}
      alias: Prüfe den Parameter heatingOperationTimerTable52SatSun
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''heatingOperationTimerTableDaySunday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert heatingOperationTimerTableDaySunday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDaySunday ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['heatingOperationTimerTableDaySunday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDaySunday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''heatingOperationTimerTableDayMonday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert heatingOperationTimerTableDayMonday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDayMonday ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['heatingOperationTimerTableDayMonday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDayMonday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''heatingOperationTimerTableDayTuesday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert heatingOperationTimerTableDayTuesday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDayTuesday ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['heatingOperationTimerTableDayTuesday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDayTuesday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''heatingOperationTimerTableDayWednesday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert heatingOperationTimerTableDayWednesday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDayWednesday ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['heatingOperationTimerTableDayWednesday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDayWednesday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''heatingOperationTimerTableDayThursday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert heatingOperationTimerTableDayThursday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDayThursday ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['heatingOperationTimerTableDayThursday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDayThursday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''heatingOperationTimerTableDayFriday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert heatingOperationTimerTableDayFriday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDayFriday ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['heatingOperationTimerTableDayFriday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDayFriday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''heatingOperationTimerTableDaySaturday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert heatingOperationTimerTableDaySaturday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDaySaturday ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['heatingOperationTimerTableDaySaturday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDaySaturday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''hotWaterOperationTimerTableSelectedString'']
          != "Tage (Mo, Di, ...)" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert hotWaterOperationTimerTableSelectedString
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableSelectedString ist
            {{state_attr('sensor.luxtronik_19_param_state', 'parameters')['hotWaterOperationTimerTableSelectedString']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableSelectedString
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''hotWaterOperationTimerTableWeek'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert hotWaterOperationTimerTableWeek hat
            geändert'
          message: Der neue Wert für hotWaterOperationTimerTableWeek ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['hotWaterOperationTimerTableWeek']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableWeek
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''hotWaterOperationTimerTable52MonFri'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert hotWaterOperationTimerTable52MonFri
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTable52MonFri ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['hotWaterOperationTimerTable52MonFri']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTable52MonFri
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''hotWaterOperationTimerTable52SatSun'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert hotWaterOperationTimerTable52SatSun
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTable52SatSun ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['hotWaterOperationTimerTable52SatSun']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTable52SatSun
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''hotWaterOperationTimerTableDaySunday'']|e
          != "[{&#39;on&#39;: &#39;05:00&#39;, &#39;off&#39;: &#39;02:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert hotWaterOperationTimerTableDaySunday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDaySunday ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['hotWaterOperationTimerTableDaySunday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDaySunday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''hotWaterOperationTimerTableDayMonday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert hotWaterOperationTimerTableDayMonday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDayMonday ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['hotWaterOperationTimerTableDayMonday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDayMonday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''hotWaterOperationTimerTableDayTuesday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert hotWaterOperationTimerTableDayTuesday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDayTuesday ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['hotWaterOperationTimerTableDayTuesday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDayTuesday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''hotWaterOperationTimerTableDayWednesday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert hotWaterOperationTimerTableDayWednesday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDayWednesday ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['hotWaterOperationTimerTableDayWednesday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDayWednesday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''hotWaterOperationTimerTableDayThursday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert hotWaterOperationTimerTableDayThursday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDayThursday ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['hotWaterOperationTimerTableDayThursday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDayThursday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''hotWaterOperationTimerTableDayFriday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert hotWaterOperationTimerTableDayFriday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDayFriday ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['hotWaterOperationTimerTableDayFriday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDayFriday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_19_param_state'', ''parameters'')[''hotWaterOperationTimerTableDaySaturday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 19: Der Wert hotWaterOperationTimerTableDaySaturday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDaySaturday ist {{state_attr('sensor.luxtronik_19_param_state',
            'parameters')['hotWaterOperationTimerTableDaySaturday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDaySaturday
  mode: single
- id: '1675601828993'
  alias: Monitoring Heatpump 21
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.luxtronik_21_param_state
    attribute: parameters
  - platform: time_pattern
    hours: /4
  condition: []
  action:
  - if:
    - condition: template
      value_template: '{% if state_attr(''sensor.luxtronik_21_value_state'', ''values'')|safe
        == ''None'' %}false{%- else -%}true{%- endif %}'
      alias: Prüfe, ob im Value Status gültige Werte vorhanden sind (nicht None)
    then:
    - if:
      - condition: and
        conditions:
        - condition: state
          entity_id: binary_sensor.luxtronik21_asd
          state: 'off'
          for:
            hours: 0
            minutes: 4
            seconds: 0
        - condition: or
          conditions:
          - condition: state
            entity_id: binary_sensor.luxtronik21_vd1
            state: 'on'
            for:
              hours: 0
              minutes: 5
              seconds: 0
          - condition: state
            entity_id: binary_sensor.luxtronik21_vd2
            state: 'on'
            for:
              hours: 0
              minutes: 5
              seconds: 0
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Sensor luxtronik21_asd meldet ein Problem'
          message: Der Status des Sensor luxtronik21_asd ist {{ states('binary_sensor.luxtronik21_asd')
            }}  , jedoch sollte er ON sein, wenn der 1. oder  2. Verdichter läuft
      alias: Prüfe den Status von luxtronik21_asd
    - if:
      - condition: state
        entity_id: binary_sensor.luxtronik21_evu
        state: 'off'
        for:
          hours: 0
          minutes: 5
          seconds: 0
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Sensor luxtronik21_evu meldet ein Problem'
          message: Der Status des Sensor luxtronik21_evu ist {{ states('binary_sensor.luxtronik21_evu')
            }} , jedoch sollte die Energie Versorger Freigabe immer ON sein
      alias: Prüfe den Status von luxtronik21_evu
    - if:
      - condition: state
        entity_id: binary_sensor.luxtronik21_mot
        state: 'off'
        for:
          hours: 0
          minutes: 5
          seconds: 0
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Sensor luxtronik21_mot meldet ein Problem'
          message: Der Status des Sensor luxtronik21_mot ist {{ states('binary_sensor.luxtronik21_mot')
            }} , jedoch sollte der Motorschutz immer ON sein
      alias: Prüfe den Status von luxtronik21_mot
    - if:
      - condition: state
        entity_id: binary_sensor.luxtronik21_hd
        state: 'on'
        for:
          hours: 0
          minutes: 5
          seconds: 0
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Sensor luxtronik21_hd meldet ein Problem'
          message: Der Status des Sensor luxtronik21_hd ist {{ states('binary_sensor.luxtronik21_hd')
            }} , jedoch sollte der Hochdruck immer OFF sein
      alias: Prüfe den Status von luxtronik21_hd
    - if:
      - condition: state
        entity_id: binary_sensor.luxtronik21_nd
        state: 'off'
        for:
          hours: 0
          minutes: 5
          seconds: 0
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Sensor luxtronik21_nd meldet ein Problem'
          message: Der Status des Sensor luxtronik21_nd ist {{ states('binary_sensor.luxtronik21_nd')
            }} , jedoch sollte der Niederdruck immer ON sein
      alias: Prüfe den Status von luxtronik21_nd
    - if:
      - condition: and
        conditions:
        - condition: state
          entity_id: sensor.luxtronik21_trl_soll
          state: '15'
          for:
            hours: 72
            minutes: 0
            seconds: 0
          alias: Rücklauf Soll seit 3 Tagen auf 15°C
        - condition: template
          value_template: '{{ (now().month == 5 and now().day > 15) or now().month
            == 6 }}'
          alias: Es ist ab Mitte Mai oder Juni
        - condition: state
          entity_id: input_boolean.luxtronik_heizphase_haus_21
          state: 'on'
      then:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.luxtronik_heizphase_haus_21
        alias: Schalte Heizphase aus
      - service: input_select.set_options
        data:
          options: '{{ states(''input_select.luxtronik_operation_mode_aus'') }}'
        target:
          entity_id: input_select.luxtronik_21_hz_operation_mode
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Info Heatpump 21: Die Heizphase ist beendet'
          message: none
      alias: Heizphase ausschalten im Mai/Juni wenn 72h lang Heizgrenze überschritten
        (Rücklauf Soll = 15 °C)
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: '{{ states(''sensor.luxtronik21_ta_mittel'')|int <= states(''sensor.luxtronik21_heizgrenze'')|int
            }}'
          alias: Mitteltemperatur kleiner als Heizgrenze
        - condition: template
          value_template: '{{ now().month == 10 or now().month == 11 }}'
          alias: Es ist Oktober oder November
        - condition: state
          entity_id: input_boolean.luxtronik_heizphase_haus_21
          state: 'off'
      then:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.luxtronik_heizphase_haus_21
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Info Heatpump 21: Die Heizphase hat begonnen'
          message: none
      alias: Heizphase einschalten im Oktober/November wenn TA Mittel < Heizgrenze
    - if:
      - condition: and
        conditions:
        - condition: numeric_state
          entity_id: sensor.luxtronik21_ta_mittel
          above: 20
        - condition: template
          value_template: '{{ now().month == 6 or now().month == 7 }}'
          alias: Es ist Juni oder Juli
        - condition: state
          entity_id: input_boolean.luxtronik_kuhlphase_haus_21
          state: 'off'
      then:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.luxtronik_kuhlphase_haus_21
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Info Heatpump 21: Die Kühlphase hat begonnen'
          message: none
      alias: Kühlphase einschalten im Juni/Juli wenn TA Mittel über 20 °C
    - if:
      - condition: and
        conditions:
        - condition: numeric_state
          entity_id: sensor.luxtronik21_ta_mittel
          below: 14
        - condition: template
          value_template: '{{ now().month == 9 }}'
          alias: Es ist September
        - condition: state
          entity_id: input_boolean.luxtronik_kuhlphase_haus_21
          state: 'on'
      then:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.luxtronik_kuhlphase_haus_21
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Info Heatpump 21: Die Kühlphase ist beendet'
          message: Es ist September und TA-Mittel ist unterhalb 14 °C
      alias: Kühlphase ausschalten im September wenn TA Mittel unter 14 °C
  - if:
    - condition: template
      value_template: '{% if state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')|safe
        == ''None'' %}false{%- else -%}true{%- endif %}'
      alias: Prüfe, ob im Parameter Status gültige Werte vorhanden sind (nicht None)
    then:
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''heating_temperature'']
          != 0 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert heating_temperature hat geändert'
          message: Der neue Wert für heating_temperature ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['heating_temperature']}}
      alias: Prüfe den Parameter heating_temperature
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: "{{state_attr('sensor.luxtronik_21_param_state', 'parameters')['warmwater_temperature']
            \n!= states('input_number.luxtronik_21_ww_solltemperatur')|int \n    and
            (state_attr('automation.schalte_ww_setze_ww_solltemperatur_haus_21_bei_anderung','current')|int
            == 0) \n}}"
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert warmwater_temperature hat geändert'
          message: Der neue Wert für warmwater_temperature ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['warmwater_temperature']}}
      alias: Prüfe den Parameter warmwater_temperature (ändert während der TDI)
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''warmwater_temperature'']
            != states(''input_number.luxtronik_ww_normaltemperatur'')|int }}'
        - condition: state
          entity_id: schedule.luxtronik_zeitplan_tdi_haus_21
          state: 'off'
          enabled: true
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert warmwater_temperature hat geändert
            (während TDI)'
          message: Der neue Wert für warmwater_temperature ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['warmwater_temperature']}}
      alias: Prüfe den Parameter warmwater_temperature Normabweichung (nicht während
        der TDI)
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: '{{(state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''heating_operation_mode''])|int
            != states(''input_select.luxtronik_21_hz_operation_mode'')|int }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert heating_operation_mode hat geändert
            (ausserhalb TDI)'
          message: Der neue Wert für heating_operation_mode ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['heating_operation_mode']}}
      alias: Prüfe den Parameter heating_operation_mode (ändert während der TDI)
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: "{{ (((state_attr('sensor.luxtronik_21_param_state', 'parameters')['heating_operation_mode'])|int
            != states('input_select.luxtronik_operation_mode_automatik')|int) \n and
            states('input_boolean.luxtronik_heizphase_haus_21') == 'on') \n or\n (((state_attr('sensor.luxtronik_21_param_state',\n'parameters')['heating_operation_mode'])|int
            != states('input_select.luxtronik_operation_mode_aus')|int) \n and states('input_boolean.luxtronik_heizphase_haus_21')
            == 'off')}}"
        - condition: state
          entity_id: schedule.luxtronik_zeitplan_tdi_haus_21
          state: 'off'
          enabled: true
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert heating_operation_mode hat geändert
            (während TDI)'
          message: Der neue Wert für heating_operation_mode ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['heating_operation_mode']}}
      alias: Prüfe den Parameter heating_operation_mode Normabweichung  (nicht während
        der TDI)
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''warmwater_operation_mode_string'']
          != "Automatik" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert warmwater_operation_mode_string hat
            geändert (ausserhalb TDI)'
          message: Der neue Wert für warmwater_operation_mode_string ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['warmwater_operation_mode_string']}}
      alias: Prüfe den Parameter warmwater_operation_mode_string
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''heating_curve_end_point'']
          != 31 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert heating_curve_end_point hat geändert'
          message: Der neue Wert für heating_curve_end_point ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['heating_curve_end_point']}}
      alias: Prüfe den Parameter heating_curve_end_point
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''heating_curve_parallel_offset'']
          != 20 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert heating_curve_parallel_offset hat
            geändert'
          message: Der neue Wert für heating_curve_parallel_offset ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['heating_curve_parallel_offset']}}
      alias: Prüfe den Parameter heating_curve_parallel_offset
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''deltaHeatingReduction'']
          != -15 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert deltaHeatingReduction hat geändert'
          message: Der neue Wert für deltaHeatingReduction ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['deltaHeatingReduction']}}
      alias: Prüfe den Parameter deltaHeatingReduction
    - if:
      - condition: template
        value_template: "{{ (state_attr('sensor.luxtronik_21_param_state', 'parameters')['hotWaterTemperatureHysteresis']
          \n    != states('input_number.luxtronik_21_ww_hysterese')|int) \n    and
          (state_attr('automation.schalte_ww_setze_ww_hysterese_haus_21_bei_anderung','current')|int
          == 0) \n}}\n"
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert hotWaterTemperatureHysteresis hat
            geändert'
          message: Der neue Wert für hotWaterTemperatureHysteresis ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['hotWaterTemperatureHysteresis']}}
      alias: Prüfe den Parameter hotWaterTemperatureHysteresis
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''returnTemperatureHysteresis'']
          != 3 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert returnTemperatureHysteresis hat geändert'
          message: Der neue Wert für returnTemperatureHysteresis ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['returnTemperatureHysteresis']}}
      alias: Prüfe den Parameter returnTemperatureHysteresis
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''temperature_hot_water_target'']
            != states(''input_number.luxtronik_21_ww_solltemperatur_wunschwert'')|int
            }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert temperature_hot_water_target hat
            geändert'
          message: Der neue Wert für temperature_hot_water_target ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['temperature_hot_water_target']}}
      alias: Prüfe den Parameter temperature_hot_water_target (ändert während der
        TDI)
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''temperature_hot_water_target'']
            != states(''input_number.luxtronik_ww_normaltemperatur'')|int }}'
        - condition: state
          entity_id: schedule.luxtronik_zeitplan_tdi_haus_21
          state: 'off'
          enabled: true
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert temperature_hot_water_target hat
            geändert (während TDI)'
          message: Der neue Wert für temperature_hot_water_target ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['temperature_hot_water_target']}}
      alias: Prüfe den Parameter temperature_hot_water_target Normabweichung  (ausserhalb
        der TDI)
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''thresholdHeatingLimit'']
          != 15 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert thresholdHeatingLimit hat geändert
            (ausserhalb TDI)'
          message: Der neue Wert für thresholdHeatingLimit ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['thresholdHeatingLimit']}}
      alias: Prüfe den Parameter thresholdHeatingLimit
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''returnTemperatureTargetMin'']
          != 15 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert returnTemperatureTargetMin hat geändert'
          message: Der neue Wert für returnTemperatureTargetMin ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['returnTemperatureTargetMin']}}
      alias: Prüfe den Parameter returnTemperatureTargetMin
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''temperature_hot_water_limit'']
          != 60 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert temperature_hot_water_limit hat geändert'
          message: Der neue Wert für temperature_hot_water_limit ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['temperature_hot_water_limit']}}
      alias: Prüfe den Parameter temperature_hot_water_limit
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''heatingOperationTimerTableSelectedString'']
          != "Tage (Mo, Di, ...)" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert heatingOperationTimerTableSelectedString
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableSelectedString ist
            {{state_attr('sensor.luxtronik_21_param_state', 'parameters')['heatingOperationTimerTableSelectedString']}}
      alias: Prüfe den Parameter heatingOperationTimerTableSelectedString
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''heatingOperationTimerTableWeek'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert heatingOperationTimerTableWeek hat
            geändert'
          message: Der neue Wert für heatingOperationTimerTableWeek ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['heatingOperationTimerTableWeek']}}
      alias: Prüfe den Parameter heatingOperationTimerTableWeek
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''heatingOperationTimerTable52MonFri'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert heatingOperationTimerTable52MonFri
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTable52MonFri ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['heatingOperationTimerTable52MonFri']}}
      alias: Prüfe den Parameter heatingOperationTimerTable52MonFri
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''heatingOperationTimerTable52SatSun'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert heatingOperationTimerTable52SatSun
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTable52SatSun ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['heatingOperationTimerTable52SatSun']}}
      alias: Prüfe den Parameter heatingOperationTimerTable52SatSun
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''heatingOperationTimerTableDaySunday'']|e
          != "[{&#39;on&#39;: &#39;05:00&#39;, &#39;off&#39;: &#39;12:00&#39;}, {&#39;on&#39;:
          &#39;12:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert heatingOperationTimerTableDaySunday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDaySunday ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['heatingOperationTimerTableDaySunday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDaySunday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''heatingOperationTimerTableDayMonday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;12:00&#39;}, {&#39;on&#39;:
          &#39;12:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert heatingOperationTimerTableDayMonday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDayMonday ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['heatingOperationTimerTableDayMonday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDayMonday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''heatingOperationTimerTableDayTuesday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;12:00&#39;}, {&#39;on&#39;:
          &#39;12:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert heatingOperationTimerTableDayTuesday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDayTuesday ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['heatingOperationTimerTableDayTuesday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDayTuesday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''heatingOperationTimerTableDayWednesday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;12:00&#39;}, {&#39;on&#39;:
          &#39;12:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert heatingOperationTimerTableDayWednesday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDayWednesday ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['heatingOperationTimerTableDayWednesday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDayWednesday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''heatingOperationTimerTableDayThursday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;12:00&#39;}, {&#39;on&#39;:
          &#39;12:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert heatingOperationTimerTableDayThursday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDayThursday ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['heatingOperationTimerTableDayThursday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDayThursday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''heatingOperationTimerTableDayFriday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;12:00&#39;}, {&#39;on&#39;:
          &#39;12:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert heatingOperationTimerTableDayFriday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDayFriday ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['heatingOperationTimerTableDayFriday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDayFriday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''heatingOperationTimerTableDaySaturday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;12:00&#39;}, {&#39;on&#39;:
          &#39;12:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert heatingOperationTimerTableDaySaturday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDaySaturday ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['heatingOperationTimerTableDaySaturday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDaySaturday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''hotWaterOperationTimerTableSelectedString'']
          != "Tage (Mo, Di, ...)" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert hotWaterOperationTimerTableSelectedString
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableSelectedString ist
            {{state_attr('sensor.luxtronik_21_param_state', 'parameters')['hotWaterOperationTimerTableSelectedString']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableSelectedString
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''hotWaterOperationTimerTableWeek'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert hotWaterOperationTimerTableWeek hat
            geändert'
          message: Der neue Wert für hotWaterOperationTimerTableWeek ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['hotWaterOperationTimerTableWeek']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableWeek
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''hotWaterOperationTimerTable52MonFri'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert hotWaterOperationTimerTable52MonFri
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTable52MonFri ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['hotWaterOperationTimerTable52MonFri']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTable52MonFri
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''hotWaterOperationTimerTable52SatSun'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert hotWaterOperationTimerTable52SatSun
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTable52SatSun ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['hotWaterOperationTimerTable52SatSun']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTable52SatSun
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''hotWaterOperationTimerTableDaySunday'']|e
          != "[{&#39;on&#39;: &#39;05:00&#39;, &#39;off&#39;: &#39;02:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert hotWaterOperationTimerTableDaySunday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDaySunday ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['hotWaterOperationTimerTableDaySunday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDaySunday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''hotWaterOperationTimerTableDayMonday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert hotWaterOperationTimerTableDayMonday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDayMonday ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['hotWaterOperationTimerTableDayMonday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDayMonday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''hotWaterOperationTimerTableDayTuesday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert hotWaterOperationTimerTableDayTuesday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDayTuesday ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['hotWaterOperationTimerTableDayTuesday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDayTuesday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''hotWaterOperationTimerTableDayWednesday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert hotWaterOperationTimerTableDayWednesday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDayWednesday ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['hotWaterOperationTimerTableDayWednesday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDayWednesday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''hotWaterOperationTimerTableDayThursday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert hotWaterOperationTimerTableDayThursday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDayThursday ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['hotWaterOperationTimerTableDayThursday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDayThursday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''hotWaterOperationTimerTableDayFriday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert hotWaterOperationTimerTableDayFriday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDayFriday ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['hotWaterOperationTimerTableDayFriday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDayFriday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_21_param_state'', ''parameters'')[''hotWaterOperationTimerTableDaySaturday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 21: Der Wert hotWaterOperationTimerTableDaySaturday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDaySaturday ist {{state_attr('sensor.luxtronik_21_param_state',
            'parameters')['hotWaterOperationTimerTableDaySaturday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDaySaturday
  mode: single
- id: '1675601874352'
  alias: Monitoring Heatpump 23
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.luxtronik_23_param_state
    attribute: parameters
  - platform: time_pattern
    hours: /4
  condition: []
  action:
  - if:
    - condition: template
      value_template: '{% if state_attr(''sensor.luxtronik_23_value_state'', ''values'')|safe
        == ''None'' %}false{%- else -%}true{%- endif %}'
      alias: Prüfe, ob im Value Status gültige Werte vorhanden sind (nicht None)
    then:
    - if:
      - condition: and
        conditions:
        - condition: state
          entity_id: binary_sensor.luxtronik23_asd
          state: 'off'
          for:
            hours: 0
            minutes: 4
            seconds: 0
        - condition: or
          conditions:
          - condition: state
            entity_id: binary_sensor.luxtronik23_vd1
            state: 'on'
            for:
              hours: 0
              minutes: 5
              seconds: 0
          - condition: state
            entity_id: binary_sensor.luxtronik23_vd2
            state: 'on'
            for:
              hours: 0
              minutes: 5
              seconds: 0
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Sensor luxtronik23_asd meldet ein Problem'
          message: Der Status des Sensor luxtronik23_asd ist {{ states('binary_sensor.luxtronik23_asd')
            }}  , jedoch sollte er ON sein, wenn der 1. oder  2. Verdichter läuft
      alias: Prüfe den Status von luxtronik23_asd
    - if:
      - condition: state
        entity_id: binary_sensor.luxtronik23_evu
        state: 'off'
        for:
          hours: 0
          minutes: 5
          seconds: 0
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Sensor luxtronik23_evu meldet ein Problem'
          message: Der Status des Sensor luxtronik23_evu ist {{ states('binary_sensor.luxtronik23_evu')
            }} , jedoch sollte die Energie Versorger Freigabe immer ON sein
      alias: Prüfe den Status von luxtronik23_evu
    - if:
      - condition: state
        entity_id: binary_sensor.luxtronik23_mot
        state: 'off'
        for:
          hours: 0
          minutes: 5
          seconds: 0
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Sensor luxtronik23_mot meldet ein Problem'
          message: Der Status des Sensor luxtronik23_mot ist {{ states('binary_sensor.luxtronik23_mot')
            }} , jedoch sollte der Motorschutz immer ON sein
      alias: Prüfe den Status von luxtronik23_mot
    - if:
      - condition: state
        entity_id: binary_sensor.luxtronik23_hd
        state: 'on'
        for:
          hours: 0
          minutes: 5
          seconds: 0
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Sensor luxtronik23_hd meldet ein Problem'
          message: Der Status des Sensor luxtronik23_hd ist {{ states('binary_sensor.luxtronik23_hd')
            }} , jedoch sollte der Hochdruck immer OFF sein
      alias: Prüfe den Status von luxtronik23_hd
    - if:
      - condition: state
        entity_id: binary_sensor.luxtronik23_nd
        state: 'off'
        for:
          hours: 0
          minutes: 5
          seconds: 0
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Sensor luxtronik23_nd meldet ein Problem'
          message: Der Status des Sensor luxtronik23_nd ist {{ states('binary_sensor.luxtronik23_nd')
            }} , jedoch sollte der Niederdruck immer ON sein
      alias: Prüfe den Status von luxtronik23_nd
    - if:
      - condition: and
        conditions:
        - condition: state
          entity_id: sensor.luxtronik23_trl_soll
          state: '15'
          for:
            hours: 72
            minutes: 0
            seconds: 0
          alias: Rücklauf Soll seit 3 Tagen auf 15°C
        - condition: template
          value_template: '{{ (now().month == 5 and now().day > 15) or now().month
            == 6 }}'
          alias: Es ist ab Mitte Mai oder Juni
        - condition: state
          entity_id: input_boolean.luxtronik_heizphase_haus_23
          state: 'on'
      then:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.luxtronik_heizphase_haus_23
        alias: Schalte Heizphase aus
      - service: input_select.set_options
        data:
          options: '{{ states(''input_select.luxtronik_operation_mode_aus'') }}'
        target:
          entity_id: input_select.luxtronik_23_hz_operation_mode
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Info Heatpump 23: Die Heizphase ist beendet'
          message: none
      alias: Heizphase ausschalten im Mai/Juni wenn 72h lang Heizgrenze überschritten
        (Rücklauf Soll = 15 °C)
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: '{{ states(''sensor.luxtronik23_ta_mittel'')|int <= states(''sensor.luxtronik23_heizgrenze'')|int
            }}'
          alias: Mitteltemperatur kleiner als Heizgrenze
        - condition: template
          value_template: '{{ now().month == 10 or now().month == 11 }}'
          alias: Es ist Oktober oder November
        - condition: state
          entity_id: input_boolean.luxtronik_heizphase_haus_23
          state: 'off'
      then:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.luxtronik_heizphase_haus_23
      - service: input_select.set_options
        data:
          options: '{{ states(''input_select.luxtronik_operation_mode_automatik'')
            }}'
        target:
          entity_id: input_select.luxtronik_23_hz_operation_mode
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Info Heatpump 23: Die Heizphase hat begonnen'
          message: none
      alias: Heizphase einschalten im Oktober/November wenn TA Mittel < Heizgrenze
    - if:
      - condition: and
        conditions:
        - condition: numeric_state
          entity_id: sensor.luxtronik23_ta_mittel
          above: 22
        - condition: template
          value_template: '{{ now().month == 6 or now().month == 7 }}'
          alias: Es ist Juni oder Juli
        - condition: state
          entity_id: input_boolean.luxtronik_kuhlphase_haus_23
          state: 'off'
      then:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.luxtronik_kuhlphase_haus_23
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Info Heatpump 23: Die Kühlphase hat begonnen'
          message: none
      alias: Kühlphase einschalten im Juni/Juli wenn TA Mittel über 22 °C
    - if:
      - condition: and
        conditions:
        - condition: numeric_state
          entity_id: sensor.luxtronik23_ta_mittel
          below: 16
        - condition: template
          value_template: '{{ now().month == 9 }}'
          alias: Es ist September
        - condition: state
          entity_id: input_boolean.luxtronik_kuhlphase_haus_23
          state: 'on'
      then:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.luxtronik_kuhlphase_haus_23
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Info Heatpump 23: Die Kühlphase ist beendet'
          message: Es ist September und TA-Mittel ist unterhalb 16 °C
      alias: Kühlphase ausschalten im September wenn TA Mittel unter 16 °C
  - if:
    - condition: template
      value_template: '{% if state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')|safe
        == ''None'' %}false{%- else -%}true{%- endif %}'
      alias: Prüfe, ob im Parameter Status gültige Werte vorhanden sind (nicht None)
    then:
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''heating_temperature'']
          != -4 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert heating_temperature hat geändert'
          message: Der neue Wert für heating_temperature ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['heating_temperature']}}
      alias: Prüfe den Parameter heating_temperature
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: "{{state_attr('sensor.luxtronik_23_param_state', 'parameters')['warmwater_temperature']
            \n!= states('input_number.luxtronik_23_ww_solltemperatur')|int \n    and
            (state_attr('automation.schalte_ww_setze_ww_solltemperatur_haus_23_bei_anderung','current')|int
            == 0) \n}}"
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert warmwater_temperature hat geändert'
          message: Der neue Wert für warmwater_temperature ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['warmwater_temperature']}}
      alias: Prüfe den Parameter warmwater_temperature (ändert während der TDI)
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''warmwater_temperature'']
            != states(''input_number.luxtronik_ww_normaltemperatur'')|int }}'
        - condition: state
          entity_id: schedule.luxtronik_zeitplan_tdi_haus_23
          state: 'off'
          enabled: true
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert warmwater_temperature hat geändert
            (während TDI)'
          message: Der neue Wert für warmwater_temperature ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['warmwater_temperature']}}
      alias: Prüfe den Parameter warmwater_temperature Normabweichung (nicht während
        der TDI)
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: '{{(state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''heating_operation_mode''])|int
            != states(''input_select.luxtronik_23_hz_operation_mode'')|int }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert heating_operation_mode hat geändert
            (ausserhalb TDI)'
          message: Der neue Wert für heating_operation_mode ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['heating_operation_mode']}}
      alias: Prüfe den Parameter heating_operation_mode (ändert während der TDI)
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: "{{ (((state_attr('sensor.luxtronik_23_param_state', 'parameters')['heating_operation_mode'])|int
            != states('input_select.luxtronik_operation_mode_automatik')|int) \n and
            states('input_boolean.luxtronik_heizphase_haus_23') == 'on') \n or\n (((state_attr('sensor.luxtronik_23_param_state',\n'parameters')['heating_operation_mode'])|int
            != states('input_select.luxtronik_operation_mode_aus')|int) \n and states('input_boolean.luxtronik_heizphase_haus_23')
            == 'off')}}"
        - condition: state
          entity_id: schedule.luxtronik_zeitplan_tdi_haus_23
          state: 'off'
          enabled: true
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert heating_operation_mode hat geändert
            (während TDI)'
          message: Der neue Wert für heating_operation_mode ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['heating_operation_mode']}}
      alias: Prüfe den Parameter heating_operation_mode Normabweichung  (nicht während
        der TDI)
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''warmwater_operation_mode_string'']
          != "Automatik" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert warmwater_operation_mode_string hat
            geändert (ausserhalb TDI)'
          message: Der neue Wert für warmwater_operation_mode_string ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['warmwater_operation_mode_string']}}
      alias: Prüfe den Parameter warmwater_operation_mode_string
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''heating_curve_end_point'']
          != 35 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert heating_curve_end_point hat geändert'
          message: Der neue Wert für heating_curve_end_point ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['heating_curve_end_point']}}
      alias: Prüfe den Parameter heating_curve_end_point
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''heating_curve_parallel_offset'']
          != 22 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert heating_curve_parallel_offset hat
            geändert'
          message: Der neue Wert für heating_curve_parallel_offset ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['heating_curve_parallel_offset']}}
      alias: Prüfe den Parameter heating_curve_parallel_offset
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''deltaHeatingReduction'']
          != 0 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert deltaHeatingReduction hat geändert'
          message: Der neue Wert für deltaHeatingReduction ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['deltaHeatingReduction']}}
      alias: Prüfe den Parameter deltaHeatingReduction
    - if:
      - condition: template
        value_template: "{{ (state_attr('sensor.luxtronik_23_param_state', 'parameters')['hotWaterTemperatureHysteresis']
          \n    != states('input_number.luxtronik_23_ww_hysterese')|int) \n    and
          (state_attr('automation.schalte_ww_setze_ww_hysterese_haus_23_bei_anderung','current')|int
          == 0) \n}}\n"
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert hotWaterTemperatureHysteresis hat
            geändert'
          message: Der neue Wert für hotWaterTemperatureHysteresis ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['hotWaterTemperatureHysteresis']}}
      alias: Prüfe den Parameter hotWaterTemperatureHysteresis
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''returnTemperatureHysteresis'']
          != 3 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert returnTemperatureHysteresis hat geändert'
          message: Der neue Wert für returnTemperatureHysteresis ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['returnTemperatureHysteresis']}}
      alias: Prüfe den Parameter returnTemperatureHysteresis
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''temperature_hot_water_target'']
            != states(''input_number.luxtronik_23_ww_solltemperatur_wunschwert'')|int
            }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert temperature_hot_water_target hat
            geändert'
          message: Der neue Wert für temperature_hot_water_target ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['temperature_hot_water_target']}}
      alias: Prüfe den Parameter temperature_hot_water_target (ändert während der
        TDI)
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''temperature_hot_water_target'']
            != states(''input_number.luxtronik_ww_normaltemperatur'')|int }}'
        - condition: state
          entity_id: schedule.luxtronik_zeitplan_tdi_haus_23
          state: 'off'
          enabled: true
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert temperature_hot_water_target hat
            geändert (während TDI)'
          message: Der neue Wert für temperature_hot_water_target ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['temperature_hot_water_target']}}
      alias: Prüfe den Parameter temperature_hot_water_target Normabweichung  (ausserhalb
        der TDI)
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''thresholdHeatingLimit'']
          != 16 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert thresholdHeatingLimit hat geändert
            (ausserhalb TDI)'
          message: Der neue Wert für thresholdHeatingLimit ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['thresholdHeatingLimit']}}
      alias: Prüfe den Parameter thresholdHeatingLimit
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''returnTemperatureTargetMin'']
          != 15 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert returnTemperatureTargetMin hat geändert'
          message: Der neue Wert für returnTemperatureTargetMin ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['returnTemperatureTargetMin']}}
      alias: Prüfe den Parameter returnTemperatureTargetMin
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''temperature_hot_water_limit'']
          != 60 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert temperature_hot_water_limit hat geändert'
          message: Der neue Wert für temperature_hot_water_limit ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['temperature_hot_water_limit']}}
      alias: Prüfe den Parameter temperature_hot_water_limit
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''heatingOperationTimerTableSelectedString'']
          != "Tage (Mo, Di, ...)" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert heatingOperationTimerTableSelectedString
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableSelectedString ist
            {{state_attr('sensor.luxtronik_23_param_state', 'parameters')['heatingOperationTimerTableSelectedString']}}
      alias: Prüfe den Parameter heatingOperationTimerTableSelectedString
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''heatingOperationTimerTableWeek'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert heatingOperationTimerTableWeek hat
            geändert'
          message: Der neue Wert für heatingOperationTimerTableWeek ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['heatingOperationTimerTableWeek']}}
      alias: Prüfe den Parameter heatingOperationTimerTableWeek
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''heatingOperationTimerTable52MonFri'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert heatingOperationTimerTable52MonFri
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTable52MonFri ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['heatingOperationTimerTable52MonFri']}}
      alias: Prüfe den Parameter heatingOperationTimerTable52MonFri
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''heatingOperationTimerTable52SatSun'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert heatingOperationTimerTable52SatSun
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTable52SatSun ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['heatingOperationTimerTable52SatSun']}}
      alias: Prüfe den Parameter heatingOperationTimerTable52SatSun
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''heatingOperationTimerTableDaySunday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert heatingOperationTimerTableDaySunday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDaySunday ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['heatingOperationTimerTableDaySunday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDaySunday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''heatingOperationTimerTableDayMonday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert heatingOperationTimerTableDayMonday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDayMonday ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['heatingOperationTimerTableDayMonday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDayMonday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''heatingOperationTimerTableDayTuesday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert heatingOperationTimerTableDayTuesday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDayTuesday ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['heatingOperationTimerTableDayTuesday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDayTuesday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''heatingOperationTimerTableDayWednesday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert heatingOperationTimerTableDayWednesday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDayWednesday ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['heatingOperationTimerTableDayWednesday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDayWednesday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''heatingOperationTimerTableDayThursday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert heatingOperationTimerTableDayThursday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDayThursday ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['heatingOperationTimerTableDayThursday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDayThursday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''heatingOperationTimerTableDayFriday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert heatingOperationTimerTableDayFriday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDayFriday ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['heatingOperationTimerTableDayFriday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDayFriday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''heatingOperationTimerTableDaySaturday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert heatingOperationTimerTableDaySaturday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDaySaturday ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['heatingOperationTimerTableDaySaturday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDaySaturday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''hotWaterOperationTimerTableSelectedString'']
          != "Tage (Mo, Di, ...)" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert hotWaterOperationTimerTableSelectedString
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableSelectedString ist
            {{state_attr('sensor.luxtronik_23_param_state', 'parameters')['hotWaterOperationTimerTableSelectedString']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableSelectedString
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''hotWaterOperationTimerTableWeek'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert hotWaterOperationTimerTableWeek hat
            geändert'
          message: Der neue Wert für hotWaterOperationTimerTableWeek ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['hotWaterOperationTimerTableWeek']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableWeek
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''hotWaterOperationTimerTable52MonFri'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert hotWaterOperationTimerTable52MonFri
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTable52MonFri ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['hotWaterOperationTimerTable52MonFri']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTable52MonFri
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''hotWaterOperationTimerTable52SatSun'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert hotWaterOperationTimerTable52SatSun
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTable52SatSun ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['hotWaterOperationTimerTable52SatSun']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTable52SatSun
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''hotWaterOperationTimerTableDaySunday'']|e
          != "[{&#39;on&#39;: &#39;05:00&#39;, &#39;off&#39;: &#39;02:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert hotWaterOperationTimerTableDaySunday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDaySunday ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['hotWaterOperationTimerTableDaySunday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDaySunday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''hotWaterOperationTimerTableDayMonday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert hotWaterOperationTimerTableDayMonday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDayMonday ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['hotWaterOperationTimerTableDayMonday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDayMonday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''hotWaterOperationTimerTableDayTuesday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert hotWaterOperationTimerTableDayTuesday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDayTuesday ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['hotWaterOperationTimerTableDayTuesday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDayTuesday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''hotWaterOperationTimerTableDayWednesday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert hotWaterOperationTimerTableDayWednesday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDayWednesday ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['hotWaterOperationTimerTableDayWednesday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDayWednesday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''hotWaterOperationTimerTableDayThursday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert hotWaterOperationTimerTableDayThursday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDayThursday ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['hotWaterOperationTimerTableDayThursday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDayThursday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''hotWaterOperationTimerTableDayFriday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert hotWaterOperationTimerTableDayFriday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDayFriday ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['hotWaterOperationTimerTableDayFriday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDayFriday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_23_param_state'', ''parameters'')[''hotWaterOperationTimerTableDaySaturday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 23: Der Wert hotWaterOperationTimerTableDaySaturday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDaySaturday ist {{state_attr('sensor.luxtronik_23_param_state',
            'parameters')['hotWaterOperationTimerTableDaySaturday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDaySaturday
  mode: single
- id: '1675601916369'
  alias: Monitoring Heatpump 25
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.luxtronik_25_param_state
    attribute: parameters
  - platform: time_pattern
    hours: /4
  condition: []
  action:
  - if:
    - condition: template
      value_template: '{% if state_attr(''sensor.luxtronik_25_value_state'', ''values'')|safe
        == ''None'' %}false{%- else -%}true{%- endif %}'
      alias: Prüfe, ob im Value Status gültige Werte vorhanden sind (nicht None)
    then:
    - if:
      - condition: and
        conditions:
        - condition: state
          entity_id: binary_sensor.luxtronik25_asd
          state: 'off'
          for:
            hours: 0
            minutes: 4
            seconds: 0
        - condition: or
          conditions:
          - condition: state
            entity_id: binary_sensor.luxtronik25_vd1
            state: 'on'
            for:
              hours: 0
              minutes: 5
              seconds: 0
          - condition: state
            entity_id: binary_sensor.luxtronik25_vd2
            state: 'on'
            for:
              hours: 0
              minutes: 5
              seconds: 0
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Sensor luxtronik25_asd meldet ein Problem'
          message: Der Status des Sensor luxtronik25_asd ist {{ states('binary_sensor.luxtronik25_asd')
            }}  , jedoch sollte er ON sein, wenn der 1. oder  2. Verdichter läuft
      alias: Prüfe den Status von luxtronik25_asd
    - if:
      - condition: state
        entity_id: binary_sensor.luxtronik25_evu
        state: 'off'
        for:
          hours: 0
          minutes: 5
          seconds: 0
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Sensor luxtronik25_evu meldet ein Problem'
          message: Der Status des Sensor luxtronik25_evu ist {{ states('binary_sensor.luxtronik25_evu')
            }} , jedoch sollte die Energie Versorger Freigabe immer ON sein
      alias: Prüfe den Status von luxtronik25_evu
    - if:
      - condition: state
        entity_id: binary_sensor.luxtronik25_mot
        state: 'off'
        for:
          hours: 0
          minutes: 5
          seconds: 0
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Sensor luxtronik25_mot meldet ein Problem'
          message: Der Status des Sensor luxtronik25_mot ist {{ states('binary_sensor.luxtronik25_mot')
            }} , jedoch sollte der Motorschutz immer ON sein
      alias: Prüfe den Status von luxtronik25_mot
    - if:
      - condition: state
        entity_id: binary_sensor.luxtronik25_hd
        state: 'on'
        for:
          hours: 0
          minutes: 5
          seconds: 0
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Sensor luxtronik25_hd meldet ein Problem'
          message: Der Status des Sensor luxtronik25_hd ist {{ states('binary_sensor.luxtronik25_hd')
            }} , jedoch sollte der Hochdruck immer OFF sein
      alias: Prüfe den Status von luxtronik25_hd
    - if:
      - condition: state
        entity_id: binary_sensor.luxtronik25_nd
        state: 'off'
        for:
          hours: 0
          minutes: 5
          seconds: 0
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Sensor luxtronik25_nd meldet ein Problem'
          message: Der Status des Sensor luxtronik25_nd ist {{ states('binary_sensor.luxtronik25_nd')
            }} , jedoch sollte der Niederdruck immer ON sein
      alias: Prüfe den Status von luxtronik25_nd
    - if:
      - condition: and
        conditions:
        - condition: state
          entity_id: sensor.luxtronik25_trl_soll
          state: '15'
          for:
            hours: 72
            minutes: 0
            seconds: 0
          alias: Rücklauf Soll seit 3 Tagen auf 15°C
        - condition: template
          value_template: '{{ (now().month == 5 and now().day > 15) or now().month
            == 6 }}'
          alias: Es ist ab Mitte Mai oder Juni
        - condition: state
          entity_id: input_boolean.luxtronik_heizphase_haus_25
          state: 'on'
      then:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.luxtronik_heizphase_haus_25
        alias: Schalte Heizphase aus
      - service: input_select.set_options
        data:
          options: '{{ states(''input_select.luxtronik_operation_mode_aus'') }}'
        target:
          entity_id: input_select.luxtronik_25_hz_operation_mode
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Info Heatpump 25: Die Heizphase ist beendet'
          message: none
      alias: Heizphase ausschalten im Mai/Juni wenn 72h lang Heizgrenze überschritten
        (Rücklauf Soll = 15 °C)
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: '{{ states(''sensor.luxtronik25_ta_mittel'')|int <= states(''sensor.luxtronik25_heizgrenze'')|int
            }}'
          alias: Mitteltemperatur kleiner als Heizgrenze
        - condition: template
          value_template: '{{ now().month == 10 or now().month == 11 }}'
          alias: Es ist Oktober oder November
        - condition: state
          entity_id: input_boolean.luxtronik_heizphase_haus_25
          state: 'off'
      then:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.luxtronik_heizphase_haus_25
      - service: input_select.set_options
        data:
          options: '{{ states(''input_select.luxtronik_operation_mode_automatik'')
            }}'
        target:
          entity_id: input_select.luxtronik_25_hz_operation_mode
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Info Heatpump 25: Die Heizphase hat begonnen'
          message: none
      alias: Heizphase einschalten im Oktober/November wenn TA Mittel < Heizgrenze
    - if:
      - condition: and
        conditions:
        - condition: numeric_state
          entity_id: sensor.luxtronik25_ta_mittel
          above: 20
        - condition: template
          value_template: '{{ now().month == 6 or now().month == 7 }}'
          alias: Es ist Juni oder Juli
        - condition: state
          entity_id: input_boolean.luxtronik_kuhlphase_haus_25
          state: 'off'
      then:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.luxtronik_kuhlphase_haus_25
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Info Heatpump 25: Die Kühlphase hat begonnen'
          message: none
      alias: Kühlphase einschalten im Juni/Juli wenn TA Mittel über 20 °C
    - if:
      - condition: and
        conditions:
        - condition: numeric_state
          entity_id: sensor.luxtronik25_ta_mittel
          below: 14
        - condition: template
          value_template: '{{ now().month == 9 }}'
          alias: Es ist September
        - condition: state
          entity_id: input_boolean.luxtronik_kuhlphase_haus_25
          state: 'on'
      then:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.luxtronik_kuhlphase_haus_25
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Info Heatpump 25: Die Kühlphase ist beendet'
          message: Es ist September und TA-Mittel ist unterhalb 14 °C
      alias: Kühlphase ausschalten im September wenn TA Mittel unter 14 °C
  - if:
    - condition: template
      value_template: '{% if state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')|safe
        == ''None'' %}false{%- else -%}true{%- endif %}'
      alias: Prüfe, ob im Parameter Status gültige Werte vorhanden sind (nicht None)
    then:
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''heating_temperature'']
          != -3 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert heating_temperature hat geändert'
          message: Der neue Wert für heating_temperature ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['heating_temperature']}}
      alias: Prüfe den Parameter heating_temperature
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: "{{state_attr('sensor.luxtronik_25_param_state', 'parameters')['warmwater_temperature']
            \n!= states('input_number.luxtronik_25_ww_solltemperatur')|int \n    and
            (state_attr('automation.schalte_ww_setze_ww_solltemperatur_haus_25_bei_anderung','current')|int
            == 0) \n}}"
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert warmwater_temperature hat geändert'
          message: Der neue Wert für warmwater_temperature ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['warmwater_temperature']}}
      alias: Prüfe den Parameter warmwater_temperature (ändert während der TDI)
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''warmwater_temperature'']
            != states(''input_number.luxtronik_ww_normaltemperatur'')|int }}'
        - condition: state
          entity_id: schedule.luxtronik_zeitplan_tdi_haus_25
          state: 'off'
          enabled: true
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert warmwater_temperature hat geändert
            (während TDI)'
          message: Der neue Wert für warmwater_temperature ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['warmwater_temperature']}}
      alias: Prüfe den Parameter warmwater_temperature Normabweichung (nicht während
        der TDI)
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: '{{(state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''heating_operation_mode''])|int
            != states(''input_select.luxtronik_25_hz_operation_mode'')|int }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert heating_operation_mode hat geändert
            (ausserhalb TDI)'
          message: Der neue Wert für heating_operation_mode ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['heating_operation_mode']}}
      alias: Prüfe den Parameter heating_operation_mode (ändert während der TDI)
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: "{{ (((state_attr('sensor.luxtronik_25_param_state', 'parameters')['heating_operation_mode'])|int
            != states('input_select.luxtronik_operation_mode_automatik')|int) \n and
            states('input_boolean.luxtronik_heizphase_haus_25') == 'on') \n or\n (((state_attr('sensor.luxtronik_25_param_state',\n'parameters')['heating_operation_mode'])|int
            != states('input_select.luxtronik_operation_mode_aus')|int) \n and states('input_boolean.luxtronik_heizphase_haus_25')
            == 'off')}}"
        - condition: state
          entity_id: schedule.luxtronik_zeitplan_tdi_haus_25
          state: 'off'
          enabled: true
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert heating_operation_mode hat geändert
            (während TDI)'
          message: Der neue Wert für heating_operation_mode ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['heating_operation_mode']}}
      alias: Prüfe den Parameter heating_operation_mode Normabweichung  (nicht während
        der TDI)
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''warmwater_operation_mode_string'']
          != "Automatik" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert warmwater_operation_mode_string hat
            geändert (ausserhalb TDI)'
          message: Der neue Wert für warmwater_operation_mode_string ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['warmwater_operation_mode_string']}}
      alias: Prüfe den Parameter warmwater_operation_mode_string
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''heating_curve_end_point'']
          != 35 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert heating_curve_end_point hat geändert'
          message: Der neue Wert für heating_curve_end_point ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['heating_curve_end_point']}}
      alias: Prüfe den Parameter heating_curve_end_point
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''heating_curve_parallel_offset'']
          != 22 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert heating_curve_parallel_offset hat
            geändert'
          message: Der neue Wert für heating_curve_parallel_offset ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['heating_curve_parallel_offset']}}
      alias: Prüfe den Parameter heating_curve_parallel_offset
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''deltaHeatingReduction'']
          != 0 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert deltaHeatingReduction hat geändert'
          message: Der neue Wert für deltaHeatingReduction ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['deltaHeatingReduction']}}
      alias: Prüfe den Parameter deltaHeatingReduction
    - if:
      - condition: template
        value_template: "{{ (state_attr('sensor.luxtronik_25_param_state', 'parameters')['hotWaterTemperatureHysteresis']
          \n    != states('input_number.luxtronik_25_ww_hysterese')|int) \n    and
          (state_attr('automation.schalte_ww_setze_ww_hysterese_haus_25_bei_anderung','current')|int
          == 0) \n}}\n"
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert hotWaterTemperatureHysteresis hat
            geändert'
          message: Der neue Wert für hotWaterTemperatureHysteresis ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['hotWaterTemperatureHysteresis']}}
      alias: Prüfe den Parameter hotWaterTemperatureHysteresis
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''returnTemperatureHysteresis'']
          != 3 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert returnTemperatureHysteresis hat geändert'
          message: Der neue Wert für returnTemperatureHysteresis ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['returnTemperatureHysteresis']}}
      alias: Prüfe den Parameter returnTemperatureHysteresis
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''temperature_hot_water_target'']
            != states(''input_number.luxtronik_25_ww_solltemperatur_wunschwert'')|int
            }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert temperature_hot_water_target hat
            geändert'
          message: Der neue Wert für temperature_hot_water_target ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['temperature_hot_water_target']}}
      alias: Prüfe den Parameter temperature_hot_water_target (ändert während der
        TDI)
    - if:
      - condition: and
        conditions:
        - condition: template
          value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''temperature_hot_water_target'']
            != states(''input_number.luxtronik_ww_normaltemperatur'')|int }}'
        - condition: state
          entity_id: schedule.luxtronik_zeitplan_tdi_haus_25
          state: 'off'
          enabled: true
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert temperature_hot_water_target hat
            geändert (während TDI)'
          message: Der neue Wert für temperature_hot_water_target ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['temperature_hot_water_target']}}
      alias: Prüfe den Parameter temperature_hot_water_target Normabweichung  (ausserhalb
        der TDI)
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''thresholdHeatingLimit'']
          != 15 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert thresholdHeatingLimit hat geändert
            (ausserhalb TDI)'
          message: Der neue Wert für thresholdHeatingLimit ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['thresholdHeatingLimit']}}
      alias: Prüfe den Parameter thresholdHeatingLimit
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''returnTemperatureTargetMin'']
          != 15 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert returnTemperatureTargetMin hat geändert'
          message: Der neue Wert für returnTemperatureTargetMin ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['returnTemperatureTargetMin']}}
      alias: Prüfe den Parameter returnTemperatureTargetMin
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''temperature_hot_water_limit'']
          != 60 }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert temperature_hot_water_limit hat geändert'
          message: Der neue Wert für temperature_hot_water_limit ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['temperature_hot_water_limit']}}
      alias: Prüfe den Parameter temperature_hot_water_limit
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''heatingOperationTimerTableSelectedString'']
          != "Tage (Mo, Di, ...)" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert heatingOperationTimerTableSelectedString
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableSelectedString ist
            {{state_attr('sensor.luxtronik_25_param_state', 'parameters')['heatingOperationTimerTableSelectedString']}}
      alias: Prüfe den Parameter heatingOperationTimerTableSelectedString
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''heatingOperationTimerTableWeek'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert heatingOperationTimerTableWeek hat
            geändert'
          message: Der neue Wert für heatingOperationTimerTableWeek ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['heatingOperationTimerTableWeek']}}
      alias: Prüfe den Parameter heatingOperationTimerTableWeek
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''heatingOperationTimerTable52MonFri'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert heatingOperationTimerTable52MonFri
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTable52MonFri ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['heatingOperationTimerTable52MonFri']}}
      alias: Prüfe den Parameter heatingOperationTimerTable52MonFri
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''heatingOperationTimerTable52SatSun'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert heatingOperationTimerTable52SatSun
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTable52SatSun ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['heatingOperationTimerTable52SatSun']}}
      alias: Prüfe den Parameter heatingOperationTimerTable52SatSun
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''heatingOperationTimerTableDaySunday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert heatingOperationTimerTableDaySunday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDaySunday ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['heatingOperationTimerTableDaySunday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDaySunday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''heatingOperationTimerTableDayMonday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert heatingOperationTimerTableDayMonday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDayMonday ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['heatingOperationTimerTableDayMonday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDayMonday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''heatingOperationTimerTableDayTuesday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert heatingOperationTimerTableDayTuesday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDayTuesday ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['heatingOperationTimerTableDayTuesday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDayTuesday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''heatingOperationTimerTableDayWednesday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert heatingOperationTimerTableDayWednesday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDayWednesday ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['heatingOperationTimerTableDayWednesday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDayWednesday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''heatingOperationTimerTableDayThursday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert heatingOperationTimerTableDayThursday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDayThursday ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['heatingOperationTimerTableDayThursday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDayThursday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''heatingOperationTimerTableDayFriday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert heatingOperationTimerTableDayFriday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDayFriday ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['heatingOperationTimerTableDayFriday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDayFriday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''heatingOperationTimerTableDaySaturday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}]" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert heatingOperationTimerTableDaySaturday
            hat geändert'
          message: Der neue Wert für heatingOperationTimerTableDaySaturday ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['heatingOperationTimerTableDaySaturday']}}
      alias: Prüfe den Parameter heatingOperationTimerTableDaySaturday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''hotWaterOperationTimerTableSelectedString'']
          != "Tage (Mo, Di, ...)" }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert hotWaterOperationTimerTableSelectedString
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableSelectedString ist
            {{state_attr('sensor.luxtronik_25_param_state', 'parameters')['hotWaterOperationTimerTableSelectedString']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableSelectedString
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''hotWaterOperationTimerTableWeek'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert hotWaterOperationTimerTableWeek hat
            geändert'
          message: Der neue Wert für hotWaterOperationTimerTableWeek ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['hotWaterOperationTimerTableWeek']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableWeek
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''hotWaterOperationTimerTable52MonFri'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert hotWaterOperationTimerTable52MonFri
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTable52MonFri ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['hotWaterOperationTimerTable52MonFri']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTable52MonFri
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''hotWaterOperationTimerTable52SatSun'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert hotWaterOperationTimerTable52SatSun
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTable52SatSun ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['hotWaterOperationTimerTable52SatSun']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTable52SatSun
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''hotWaterOperationTimerTableDaySunday'']|e
          != "[{&#39;on&#39;: &#39;05:00&#39;, &#39;off&#39;: &#39;02:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert hotWaterOperationTimerTableDaySunday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDaySunday ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['hotWaterOperationTimerTableDaySunday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDaySunday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''hotWaterOperationTimerTableDayMonday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert hotWaterOperationTimerTableDayMonday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDayMonday ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['hotWaterOperationTimerTableDayMonday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDayMonday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''hotWaterOperationTimerTableDayTuesday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert hotWaterOperationTimerTableDayTuesday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDayTuesday ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['hotWaterOperationTimerTableDayTuesday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDayTuesday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''hotWaterOperationTimerTableDayWednesday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert hotWaterOperationTimerTableDayWednesday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDayWednesday ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['hotWaterOperationTimerTableDayWednesday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDayWednesday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''hotWaterOperationTimerTableDayThursday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert hotWaterOperationTimerTableDayThursday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDayThursday ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['hotWaterOperationTimerTableDayThursday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDayThursday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''hotWaterOperationTimerTableDayFriday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert hotWaterOperationTimerTableDayFriday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDayFriday ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['hotWaterOperationTimerTableDayFriday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDayFriday
    - if:
      - condition: template
        value_template: '{{state_attr(''sensor.luxtronik_25_param_state'', ''parameters'')[''hotWaterOperationTimerTableDaySaturday'']|e
          != "[{&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;:
          &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;,
          &#39;off&#39;: &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;:
          &#39;00:00&#39;}, {&#39;on&#39;: &#39;00:00&#39;, &#39;off&#39;: &#39;00:00&#39;}]"
          }}'
      then:
      - service: notify.administrator_rotseepark
        data:
          title: 'HA-Alert Heatpump 25: Der Wert hotWaterOperationTimerTableDaySaturday
            hat geändert'
          message: Der neue Wert für hotWaterOperationTimerTableDaySaturday ist {{state_attr('sensor.luxtronik_25_param_state',
            'parameters')['hotWaterOperationTimerTableDaySaturday']}}
      alias: Prüfe den Parameter hotWaterOperationTimerTableDaySaturday
  mode: single
- id: '1675759244521'
  alias: Monitoring Zaptec Sensor Verfügbarkeit
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.zaptec_charger_zpr055424
    - sensor.zaptec_charger_zpr111423
    - sensor.zaptec_charger_zpr118007
    - sensor.zaptec_charger_zpr124763
    - sensor.zaptec_charger_zpr211132
    - sensor.zaptec_charger_zpg003786
    to: unavailable
    for:
      hours: 0
      minutes: 10
      seconds: 0
  condition: []
  action:
  - service: notify.administrator_rotseepark
    data:
      title: 'HA-Alert Einstellhalle: Zaptec Station nicht verfügbar'
      message: "zpr055424 - {{ states('sensor.zaptec_charger_zpr055424') }}  \nzpr111423
        - {{ states('sensor.zaptec_charger_zpr111423') }}  \nzpr118007 - {{ states('sensor.zaptec_charger_zpr118007')
        }}  \nzpr124763 - {{ states('sensor.zaptec_charger_zpr124763') }}  \nzpr211132
        - {{ states('sensor.zaptec_charger_zpr211132') }} \nzpg003786 - {{ states('sensor.zaptec_charger_zpg003786')
        }} "
  mode: single
- id: '1676111046127'
  alias: Monitoring Ubiquiti Clients
  description: ''
  trigger:
  - platform: state
    entity_id:
    - device_tracker.ap_19_mesh
    - device_tracker.ap_21_wired_u6
    - device_tracker.ap_23_mesh
    - device_tracker.ap_bmz_wired_u6
    - device_tracker.ap_jls_mesh
    - device_tracker.ap_19_heizung
    - device_tracker.ap_21_heizung
    - device_tracker.ap_23_heizung
    - device_tracker.ap_25_heizung
    - device_tracker.shelly_box_haus_19
    - device_tracker.shelly_box_haus_21
    - device_tracker.shelly_box_haus_23
    - device_tracker.shelly_box_haus_25
    - device_tracker.shelly_hobler_tor
    - device_tracker.homeassistant
    - device_tracker.janitza_umg
    - device_tracker.luxtronic_19
    - device_tracker.luxtronic_21
    - device_tracker.luxtronic_23
    - device_tracker.luxtronic_25
    - device_tracker.vento_compact_19
    - device_tracker.vento_compact_21
    - device_tracker.vento_compact_23
    - device_tracker.vento_compact_25
    - device_tracker.rotseepark_cam_indoor
    - device_tracker.rotseepark_cam_outdoor
    - device_tracker.rotseepark_dm
    - device_tracker.solarlog_19
    - device_tracker.solarlog_21
    - device_tracker.solarlog_23
    - device_tracker.solarlog_25
    - device_tracker.sw_haus_19_poe
    - device_tracker.sw_haus_21_poe
    - device_tracker.sw_haus_23_poe
    - device_tracker.sw_haus_25_poe
    - device_tracker.unifi_protect_nvr
    - device_tracker.zaptec_pp_29_pichler
    - device_tracker.zaptec_pp_46_zihlmann
    - device_tracker.zaptec_pp_65_kunz
    - device_tracker.zaptec_pp_80_hess
    - device_tracker.zpr211132
    - device_tracker.zpg003786
    to: not_home
    for:
      hours: 0
      minutes: 10
      seconds: 0
  condition: []
  action:
  - service: notify.administrator_rotseepark
    data:
      title: 'HA-Alert Rotseepark: Unifi Clients nicht verfügbar'
      message: 'HA-Alert Rotseepark - Unifi Clients nicht verfügbar  {% if states(''device_tracker.ap_19_mesh'')
        != ''home'' -%}device_tracker.ap_19_mesh: {{states(''device_tracker.ap_19_mesh'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.ap_21_wired_u6'') != ''home''
        -%}device_tracker.ap_21_wired_u6: {{states(''device_tracker.ap_21_wired_u6'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.ap_23_mesh'') != ''home''
        -%}device_tracker.ap_23_mesh: {{states(''device_tracker.ap_23_mesh'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.ap_bmz_wired_u6'') != ''home''
        -%}device_tracker.ap_bmz_wired_u6: {{states(''device_tracker.ap_bmz_wired_u6'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.ap_jls_mesh'') != ''home''
        -%}device_tracker.ap_jls_mesh: {{states(''device_tracker.ap_jls_mesh'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.homeassistant'') != ''home''
        -%}device_tracker.homeassistant: {{states(''device_tracker.homeassistant'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.janitza_umg'') != ''home''
        -%}device_tracker.janitza_umg: {{states(''device_tracker.janitza_umg'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.luxtronic_19'') != ''home''
        -%}device_tracker.luxtronic_19: {{states(''device_tracker.luxtronic_19'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.luxtronic_21'') != ''home''
        -%}device_tracker.luxtronic_21: {{states(''device_tracker.luxtronic_21'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.luxtronic_23'') != ''home''
        -%}device_tracker.luxtronic_23: {{states(''device_tracker.luxtronic_23'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.luxtronic_25'') != ''home''
        -%}device_tracker.luxtronic_25: {{states(''device_tracker.luxtronic_25'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.rotseepark_cam_indoor'')
        != ''home'' -%}device_tracker.rotseepark_cam_indoor: {{states(''device_tracker.rotseepark_cam_indoor'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.rotseepark_cam_outdoor'')
        != ''home'' -%}device_tracker.rotseepark_cam_outdoor: {{states(''device_tracker.rotseepark_cam_outdoor'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.rotseepark_dm'') != ''home''
        -%}device_tracker.rotseepark_dm: {{states(''device_tracker.rotseepark_dm'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.solarlog_19'') != ''home''
        -%}device_tracker.solarlog_19: {{states(''device_tracker.solarlog_19'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.solarlog_21'') != ''home''
        -%}device_tracker.solarlog_21: {{states(''device_tracker.solarlog_21'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.solarlog_23'') != ''home''
        -%}device_tracker.solarlog_23: {{states(''device_tracker.solarlog_23'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.solarlog_25'') != ''home''
        -%}device_tracker.solarlog_25: {{states(''device_tracker.solarlog_25'')}}{%-
        else -%}{%- endif %}  {% if states(''device_tracker.sw_haus_19'') != ''home''
        -%}device_tracker.sw_haus_19: {{states(''device_tracker.sw_haus_19'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.sw_haus_21'') != ''home''
        -%}device_tracker.sw_haus_21: {{states(''device_tracker.sw_haus_21'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.sw_haus_23'') != ''home''
        -%}device_tracker.sw_haus_23: {{states(''device_tracker.sw_haus_23'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.sw_haus_25'') != ''home''
        -%}device_tracker.sw_haus_25: {{states(''device_tracker.sw_haus_25'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.unifi_protect_nvr'') !=
        ''home'' -%}device_tracker.unifi_protect_nvr: {{states(''device_tracker.unifi_protect_nvr'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.zaptec_pp_29_pichler'')
        != ''home'' -%}device_tracker.zaptec_pp_29_pichler: {{states(''device_tracker.zaptec_pp_29_pichler'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.zaptec_pp_46_zihlmann'')
        != ''home'' -%}device_tracker.zaptec_pp_46_zihlmann: {{states(''device_tracker.zaptec_pp_46_zihlmann'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.zaptec_pp_65_kunz'') !=
        ''home'' -%}device_tracker.zaptec_pp_65_kunz: {{states(''device_tracker.zaptec_pp_65_kunz'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.zaptec_pp_80_hess'') !=
        ''home'' -%}device_tracker.zaptec_pp_80_hess: {{states(''device_tracker.zaptec_pp_80_hess'')}}{%-
        else -%}{%- endif %} {% if states(''device_tracker.zpr211132'') != ''home''
        -%}device_tracker.zpr211132: {{states(''device_tracker.zpr211132'')}}{%- else
        -%}{%- endif %} '
  mode: single
- id: '1676268725157'
  alias: Schalte TDI - Überwachung TDI Haus 19 (Zeitplan TDI +4h)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - schedule.luxtronik_zeitplan_tdi_haus_19
    from: 'off'
    to: 'on'
    for:
      hours: 4
      minutes: 0
      seconds: 0
  condition: []
  action:
  - service: input_number.set_value
    data:
      value: '{{states(''input_number.luxtronik_ww_normaltemperatur'')|int}}'
    target:
      entity_id: input_number.luxtronik_19_ww_solltemperatur
    alias: Setzte Luxtronik Solltemperatur zu Normal Temperatur
  - if:
    - condition: numeric_state
      entity_id: sensor.luxtronik19_tbw
      below: 56
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - TDI Haus 19 Zieltemperatur mit WP nicht erreich
        message: 'Temperatur Brauchwasser:  {{states(''sensor.luxtronik19_tbw'')}}

          Brauchwasser Zieltemperatur:  {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''temperature_hot_water_target'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Prüfe, ob die Wärmepumpe mindestens 56 Grad erreicht hat
  - repeat:
      while:
      - condition: and
        conditions:
        - condition: numeric_state
          entity_id: sensor.luxtronik19_tbw
          below: 60
        - condition: not
          conditions:
          - condition: state
            entity_id: schedule.luxtronik_zeitplan_tdi_haus_19
            state: 'on'
            for:
              hours: 6
              minutes: 45
              seconds: 0
      sequence:
      - delay:
          hours: 0
          minutes: 5
          seconds: 0
          milliseconds: 0
    alias: Wiederhole, bis die Brauchwasser Temperatur 60 Grad erreicht hat (maximal
      bis TDI Start +6h45')
  - if:
    - condition: state
      entity_id: input_boolean.luxtronik_heizphase_haus_19
      state: 'on'
    then:
    - service: input_select.select_option
      data:
        option: '{{ states(''input_select.luxtronik_operation_mode_automatik'')|int
          }}'
      target:
        entity_id: input_select.luxtronik_19_hz_operation_mode
    alias: Heizung einschalten, sofern wir in der Heizphase sind
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - if:
    - condition: numeric_state
      entity_id: sensor.luxtronik19_tbw
      above: 59.5
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Info Rotseepark - TDI Haus 19 abgeschlossen
        message: 'Temperatur Brauchwasser:  {{states(''sensor.luxtronik19_tbw'')}}

          Brauchwasser Zieltemperatur:  {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''temperature_hot_water_target'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    else:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - TDI Haus 19 FEHLGESCHLAGEN
        message: 'Temperatur Brauchwasser:  {{states(''sensor.luxtronik19_tbw'')}}

          Brauchwasser Zieltemperatur:  {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''temperature_hot_water_target'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Sende eine Benachrichtigung über den Erfolg oder Misserfolg der TDI
  mode: single
- id: '1676271321547'
  alias: Schalte TDI - Überwachung TDI Haus 21 (Zeitplan TDI +4h)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - schedule.luxtronik_zeitplan_tdi_haus_21
    from: 'off'
    to: 'on'
    for:
      hours: 4
      minutes: 0
      seconds: 0
  condition: []
  action:
  - service: input_number.set_value
    data:
      value: '{{states(''input_number.luxtronik_ww_normaltemperatur'')|int}}'
    target:
      entity_id: input_number.luxtronik_21_ww_solltemperatur
    alias: Setzte Luxtronik Solltemperatur zu Normal Temperatur
  - if:
    - condition: numeric_state
      entity_id: sensor.luxtronik21_tbw
      below: 56
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - TDI Haus 21 Zieltemperatur mit WP nicht erreich
        message: 'Temperatur Brauchwasser:  {{states(''sensor.luxtronik21_tbw'')}}

          Brauchwasser Zieltemperatur:  {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''temperature_hot_water_target'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Prüfe, ob die Wärmepumpe mindestens 56 Grad erreicht hat
  - repeat:
      while:
      - condition: and
        conditions:
        - condition: numeric_state
          entity_id: sensor.luxtronik21_tbw
          below: 60
        - condition: not
          conditions:
          - condition: state
            entity_id: schedule.luxtronik_zeitplan_tdi_haus_21
            state: 'on'
            for:
              hours: 6
              minutes: 45
              seconds: 0
      sequence:
      - delay:
          hours: 0
          minutes: 5
          seconds: 0
          milliseconds: 0
    alias: Wiederhole, bis die Brauchwasser Temperatur 60 Grad erreicht hat (maximal
      bis TDI Start +6h45')
  - if:
    - condition: state
      entity_id: input_boolean.luxtronik_heizphase_haus_21
      state: 'on'
    then:
    - service: input_select.select_option
      data:
        option: '{{ states(''input_select.luxtronik_operation_mode_automatik'')|int
          }}'
      target:
        entity_id: input_select.luxtronik_21_hz_operation_mode
    alias: Heizung einschalten, sofern wir in der Heizphase sind
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - if:
    - condition: numeric_state
      entity_id: sensor.luxtronik21_tbw
      above: 59.5
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Info Rotseepark - TDI Haus 21 abgeschlossen
        message: 'Temperatur Brauchwasser:  {{states(''sensor.luxtronik21_tbw'')}}

          Brauchwasser Zieltemperatur:  {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''temperature_hot_water_target'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    else:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - TDI Haus 21 FEHLGESCHLAGEN
        message: 'Temperatur Brauchwasser:  {{states(''sensor.luxtronik21_tbw'')}}

          Brauchwasser Zieltemperatur:  {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''temperature_hot_water_target'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Sende eine Benachrichtigung über den Erfolg oder Misserfolg der TDI
  mode: single
- id: '1676271361994'
  alias: Schalte TDI - Überwachung TDI Haus 23 (Zeitplan TDI +4h)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - schedule.luxtronik_zeitplan_tdi_haus_23
    from: 'off'
    to: 'on'
    for:
      hours: 4
      minutes: 0
      seconds: 0
  condition: []
  action:
  - service: input_number.set_value
    data:
      value: '{{states(''input_number.luxtronik_ww_normaltemperatur'')|int}}'
    target:
      entity_id: input_number.luxtronik_23_ww_solltemperatur
    alias: Setzte Luxtronik Solltemperatur zu Normal Temperatur
  - if:
    - condition: numeric_state
      entity_id: sensor.luxtronik23_tbw
      below: 56
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - TDI Haus 23 Zieltemperatur mit WP nicht erreich
        message: 'Temperatur Brauchwasser:  {{states(''sensor.luxtronik23_tbw'')}}

          Brauchwasser Zieltemperatur:  {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''temperature_hot_water_target'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Prüfe, ob die Wärmepumpe mindestens 56 Grad erreicht hat
  - repeat:
      while:
      - condition: and
        conditions:
        - condition: numeric_state
          entity_id: sensor.luxtronik23_tbw
          below: 60
        - condition: not
          conditions:
          - condition: state
            entity_id: schedule.luxtronik_zeitplan_tdi_haus_23
            state: 'on'
            for:
              hours: 6
              minutes: 45
              seconds: 0
      sequence:
      - delay:
          hours: 0
          minutes: 5
          seconds: 0
          milliseconds: 0
    alias: Wiederhole, bis die Brauchwasser Temperatur 60 Grad erreicht hat (maximal
      bis TDI Start +6h45')
  - if:
    - condition: state
      entity_id: input_boolean.luxtronik_heizphase_haus_23
      state: 'on'
    then:
    - service: input_select.select_option
      data:
        option: '{{ states(''input_select.luxtronik_operation_mode_automatik'')|int
          }}'
      target:
        entity_id: input_select.luxtronik_23_hz_operation_mode
    alias: Heizung einschalten, sofern wir in der Heizphase sind
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - if:
    - condition: numeric_state
      entity_id: sensor.luxtronik23_tbw
      above: 59.5
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Info Rotseepark - TDI Haus 23 abgeschlossen
        message: 'Temperatur Brauchwasser:  {{states(''sensor.luxtronik23_tbw'')}}

          Brauchwasser Zieltemperatur:  {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''temperature_hot_water_target'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    else:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - TDI Haus 23 FEHLGESCHLAGEN
        message: 'Temperatur Brauchwasser:  {{states(''sensor.luxtronik23_tbw'')}}

          Brauchwasser Zieltemperatur:  {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''temperature_hot_water_target'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Sende eine Benachrichtigung über den Erfolg oder Misserfolg der TDI
  mode: single
- id: '1676271387015'
  alias: Schalte TDI - Überwachung TDI Haus 25 (Zeitplan TDI +4h)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - schedule.luxtronik_zeitplan_tdi_haus_25
    from: 'off'
    to: 'on'
    for:
      hours: 4
      minutes: 0
      seconds: 0
  condition: []
  action:
  - service: input_number.set_value
    data:
      value: '{{states(''input_number.luxtronik_ww_normaltemperatur'')|int}}'
    target:
      entity_id: input_number.luxtronik_25_ww_solltemperatur
    alias: Setzte Luxtronik Solltemperatur zu Normal Temperatur
  - if:
    - condition: numeric_state
      entity_id: sensor.luxtronik25_tbw
      below: 56
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - TDI Haus 25 Zieltemperatur mit WP nicht erreich
        message: 'Temperatur Brauchwasser:  {{states(''sensor.luxtronik25_tbw'')}}

          Brauchwasser Zieltemperatur:  {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''temperature_hot_water_target'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Prüfe, ob die Wärmepumpe mindestens 56 Grad erreicht hat
  - repeat:
      while:
      - condition: and
        conditions:
        - condition: numeric_state
          entity_id: sensor.luxtronik25_tbw
          below: 60
        - condition: not
          conditions:
          - condition: state
            entity_id: schedule.luxtronik_zeitplan_tdi_haus_25
            state: 'on'
            for:
              hours: 6
              minutes: 45
              seconds: 0
      sequence:
      - delay:
          hours: 0
          minutes: 5
          seconds: 0
          milliseconds: 0
    alias: Wiederhole, bis die Brauchwasser Temperatur 60 Grad erreicht hat (maximal
      bis TDI Start +6h45')
  - if:
    - condition: state
      entity_id: input_boolean.luxtronik_heizphase_haus_25
      state: 'on'
    then:
    - service: input_select.select_option
      data:
        option: '{{ states(''input_select.luxtronik_operation_mode_automatik'')|int
          }}'
      target:
        entity_id: input_select.luxtronik_25_hz_operation_mode
    alias: Heizung einschalten, sofern wir in der Heizphase sind
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - if:
    - condition: numeric_state
      entity_id: sensor.luxtronik25_tbw
      above: 59.5
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Info Rotseepark - TDI Haus 25 abgeschlossen
        message: 'Temperatur Brauchwasser:  {{states(''sensor.luxtronik25_tbw'')}}

          Brauchwasser Zieltemperatur:  {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''temperature_hot_water_target'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    else:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - TDI Haus 25 FEHLGESCHLAGEN
        message: 'Temperatur Brauchwasser:  {{states(''sensor.luxtronik25_tbw'')}}

          Brauchwasser Zieltemperatur:  {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''temperature_hot_water_target'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Sende eine Benachrichtigung über den Erfolg oder Misserfolg der TDI
  mode: single
- id: '1676443093982'
  alias: Schalte TDI - Starte TDI Haus 19 (Zeitplan TDI + 15 min)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - schedule.luxtronik_zeitplan_tdi_haus_19
    from: 'off'
    to: 'on'
    for:
      hours: 0
      minutes: 5
      seconds: 0
  condition: []
  action:
  - service: input_number.set_value
    data:
      value: '{{states(''input_number.luxtronik_ww_tdi_temperatur'')|int}}'
    target:
      entity_id: input_number.luxtronik_19_ww_solltemperatur
    alias: Setzte Luxtronik Solltemperatur zu TDI Temperatur
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - if:
    - condition: state
      entity_id: binary_sensor.luxtronik19_bup_out
      state: 'off'
    then:
    - service: input_number.set_value
      data:
        value: '{{ (states(''sensor.luxtronik19_tbw_soll'')|int - states(''sensor.luxtronik19_tbw'')|int
          - 1 )|int }}'
      target:
        entity_id: input_number.luxtronik_19_ww_hysterese
    - delay:
        hours: 0
        minutes: 5
        seconds: 0
        milliseconds: 0
    - service: input_number.set_value
      data:
        value: '{{ states(''input_number.luxtronik_ww_normalhysterese'')|int }}'
      target:
        entity_id: input_number.luxtronik_19_ww_hysterese
    alias: Hysterese schalten, falls WP nicht anspringt
  - if:
    - condition: state
      entity_id: input_boolean.luxtronik_heizphase_haus_19
      state: 'on'
    then:
    - service: input_select.select_option
      data:
        option: '{{ states(''input_select.luxtronik_operation_mode_aus'')|int }}'
      target:
        entity_id: input_select.luxtronik_19_hz_operation_mode
    - delay:
        hours: 0
        minutes: 5
        seconds: 0
        milliseconds: 0
    alias: Heizung ausschalten, sofern wir in der Heizphase sind
  - service: shell_command.luxtronik19_to_ha
    data: {}
    response_variable: scriptanswer
  - if:
    - condition: template
      value_template: '{{ scriptanswer[''stdout''] | regex_search(''Return:0-0-0-0-[0-9]*'')
        }}'
    then:
    - service: notify.administrator_rotseepark
      data:
        message: '{{scriptanswer[''stdout'']}}'
        title: HA-Info Heatpump 19 - Dateien gesichert mit {{ (scriptanswer['stdout']
          | regex_findall('Return:[0]-[0]-[0]-[0]-[0-9]*'))[0] }}
    else:
    - service: notify.administrator_rotseepark
      data:
        message: '{{scriptanswer[''stdout'']}}'
        title: HA-Alert Heatpump 19 - Dateien sichern FEHLGESCHLAGEN mit {{ (scriptanswer['stdout']
          | regex_findall('Return:[0-9]*-[0-9]*-[0-9]*-[0-9]*-[0-9]*'))[0] }}
  mode: single
- id: '1676445765532'
  alias: Schalte TDI - Starte TDI Haus 21 (Zeitplan TDI + 15 min)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - schedule.luxtronik_zeitplan_tdi_haus_21
    from: 'off'
    to: 'on'
    for:
      hours: 0
      minutes: 5
      seconds: 0
  condition: []
  action:
  - service: input_number.set_value
    data:
      value: '{{states(''input_number.luxtronik_ww_tdi_temperatur'')|int}}'
    target:
      entity_id: input_number.luxtronik_21_ww_solltemperatur
    alias: Setzte Luxtronik Solltemperatur zu TDI Temperatur
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - if:
    - condition: state
      entity_id: binary_sensor.luxtronik21_bup_out
      state: 'off'
    then:
    - service: input_number.set_value
      data:
        value: '{{ (states(''sensor.luxtronik21_tbw_soll'')|int - states(''sensor.luxtronik21_tbw'')|int
          - 1 )|int }}'
      target:
        entity_id: input_number.luxtronik_21_ww_hysterese
    - delay:
        hours: 0
        minutes: 5
        seconds: 0
        milliseconds: 0
    - service: input_number.set_value
      data:
        value: '{{ states(''input_number.luxtronik_ww_normalhysterese'')|int }}'
      target:
        entity_id: input_number.luxtronik_21_ww_hysterese
    alias: Hysterese schalten, falls WP nicht anspringt
  - if:
    - condition: state
      entity_id: input_boolean.luxtronik_heizphase_haus_21
      state: 'on'
    then:
    - service: input_select.select_option
      data:
        option: '{{ states(''input_select.luxtronik_operation_mode_aus'')|int }}'
      target:
        entity_id: input_select.luxtronik_21_hz_operation_mode
    - delay:
        hours: 0
        minutes: 5
        seconds: 0
        milliseconds: 0
    alias: Heizung ausschalten, sofern wir in der Heizphase sind
  - service: shell_command.luxtronik21_to_ha
    data: {}
    response_variable: scriptanswer
  - if:
    - condition: template
      value_template: '{{ scriptanswer[''stdout''] | regex_search(''Return:0-0-0-0-[0-9]*'')
        }}'
    then:
    - service: notify.administrator_rotseepark
      data:
        message: '{{scriptanswer[''stdout'']}}'
        title: HA-Info Heatpump 21 - Dateien gesichert mit {{ (scriptanswer['stdout']
          | regex_findall('Return:[0]-[0]-[0]-[0]-[0-9]*'))[0] }}
    else:
    - service: notify.administrator_rotseepark
      data:
        message: '{{scriptanswer[''stdout'']}}'
        title: HA-Alert Heatpump 21 - Dateien sichern FEHLGESCHLAGEN mit {{ (scriptanswer['stdout']
          | regex_findall('Return:[0-9]*-[0-9]*-[0-9]*-[0-9]*-[0-9]*'))[0] }}
  mode: single
- id: '1676445795620'
  alias: Schalte TDI - Starte TDI Haus 23 (Zeitplan TDI + 15 min)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - schedule.luxtronik_zeitplan_tdi_haus_23
    from: 'off'
    to: 'on'
    for:
      hours: 0
      minutes: 5
      seconds: 0
  condition: []
  action:
  - service: input_number.set_value
    data:
      value: '{{states(''input_number.luxtronik_ww_tdi_temperatur'')|int}}'
    target:
      entity_id: input_number.luxtronik_23_ww_solltemperatur
    alias: Setzte Luxtronik Solltemperatur zu TDI Temperatur
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - if:
    - condition: state
      entity_id: binary_sensor.luxtronik23_bup_out
      state: 'off'
    then:
    - service: input_number.set_value
      data:
        value: '{{ (states(''sensor.luxtronik23_tbw_soll'')|int - states(''sensor.luxtronik23_tbw'')|int
          - 1 )|int }}'
      target:
        entity_id: input_number.luxtronik_23_ww_hysterese
    - delay:
        hours: 0
        minutes: 5
        seconds: 0
        milliseconds: 0
    - service: input_number.set_value
      data:
        value: '{{ states(''input_number.luxtronik_ww_normalhysterese'')|int }}'
      target:
        entity_id: input_number.luxtronik_23_ww_hysterese
    alias: Hysterese schalten, falls WP nicht anspringt
  - if:
    - condition: state
      entity_id: input_boolean.luxtronik_heizphase_haus_23
      state: 'on'
    then:
    - service: input_select.select_option
      data:
        option: '{{ states(''input_select.luxtronik_operation_mode_aus'')|int }}'
      target:
        entity_id: input_select.luxtronik_23_hz_operation_mode
    - delay:
        hours: 0
        minutes: 5
        seconds: 0
        milliseconds: 0
    alias: Heizung ausschalten, sofern wir in der Heizphase sind
  - service: shell_command.luxtronik23_to_ha
    data: {}
    response_variable: scriptanswer
  - if:
    - condition: template
      value_template: '{{ scriptanswer[''stdout''] | regex_search(''Return:0-0-0-0-[0-9]*'')
        }}'
    then:
    - service: notify.administrator_rotseepark
      data:
        message: '{{scriptanswer[''stdout'']}}'
        title: HA-Info Heatpump 23 - Dateien gesichert mit {{ (scriptanswer['stdout']
          | regex_findall('Return:[0]-[0]-[0]-[0]-[0-9]*'))[0] }}
    else:
    - service: notify.administrator_rotseepark
      data:
        message: '{{scriptanswer[''stdout'']}}'
        title: HA-Alert Heatpump 23 - Dateien sichern FEHLGESCHLAGEN mit {{ (scriptanswer['stdout']
          | regex_findall('Return:[0-9]*-[0-9]*-[0-9]*-[0-9]*-[0-9]*'))[0] }}
  mode: single
- id: '1676445824173'
  alias: Schalte TDI - Starte TDI Haus 25 (Zeitplan TDI + 15 min)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - schedule.luxtronik_zeitplan_tdi_haus_25
    from: 'off'
    to: 'on'
    for:
      hours: 0
      minutes: 5
      seconds: 0
  condition: []
  action:
  - service: input_number.set_value
    data:
      value: '{{states(''input_number.luxtronik_ww_tdi_temperatur'')|int}}'
    target:
      entity_id: input_number.luxtronik_25_ww_solltemperatur
    alias: Setzte Luxtronik Solltemperatur zu TDI Temperatur
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - if:
    - condition: state
      entity_id: binary_sensor.luxtronik25_bup_out
      state: 'off'
    then:
    - service: input_number.set_value
      data:
        value: '{{ (states(''sensor.luxtronik25_tbw_soll'')|int - states(''sensor.luxtronik25_tbw'')|int
          - 1 )|int }}'
      target:
        entity_id: input_number.luxtronik_25_ww_hysterese
    - delay:
        hours: 0
        minutes: 5
        seconds: 0
        milliseconds: 0
    - service: input_number.set_value
      data:
        value: '{{ states(''input_number.luxtronik_ww_normalhysterese'')|int }}'
      target:
        entity_id: input_number.luxtronik_25_ww_hysterese
    alias: Hysterese schalten, falls WP nicht anspringt
  - if:
    - condition: state
      entity_id: input_boolean.luxtronik_heizphase_haus_25
      state: 'on'
    then:
    - service: input_select.select_option
      data:
        option: '{{ states(''input_select.luxtronik_operation_mode_aus'')|int }}'
      target:
        entity_id: input_select.luxtronik_25_hz_operation_mode
    - delay:
        hours: 0
        minutes: 5
        seconds: 0
        milliseconds: 0
    alias: Heizung ausschalten, sofern wir in der Heizphase sind
  - service: shell_command.luxtronik25_to_ha
    data: {}
    response_variable: scriptanswer
  - if:
    - condition: template
      value_template: '{{ scriptanswer[''stdout''] | regex_search(''Return:0-0-0-0-[0-9]*'')
        }}'
    then:
    - service: notify.administrator_rotseepark
      data:
        message: '{{scriptanswer[''stdout'']}}'
        title: HA-Info Heatpump 25 - Dateien gesichert mit {{ (scriptanswer['stdout']
          | regex_findall('Return:[0]-[0]-[0]-[0]-[0-9]*'))[0] }}
    else:
    - service: notify.administrator_rotseepark
      data:
        message: '{{scriptanswer[''stdout'']}}'
        title: HA-Alert Heatpump 25 - Dateien sichern FEHLGESCHLAGEN mit {{ (scriptanswer['stdout']
          | regex_findall('Return:[0-9]*-[0-9]*-[0-9]*-[0-9]*-[0-9]*'))[0] }}
  mode: single
- id: '1676530127632'
  alias: Schalte WW - Prüfe alle 10 Minuten und produziere WW im Haus mit der tiefsten
    Temperatur (Sonnenmodus)
  description: ''
  trigger:
  - platform: time_pattern
    hours: '8'
    minutes: /10
    alias: Time Pattern Trigger 8 Uhr alle 10 Minuten
  - platform: time_pattern
    hours: '9'
    minutes: /10
    alias: Time Pattern Trigger 9 Uhr alle 10 Minuten
  - platform: time_pattern
    hours: '10'
    minutes: /10
    alias: Time Pattern Trigger 10 Uhr alle 10 Minuten
  - platform: time_pattern
    hours: '11'
    minutes: /10
    alias: Time Pattern Trigger 11 Uhr alle 10 Minuten
  - platform: time_pattern
    hours: '12'
    minutes: /10
    alias: Time Pattern Trigger 12 Uhr alle 10 Minuten
  - platform: time_pattern
    hours: '13'
    minutes: /10
    alias: Time Pattern Trigger 13 Uhr alle 10 Minuten
  - platform: time_pattern
    hours: '14'
    minutes: /10
    alias: Time Pattern Trigger 14 Uhr alle 10 Minuten
  - platform: time_pattern
    hours: '15'
    minutes: /10
    alias: Time Pattern Trigger 15 Uhr alle 10 Minuten
  - platform: time_pattern
    hours: '16'
    minutes: /10
    alias: Time Pattern Trigger 16 Uhr alle 10 Minuten
  - platform: time_pattern
    hours: '17'
    minutes: /10
    alias: Time Pattern Trigger 17 Uhr alle 10 Minuten
  - platform: time_pattern
    hours: '18'
    minutes: /10
    alias: Time Pattern Trigger 18 Uhr alle 10 Minuten
  condition:
  - condition: sun
    before: sunset
    before_offset: -02:00:00
    after: sunrise
    after_offset: 02:00:00
    alias: Nur wenn die Sonne schon 2 Stunden oben ist und noch mindestens 2 Stunden
      scheint
  - condition: numeric_state
    entity_id: sensor.janitza_umg604_power
    below: -15000
    alias: Nur wenn wir jetzt gerade eine Überproduktion von 15 kWh haben
  - condition: numeric_state
    entity_id: sensor.forecast_solar_production_next_hour
    above: 25
    alias: Nur wenn der Produktion Forecast für die nächste Stunde mindestens 25 kWh
      ist (etwa 15-20 kWh benötigen die Häuser)
    enabled: true
  - condition: or
    conditions:
    - condition: state
      entity_id: weather.forecast_ha_rotseepark
      state: sunny
    - condition: state
      entity_id: weather.forecast_ha_rotseepark
      state: partlycloudy
    - condition: state
      entity_id: weather.ha_rotseepark
      state: sunny
    - condition: state
      entity_id: weather.ha_rotseepark
      state: partlycloudy
    alias: Nur wenn der Wetter Forecast für heute entweder sonnig oder teilweise bewölkt
      ist
    enabled: false
  - condition: time
    weekday:
    - mon
    - tue
    - wed
    - thu
    - fri
    - sat
    alias: Montag bis Samstag
  action:
  - choose:
    - conditions:
      - condition: and
        conditions:
        - condition: state
          entity_id: binary_sensor.luxtronik19_bup_out
          state: 'off'
          for:
            hours: 0
            minutes: 30
            seconds: 0
          alias: Prüfen, ob BPU von Haus 19 seit mindestens 30 Minuten nicht läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik19_tbw'') < states(''sensor.luxtronik21_tbw'')
            or states(''binary_sensor.luxtronik21_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 19 Boiler kälter als Haus 21 oder der Boiler 21 nicht
            schon läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik19_tbw'') < states(''sensor.luxtronik23_tbw'')
            or states(''binary_sensor.luxtronik23_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 19 Boiler kälter als Haus 23 oder der Boiler 23 nicht
            schon läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik19_tbw'') < states(''sensor.luxtronik25_tbw'')
            or states(''binary_sensor.luxtronik25_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 19 Boiler kälter als Haus 25 oder der Boiler 25 nicht
            schon läuft
        - condition: or
          conditions:
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik19_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.6 ))|int
              \n and now().hour >= 13 and now().hour <= 17)\n else false\n}}"
            alias: TBW tiefer als der 40% Hysterese Schwellwert von 13:00 bis 17:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik19_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.7 ))|int
              \n and now().hour >= 11 and now().hour <= 17)\n else false\n}}"
            alias: TBW tiefer als der 30% Hysterese Schwellwert von 11:00 bis 17:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik19_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.8 ))|int
              \n and now().hour >= 9 and now().hour <= 17) \n else false\n}}"
            alias: TBW tiefer als der 20% Hysterese Schwellwert von 09:00 bis 17:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik19_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.9 ))|int
              \n and now().hour >= 7 and now().hour <= 17)\n else false\n}}"
            alias: TBW tiefer als der 10% Hysterese Schwellwert von 07:00 bis 17:00
          alias: TBW - Hysterese Schwellwerte prüfen (Zeit)
        alias: Vergleiche Haus 19 gegen die anderen Häuser
      sequence:
      - service: notify.administrator_rotseepark
        data:
          title: HA-Info Rotseepark - WW Überschuss Prüfung erfolgreich -> Haus 19
            gewält
          message: 'BWT aktuell: {{states(''sensor.luxtronik19_tbw'')}}

            '
      - service: input_number.set_value
        data:
          value: '{{ (states(''sensor.luxtronik19_tbw_soll'')|int - states(''sensor.luxtronik19_tbw'')|int
            - 1 )|int }}'
        target:
          entity_id: input_number.luxtronik_19_ww_hysterese
      - delay:
          hours: 0
          minutes: 8
          seconds: 0
          milliseconds: 0
      - service: input_number.set_value
        data:
          value: '{{ states(''input_number.luxtronik_ww_normalhysterese'')|int }}'
        target:
          entity_id: input_number.luxtronik_19_ww_hysterese
    - conditions:
      - condition: and
        conditions:
        - condition: state
          entity_id: binary_sensor.luxtronik21_bup_out
          state: 'off'
          for:
            hours: 0
            minutes: 30
            seconds: 0
          alias: Prüfen, ob BPU von Haus 21 seit mindestens 30 Minuten nicht läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik21_tbw'') < states(''sensor.luxtronik19_tbw'')
            or states(''binary_sensor.luxtronik19_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 21 Boiler kälter als Haus 19 oder der Boiler 19 nicht
            schon läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik21_tbw'') < states(''sensor.luxtronik23_tbw'')
            or states(''binary_sensor.luxtronik23_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 21 Boiler kälter als Haus 23 oder der Boiler 23 nicht
            schon läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik21_tbw'') < states(''sensor.luxtronik25_tbw'')
            or states(''binary_sensor.luxtronik25_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 21 Boiler kälter als Haus 25 oder der Boiler 25 nicht
            schon läuft
        - condition: or
          conditions:
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik21_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.6 ))|int
              \n and now().hour >= 13 and now().hour <= 17)\n else false\n}}"
            alias: TBW tiefer als der 40% Hysterese Schwellwert von 13:00 bis 17:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik21_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.7 ))|int
              \n and now().hour >= 11 and now().hour <= 17)\n else false\n}}"
            alias: TBW tiefer als der 30% Hysterese Schwellwert von 11:00 bis 17:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik21_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.8 ))|int
              \n and now().hour >= 9 and now().hour <= 17) \n else false\n}}"
            alias: TBW tiefer als der 20% Hysterese Schwellwert von 09:00 bis 17:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik21_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.9 ))|int
              \n and now().hour >= 7 and now().hour <= 17)\n else false\n}}"
            alias: TBW tiefer als der 10% Hysterese Schwellwert von 07:00 bis 17:00
          alias: TBW - Hysterese Schwellwerte prüfen (Zeit)
        alias: Vergleiche Haus 21 gegen die anderen Häuser
      sequence:
      - service: notify.administrator_rotseepark
        data:
          title: HA-Info Rotseepark - WW Überschuss Prüfung erfolgreich -> Haus 21
            gewält
          message: 'BWT aktuell: {{states(''sensor.luxtronik21_tbw'')}}

            '
      - service: input_number.set_value
        data:
          value: '{{ (states(''sensor.luxtronik21_tbw_soll'')|int - states(''sensor.luxtronik21_tbw'')|int
            - 1 )|int }}'
        target:
          entity_id: input_number.luxtronik_21_ww_hysterese
      - delay:
          hours: 0
          minutes: 8
          seconds: 0
          milliseconds: 0
      - service: input_number.set_value
        data:
          value: '{{ states(''input_number.luxtronik_ww_normalhysterese'')|int }}'
        target:
          entity_id: input_number.luxtronik_21_ww_hysterese
    - conditions:
      - condition: and
        conditions:
        - condition: state
          entity_id: binary_sensor.luxtronik23_bup_out
          state: 'off'
          for:
            hours: 0
            minutes: 30
            seconds: 0
          alias: Prüfen, ob BPU von Haus 23 seit mindestens 30 Minuten nicht läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik23_tbw'') < states(''sensor.luxtronik19_tbw'')
            or states(''binary_sensor.luxtronik19_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 23 Boiler kälter als Haus 19 oder der Boiler 19 nicht
            schon läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik23_tbw'') < states(''sensor.luxtronik21_tbw'')
            or states(''binary_sensor.luxtronik21_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 23 Boiler kälter als Haus 21 oder der Boiler 21 nicht
            schon läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik23_tbw'') < states(''sensor.luxtronik25_tbw'')
            or states(''binary_sensor.luxtronik25_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 23 Boiler kälter als Haus 25 oder der Boiler 25 nicht
            schon läuft
        - condition: or
          conditions:
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik23_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.6 ))|int
              \n and now().hour >= 13 and now().hour <= 17)\n else false\n}}"
            alias: TBW tiefer als der 40% Hysterese Schwellwert von 13:00 bis 17:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik23_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.7 ))|int
              \n and now().hour >= 11 and now().hour <= 17)\n else false\n}}"
            alias: TBW tiefer als der 30% Hysterese Schwellwert von 11:00 bis 17:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik23_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.8 ))|int
              \n and now().hour >= 9 and now().hour <= 17) \n else false\n}}"
            alias: TBW tiefer als der 20% Hysterese Schwellwert von 09:00 bis 17:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik23_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.9 ))|int
              \n and now().hour >= 7 and now().hour <= 17)\n else false\n}}"
            alias: TBW tiefer als der 10% Hysterese Schwellwert von 07:00 bis 17:00
          alias: TBW - Hysterese Schwellwerte prüfen (Zeit)
        alias: Vergleiche Haus 23 gegen die anderen Häuser
      sequence:
      - service: notify.administrator_rotseepark
        data:
          title: HA-Info Rotseepark - WW Überschuss Prüfung erfolgreich -> Haus 23
            gewält
          message: 'BWT aktuell: {{states(''sensor.luxtronik23_tbw'')}}

            '
      - service: input_number.set_value
        data:
          value: '{{ (states(''sensor.luxtronik23_tbw_soll'')|int - states(''sensor.luxtronik23_tbw'')|int
            - 1 )|int }}'
        target:
          entity_id: input_number.luxtronik_23_ww_hysterese
      - delay:
          hours: 0
          minutes: 8
          seconds: 0
          milliseconds: 0
      - service: input_number.set_value
        data:
          value: '{{ states(''input_number.luxtronik_ww_normalhysterese'')|int }}'
        target:
          entity_id: input_number.luxtronik_23_ww_hysterese
    - conditions:
      - condition: and
        conditions:
        - condition: state
          entity_id: binary_sensor.luxtronik25_bup_out
          state: 'off'
          for:
            hours: 0
            minutes: 30
            seconds: 0
          alias: Prüfen, ob BPU von Haus 25 seit mindestens 30 Minuten nicht läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik25_tbw'') < states(''sensor.luxtronik19_tbw'')
            or states(''binary_sensor.luxtronik19_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 25 Boiler kälter als Haus 19 oder der Boiler 19 nicht
            schon läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik25_tbw'') < states(''sensor.luxtronik21_tbw'')
            or states(''binary_sensor.luxtronik21_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 25 Boiler kälter als Haus 21 oder der Boiler 21 nicht
            schon läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik25_tbw'') < states(''sensor.luxtronik23_tbw'')
            or states(''binary_sensor.luxtronik23_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 25 Boiler kälter als Haus 23 oder der Boiler 23 nicht
            schon läuft
        - condition: or
          conditions:
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik25_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.6 ))|int
              \n and now().hour >= 13 and now().hour <= 17)\n else false\n}}"
            alias: TBW tiefer als der 40% Hysterese Schwellwert von 13:00 bis 17:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik25_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.7 ))|int
              \n and now().hour >= 11 and now().hour <= 17)\n else false\n}}"
            alias: TBW tiefer als der 30% Hysterese Schwellwert von 11:00 bis 17:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik25_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.8 ))|int
              \n and now().hour >= 9 and now().hour <= 17) \n else false\n}}"
            alias: TBW tiefer als der 20% Hysterese Schwellwert von 09:00 bis 17:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik25_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.9 ))|int
              \n and now().hour >= 7 and now().hour <= 17)\n else false\n}}"
            alias: TBW tiefer als der 10% Hysterese Schwellwert von 07:00 bis 17:00
          alias: TBW - Hysterese Schwellwerte prüfen (Zeit)
        alias: Vergleiche Haus 25 gegen die anderen Häuser
      sequence:
      - service: notify.administrator_rotseepark
        data:
          title: HA-Info Rotseepark - WW Überschuss Prüfung erfolgreich -> Haus 25
            gewält
          message: 'BWT aktuell: {{states(''sensor.luxtronik25_tbw'')}}

            '
      - service: input_number.set_value
        data:
          value: '{{ (states(''sensor.luxtronik25_tbw_soll'')|int - states(''sensor.luxtronik25_tbw'')|int
            - 1 )|int }}'
        target:
          entity_id: input_number.luxtronik_25_ww_hysterese
      - delay:
          hours: 0
          minutes: 8
          seconds: 0
          milliseconds: 0
      - service: input_number.set_value
        data:
          value: '{{ states(''input_number.luxtronik_ww_normalhysterese'')|int }}'
        target:
          entity_id: input_number.luxtronik_25_ww_hysterese
    alias: Prüfen welches Haus das tiefste Brauchwasser hat und geladen werden soll
  trace:
    stored_traces: 72
  mode: parallel
  max: 4
- id: '1676725274240'
  alias: Ewl Tarifanpassung Tag-Nacht
  description: ''
  trigger:
  - platform: state
    entity_id:
    - schedule.ewl_zeitplan_nachttarif
  - platform: numeric_state
    entity_id: sensor.energy_statistic_janitza_umg604_w
    for:
      hours: 0
      minutes: 1
      seconds: 0
    below: 0
  - platform: numeric_state
    entity_id: sensor.energy_statistic_janitza_umg604_w
    for:
      hours: 0
      minutes: 1
      seconds: 0
    above: 0
  condition: []
  action:
  - if:
    - condition: state
      entity_id: schedule.ewl_zeitplan_nachttarif
      state: 'on'
    then:
    - service: input_number.set_value
      data:
        value: '{{ states(''input_number.ewl_mixstrom_nachttarif'') }}'
      target:
        entity_id: input_number.ewl_mixstrom_aktueller_tarif
    else:
    - if:
      - condition: numeric_state
        entity_id: sensor.energy_statistic_janitza_umg604_w
        above: 0
      then:
      - service: input_number.set_value
        data:
          value: '{{ (states(''input_number.ewl_mixstrom_tagestarif'')|float - 0.002)
            }}'
        target:
          entity_id: input_number.ewl_mixstrom_aktueller_tarif
      else:
      - service: input_number.set_value
        data:
          value: '{{ states(''input_number.ewl_mixstrom_tagestarif'') }}'
        target:
          entity_id: input_number.ewl_mixstrom_aktueller_tarif
  mode: single
- id: '1676726511062'
  alias: Ewl Tarifanpassung Einspeisung-Überschuss
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sensor.energy_statistic_janitza_umg604_w
    for:
      hours: 0
      minutes: 1
      seconds: 0
    below: 0
  - platform: numeric_state
    entity_id: sensor.energy_statistic_janitza_umg604_w
    for:
      hours: 0
      minutes: 1
      seconds: 0
    above: 0
  condition: []
  action:
  - if:
    - condition: numeric_state
      entity_id: sensor.energy_statistic_janitza_umg604_w
      above: 0
    then:
    - service: input_number.set_value
      data:
        value: '{{ states(''input_number.ewl_einspeisung_eigenverbrauch'') }}'
      target:
        entity_id: input_number.ewl_einspeisung_aktueller_tarif
    else:
    - service: input_number.set_value
      data:
        value: '{{ states(''input_number.ewl_einspeisung_uberschuss'') }}'
      target:
        entity_id: input_number.ewl_einspeisung_aktueller_tarif
  mode: single
- id: '1679238994023'
  alias: Zähle VDn - Kompressor Start Haus 19 Inkrementieren
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.luxtronik19_vd1
    from: 'off'
    to: 'on'
    for:
      hours: 0
      minutes: 1
      seconds: 0
  - platform: state
    entity_id:
    - binary_sensor.luxtronik19_vd2
    from: 'off'
    to: 'on'
    for:
      hours: 0
      minutes: 1
      seconds: 0
  condition: []
  action:
  - service: counter.increment
    data: {}
    target:
      entity_id: counter.heatpump_19_kompressor_start
  - service: input_number.set_value
    data:
      value: '{{ ((states(''counter.heatpump_19_kompressor_start'')|float) / ((((now().timestamp()
        - state_attr(''input_datetime.heatpump_kompressor_start'', ''timestamp''))
        / 24 / 60 / 60 ))))|round(1) }}'
    target:
      entity_id: input_number.heatpump_19_kompressor_start_pro_tag
  mode: single
- id: '1679239065986'
  alias: Zähle VDn - Kompressor Start Haus 21 Inkrementieren
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.luxtronik21_vd1
    from: 'off'
    to: 'on'
    for:
      hours: 0
      minutes: 1
      seconds: 0
  - platform: state
    entity_id:
    - binary_sensor.luxtronik21_vd2
    from: 'off'
    to: 'on'
    for:
      hours: 0
      minutes: 1
      seconds: 0
  condition: []
  action:
  - service: counter.increment
    data: {}
    target:
      entity_id: counter.heatpump_21_kompressor_start
  - service: input_number.set_value
    data:
      value: '{{ ((states(''counter.heatpump_21_kompressor_start'')|float) / ((((now().timestamp()
        - state_attr(''input_datetime.heatpump_kompressor_start'', ''timestamp''))
        / 24 / 60 / 60 ))))|round(1) }}'
    target:
      entity_id: input_number.heatpump_21_kompressor_start_pro_tag
  mode: single
- id: '1679239095586'
  alias: Zähle VDn - Kompressor Start Haus 23 Inkrementieren
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.luxtronik23_vd1
    from: 'off'
    to: 'on'
    for:
      hours: 0
      minutes: 1
      seconds: 0
  - platform: state
    entity_id:
    - binary_sensor.luxtronik23_vd2
    from: 'off'
    to: 'on'
    for:
      hours: 0
      minutes: 1
      seconds: 0
  condition: []
  action:
  - service: counter.increment
    data: {}
    target:
      entity_id: counter.heatpump_23_kompressor_start
  - service: input_number.set_value
    data:
      value: '{{ ((states(''counter.heatpump_23_kompressor_start'')|float) / ((((now().timestamp()
        - state_attr(''input_datetime.heatpump_kompressor_start'', ''timestamp''))
        / 24 / 60 / 60 ))))|round(1) }}'
    target:
      entity_id: input_number.heatpump_23_kompressor_start_pro_tag
  mode: single
- id: '1679239122755'
  alias: Zähle VDn - Kompressor Start Haus 25 Inkrementieren
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.luxtronik25_vd1
    from: 'off'
    to: 'on'
    for:
      hours: 0
      minutes: 1
      seconds: 0
  - platform: state
    entity_id:
    - binary_sensor.luxtronik25_vd2
    from: 'off'
    to: 'on'
    for:
      hours: 0
      minutes: 1
      seconds: 0
  condition: []
  action:
  - service: counter.increment
    data: {}
    target:
      entity_id: counter.heatpump_25_kompressor_start
  - service: input_number.set_value
    data:
      value: '{{ ((states(''counter.heatpump_25_kompressor_start'')|float) / ((((now().timestamp()
        - state_attr(''input_datetime.heatpump_kompressor_start'', ''timestamp''))
        / 24 / 60 / 60 ))))|round(1) }}'
    target:
      entity_id: input_number.heatpump_25_kompressor_start_pro_tag
  mode: single
- id: '1679809102622'
  alias: Monitoring Zaptec Charger Is Online Check
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.zpr055424_is_online
    - binary_sensor.zpr111423_is_online
    - binary_sensor.zpr118007_is_online
    - binary_sensor.zpr124763_is_online
    - binary_sensor.zpr211132_is_online
    - binary_sensor.zpg003786_is_online
    to: 'off'
    for:
      hours: 0
      minutes: 10
      seconds: 0
    from: 'on'
  condition: []
  action:
  - service: notify.administrator_rotseepark
    data:
      title: 'HA-Alert Einstellhalle: Zaptec Station nicht Online'
      message: "zpr055424 - {{ states('binary_sensor.zpr055424_is_online') }}  \nzpr111423
        - {{ states('binary_sensor.zpr111423_is_online') }}  \nzpr118007 - {{ states('binary_sensor.zpr118007_is_online')
        }}  \nzpr124763 - {{ states('binary_sensor.zpr124763_is_online') }}  \nzpr211132
        - {{ states('binary_sensor.zpr211132_is_online') }} \nzpg003786 - {{ states('binary_sensor.zpg003786_is_online')
        }} "
  mode: single
- id: '1683262738390'
  alias: Zähle VDn - Kompressor Start Cycle
  description: ''
  trigger:
  - platform: state
    entity_id:
    - schedule.heatpump_kompressor_start_cycle
    from: 'off'
    to: 'on'
  condition: []
  action:
  - if:
    - condition: time
      weekday:
      - thu
    then:
    - service: counter.set_value
      data:
        value: '{{ states(''counter.heatpump_19_kompressor_start'')|int - states(''counter.heatpump_19_kompressor_start_cycle'')|int
          }}'
      target:
        entity_id: counter.heatpump_19_kompressor_start
    - service: counter.set_value
      data:
        value: '{{ states(''counter.heatpump_21_kompressor_start'')|int - states(''counter.heatpump_21_kompressor_start_cycle'')|int
          }}'
      target:
        entity_id: counter.heatpump_21_kompressor_start
    - service: counter.set_value
      data:
        value: '{{ states(''counter.heatpump_23_kompressor_start'')|int - states(''counter.heatpump_23_kompressor_start_cycle'')|int
          }}'
      target:
        entity_id: counter.heatpump_23_kompressor_start
    - service: counter.set_value
      data:
        value: '{{ states(''counter.heatpump_25_kompressor_start'')|int - states(''counter.heatpump_25_kompressor_start_cycle'')|int
          }}'
      target:
        entity_id: counter.heatpump_25_kompressor_start
    - service: input_datetime.set_datetime
      target:
        entity_id: input_datetime.heatpump_kompressor_start
      data:
        datetime: '{{ states(''input_datetime.heatpump_kompressor_start_cycle'') }}'
    alias: Wenn es Donnerstag ist setzen wir den Cycle zurück, ansonsten speichern
      wir die aktuellen Cycle Werte
    else:
    - service: counter.set_value
      data:
        value: '{{ states(''counter.heatpump_19_kompressor_start'')|int }}'
      target:
        entity_id: counter.heatpump_19_kompressor_start_cycle
    - service: counter.set_value
      data:
        value: '{{ states(''counter.heatpump_21_kompressor_start'')|int }}'
      target:
        entity_id: counter.heatpump_21_kompressor_start_cycle
    - service: counter.set_value
      data:
        value: '{{ states(''counter.heatpump_23_kompressor_start'')|int }}'
      target:
        entity_id: counter.heatpump_23_kompressor_start_cycle
    - service: counter.set_value
      data:
        value: '{{ states(''counter.heatpump_25_kompressor_start'')|int }}'
      target:
        entity_id: counter.heatpump_25_kompressor_start_cycle
    - service: input_datetime.set_datetime
      target:
        entity_id: input_datetime.heatpump_kompressor_start_cycle
      data:
        datetime: '{{ now() }}'
  mode: single
- id: '1684650231339'
  alias: Schalte WW - Setze WW Hysterese Haus 19 (bei Änderung)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_number.luxtronik_19_ww_hysterese
  condition: []
  action:
  - repeat:
      while:
      - condition: and
        conditions:
        - condition: template
          alias: NOT Parameter Warmwasser Hysterese gesetzt
          value_template: '{{ (state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''hotWaterTemperatureHysteresis'']
            != states(''input_number.luxtronik_19_ww_hysterese'')|int) }}'
        - condition: template
          value_template: '{{ (repeat.index < 3) }}'
      sequence:
      - service: script.schalte_warmwasser_hysterese
        data:
          heatpump: 19
          value: '{{ states(''input_number.luxtronik_19_ww_hysterese'')|int }}'
      - delay:
          hours: 0
          minutes: 2
          seconds: 30
          milliseconds: 0
    alias: Wiederhole, bis Parameter Warmwasser Hysterese gesetzt werden konnte
  - if:
    - condition: template
      alias: NOT Parameter Warmwasser Hysterese gesetzt
      value_template: '{{ (state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''hotWaterTemperatureHysteresis'']
        != states(''input_number.luxtronik_19_ww_hysterese'')|int) }}'
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - WW Haus 19 Warmwasser Hysterese nicht gesetzt
        message: 'Warmwasser Hysterese Soll:  {{states(''input_number.luxtronik_19_ww_hysterese'')|int}}

          Warmwasser Hysterese Ist :  {{state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''hotWaterTemperatureHysteresis'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Sende eine Benachrichtigung, wenn die Warmwasser Hysterese nicht gesetzt
      werden konnte
  trace:
    stored_traces: 10
  mode: queued
  max: 10
- id: '1684651141241'
  alias: Schalte WW - Setze WW Hysterese Haus 21 (bei Änderung)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_number.luxtronik_21_ww_hysterese
  condition: []
  action:
  - repeat:
      while:
      - condition: and
        conditions:
        - condition: template
          alias: NOT Parameter Warmwasser Hysterese gesetzt
          value_template: '{{ (state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''hotWaterTemperatureHysteresis'']
            != states(''input_number.luxtronik_21_ww_hysterese'')|int) }}'
        - condition: template
          value_template: '{{ (repeat.index < 3) }}'
      sequence:
      - service: script.schalte_warmwasser_hysterese
        data:
          heatpump: 21
          value: '{{ states(''input_number.luxtronik_21_ww_hysterese'')|int }}'
      - delay:
          hours: 0
          minutes: 2
          seconds: 30
          milliseconds: 0
    alias: Wiederhole, bis Parameter Warmwasser Hysterese gesetzt werden konnte
  - if:
    - condition: template
      alias: NOT Parameter Warmwasser Hysterese gesetzt
      value_template: '{{ (state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''hotWaterTemperatureHysteresis'']
        != states(''input_number.luxtronik_21_ww_hysterese'')|int) }}'
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - WW Haus 21 Warmwasser Hysterese nicht gesetzt
        message: 'Warmwasser Hysterese Soll:  {{states(''input_number.luxtronik_21_ww_hysterese'')|int}}

          Warmwasser Hysterese Ist :  {{state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''hotWaterTemperatureHysteresis'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Sende eine Benachrichtigung, wenn die Warmwasser Hysterese nicht gesetzt
      werden konnte
  trace:
    stored_traces: 10
  mode: queued
  max: 10
- id: '1684651171235'
  alias: Schalte WW - Setze WW Hysterese Haus 23 (bei Änderung)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_number.luxtronik_23_ww_hysterese
  condition: []
  action:
  - repeat:
      while:
      - condition: and
        conditions:
        - condition: template
          alias: NOT Parameter Warmwasser Hysterese gesetzt
          value_template: '{{ (state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''hotWaterTemperatureHysteresis'']
            != states(''input_number.luxtronik_23_ww_hysterese'')|int) }}'
        - condition: template
          value_template: '{{ (repeat.index < 3) }}'
      sequence:
      - service: script.schalte_warmwasser_hysterese
        data:
          heatpump: 23
          value: '{{ states(''input_number.luxtronik_23_ww_hysterese'')|int }}'
      - delay:
          hours: 0
          minutes: 2
          seconds: 30
          milliseconds: 0
    alias: Wiederhole, bis Parameter Warmwasser Hysterese gesetzt werden konnte
  - if:
    - condition: template
      alias: NOT Parameter Warmwasser Hysterese gesetzt
      value_template: '{{ (state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''hotWaterTemperatureHysteresis'']
        != states(''input_number.luxtronik_23_ww_hysterese'')|int) }}'
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - WW Haus 23 Warmwasser Hysterese nicht gesetzt
        message: 'Warmwasser Hysterese Soll:  {{states(''input_number.luxtronik_23_ww_hysterese'')|int}}

          Warmwasser Hysterese Ist :  {{state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''hotWaterTemperatureHysteresis'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Sende eine Benachrichtigung, wenn die Warmwasser Hysterese nicht gesetzt
      werden konnte
  trace:
    stored_traces: 10
  mode: queued
  max: 10
- id: '1684651249797'
  alias: Schalte WW - Setze WW Hysterese Haus 25 (bei Änderung)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_number.luxtronik_25_ww_hysterese
  condition: []
  action:
  - repeat:
      while:
      - condition: and
        conditions:
        - condition: template
          alias: NOT Parameter Warmwasser Hysterese gesetzt
          value_template: '{{ (state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''hotWaterTemperatureHysteresis'']
            != states(''input_number.luxtronik_25_ww_hysterese'')|int) }}'
        - condition: template
          value_template: '{{ (repeat.index < 3) }}'
      sequence:
      - service: script.schalte_warmwasser_hysterese
        data:
          heatpump: 25
          value: '{{ states(''input_number.luxtronik_25_ww_hysterese'')|int }}'
      - delay:
          hours: 0
          minutes: 2
          seconds: 30
          milliseconds: 0
    alias: Wiederhole, bis Parameter Warmwasser Hysterese gesetzt werden konnte
  - if:
    - condition: template
      alias: NOT Parameter Warmwasser Hysterese gesetzt
      value_template: '{{ (state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''hotWaterTemperatureHysteresis'']
        != states(''input_number.luxtronik_25_ww_hysterese'')|int) }}'
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - WW Haus 25 Warmwasser Hysterese nicht gesetzt
        message: 'Warmwasser Hysterese Soll:  {{states(''input_number.luxtronik_25_ww_hysterese'')|int}}

          Warmwasser Hysterese Ist :  {{state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''hotWaterTemperatureHysteresis'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Sende eine Benachrichtigung, wenn die Warmwasser Hysterese nicht gesetzt
      werden konnte
  trace:
    stored_traces: 10
  mode: queued
  max: 10
- id: '1684651615000'
  alias: Schalte WW - Setze WW Solltemperatur Haus 19 (bei Änderung)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_number.luxtronik_19_ww_solltemperatur
  condition: []
  action:
  - repeat:
      while:
      - condition: and
        conditions:
        - condition: template
          alias: NOT Parameter Warmwasser Solltemperatur gesetzt
          value_template: '{{ (state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''warmwater_temperature'']
            != states(''input_number.luxtronik_19_ww_solltemperatur'')|int) }}'
        - condition: template
          value_template: '{{ (repeat.index < 5) }}'
      sequence:
      - service: script.schalte_warmwasser_zieltemperatur
        data:
          heatpump: 19
          value: '{{ states(''input_number.luxtronik_19_ww_solltemperatur'')|int }}'
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
      - service: homeassistant.update_entity
        data: {}
        target:
          entity_id: sensor.luxtronik_19_param_state
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
    alias: Wiederhole, bis Parameter Warmwasser Solltemperatur gesetzt werden konnte
  - if:
    - condition: template
      alias: NOT Parameter Warmwasser Solltemperatur gesetzt
      value_template: '{{ (state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''warmwater_temperature'']
        != states(''input_number.luxtronik_19_ww_solltemperatur'')|int) }}'
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - WW Haus 19 Warmwasser Solltemperatur nicht gesetzt
        message: 'Warmwasser Temperatur Soll:  {{states(''input_number.luxtronik_19_ww_solltemperatur'')|int}}

          Warmwasser Temperatur Ist :  {{state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''warmwater_temperature'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Sende eine Benachrichtigung, wenn die Warmwasser Solltemperatur nicht gesetzt
      werden konnte
  mode: single
- id: '1684651659209'
  alias: Schalte WW - Setze WW Solltemperatur Haus 21 (bei Änderung)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_number.luxtronik_21_ww_solltemperatur
  condition: []
  action:
  - repeat:
      while:
      - condition: and
        conditions:
        - condition: template
          alias: NOT Parameter Warmwasser Solltemperatur gesetzt
          value_template: '{{ (state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''warmwater_temperature'']
            != states(''input_number.luxtronik_21_ww_solltemperatur'')|int) }}'
        - condition: template
          value_template: '{{ (repeat.index < 5) }}'
      sequence:
      - service: script.schalte_warmwasser_zieltemperatur
        data:
          heatpump: 21
          value: '{{ states(''input_number.luxtronik_21_ww_solltemperatur'')|int }}'
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
      - service: homeassistant.update_entity
        data: {}
        target:
          entity_id: sensor.luxtronik_21_param_state
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
    alias: Wiederhole, bis Parameter Warmwasser Solltemperatur gesetzt werden konnte
  - if:
    - condition: template
      alias: NOT Parameter Warmwasser Solltemperatur gesetzt
      value_template: '{{ (state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''warmwater_temperature'']
        != states(''input_number.luxtronik_21_ww_solltemperatur'')|int) }}'
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - WW Haus 21 Warmwasser Solltemperatur nicht gesetzt
        message: 'Warmwasser Temperatur Soll:  {{states(''input_number.luxtronik_21_ww_solltemperatur'')|int}}

          Warmwasser Temperatur Ist :  {{state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''warmwater_temperature'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Sende eine Benachrichtigung, wenn die Warmwasser Solltemperatur nicht gesetzt
      werden konnte
  mode: single
- id: '1684651688114'
  alias: Schalte WW - Setze WW Solltemperatur Haus 23 (bei Änderung)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_number.luxtronik_23_ww_solltemperatur
  condition: []
  action:
  - repeat:
      while:
      - condition: and
        conditions:
        - condition: template
          alias: NOT Parameter Warmwasser Solltemperatur gesetzt
          value_template: '{{ (state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''warmwater_temperature'']
            != states(''input_number.luxtronik_23_ww_solltemperatur'')|int) }}'
        - condition: template
          value_template: '{{ (repeat.index < 5) }}'
      sequence:
      - service: script.schalte_warmwasser_zieltemperatur
        data:
          heatpump: 23
          value: '{{ states(''input_number.luxtronik_23_ww_solltemperatur'')|int }}'
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
      - service: homeassistant.update_entity
        data: {}
        target:
          entity_id: sensor.luxtronik_23_param_state
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
    alias: Wiederhole, bis Parameter Warmwasser Solltemperatur gesetzt werden konnte
  - if:
    - condition: template
      alias: NOT Parameter Warmwasser Solltemperatur gesetzt
      value_template: '{{ (state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''warmwater_temperature'']
        != states(''input_number.luxtronik_23_ww_solltemperatur'')|int) }}'
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - WW Haus 23 Warmwasser Solltemperatur nicht gesetzt
        message: 'Warmwasser Temperatur Soll:  {{states(''input_number.luxtronik_23_ww_solltemperatur'')|int}}

          Warmwasser Temperatur Ist :  {{state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''warmwater_temperature'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Sende eine Benachrichtigung, wenn die Warmwasser Solltemperatur nicht gesetzt
      werden konnte
  mode: single
- id: '1684651715001'
  alias: Schalte WW - Setze WW Solltemperatur Haus 25 (bei Änderung)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_number.luxtronik_25_ww_solltemperatur
  condition: []
  action:
  - repeat:
      while:
      - condition: and
        conditions:
        - condition: template
          alias: NOT Parameter Warmwasser Solltemperatur gesetzt
          value_template: '{{ (state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''warmwater_temperature'']
            != states(''input_number.luxtronik_25_ww_solltemperatur'')|int) }}'
        - condition: template
          value_template: '{{ (repeat.index < 5) }}'
      sequence:
      - service: script.schalte_warmwasser_zieltemperatur
        data:
          heatpump: 25
          value: '{{ states(''input_number.luxtronik_25_ww_solltemperatur'')|int }}'
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
      - service: homeassistant.update_entity
        data: {}
        target:
          entity_id: sensor.luxtronik_25_param_state
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
    alias: Wiederhole, bis Parameter Warmwasser Solltemperatur gesetzt werden konnte
  - if:
    - condition: template
      alias: NOT Parameter Warmwasser Solltemperatur gesetzt
      value_template: '{{ (state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''warmwater_temperature'']
        != states(''input_number.luxtronik_25_ww_solltemperatur'')|int) }}'
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - WW Haus 25 Warmwasser Solltemperatur nicht gesetzt
        message: 'Warmwasser Temperatur Soll:  {{states(''input_number.luxtronik_25_ww_solltemperatur'')|int}}

          Warmwasser Temperatur Ist :  {{state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''warmwater_temperature'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Sende eine Benachrichtigung, wenn die Warmwasser Solltemperatur nicht gesetzt
      werden konnte
  mode: single
- id: '1684689525143'
  alias: Schalte WW - Setze WW Solltemperatur Wunschwert Haus 19 (bei Änderung)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_number.luxtronik_19_ww_solltemperatur_wunschwert
  condition: []
  action:
  - repeat:
      while:
      - condition: and
        conditions:
        - condition: template
          alias: NOT Parameter Warmwasser Solltemperatur Wunschwert gesetzt
          value_template: '{{ (state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''temperature_hot_water_target'']
            != states(''input_number.luxtronik_19_ww_solltemperatur_wunschwert'')|int)
            }}'
        - condition: template
          value_template: '{{ (repeat.index < 5) }}'
      sequence:
      - service: script.schalte_warmwasser_zieltemperatur_wunschwert
        data:
          heatpump: 19
          value: '{{ states(''input_number.luxtronik_19_ww_solltemperatur_wunschwert'')|int
            }}'
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
      - service: homeassistant.update_entity
        data: {}
        target:
          entity_id: sensor.luxtronik_19_param_state
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
    alias: Wiederhole, bis Parameter Warmwasser Solltemperatur Wunschwert gesetzt
      werden konnte
  - if:
    - condition: template
      alias: NOT Parameter Warmwasser Solltemperatur gesetzt
      value_template: '{{ (state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''temperature_hot_water_target'']
        != states(''input_number.luxtronik_19_ww_solltemperatur_wunschwert'')|int)
        }}'
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - WW Haus 19 Warmwasser Solltemperatur Wunschwert
          nicht gesetzt
        message: 'Warmwasser Temperatur Wunschwert Soll:  {{states(''input_number.luxtronik_19_ww_solltemperatur_wunschwert'')|int}}

          Warmwasser Temperatur Wunschwert Ist :  {{state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''temperature_hot_water_target'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Sende eine Benachrichtigung, wenn die Warmwasser Solltemperatur Wunschwert
      nicht gesetzt werden konnte
  mode: single
- id: '1684689592130'
  alias: Schalte WW - Setze WW Solltemperatur Wunschwert Haus 21 (bei Änderung)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_number.luxtronik_21_ww_solltemperatur_wunschwert
  condition: []
  action:
  - repeat:
      while:
      - condition: and
        conditions:
        - condition: template
          alias: NOT Parameter Warmwasser Solltemperatur Wunschwert gesetzt
          value_template: '{{ (state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''temperature_hot_water_target'']
            != states(''input_number.luxtronik_21_ww_solltemperatur_wunschwert'')|int)
            }}'
        - condition: template
          value_template: '{{ (repeat.index < 5) }}'
      sequence:
      - service: script.schalte_warmwasser_zieltemperatur_wunschwert
        data:
          heatpump: 21
          value: '{{ states(''input_number.luxtronik_21_ww_solltemperatur_wunschwert'')|int
            }}'
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
      - service: homeassistant.update_entity
        data: {}
        target:
          entity_id: sensor.luxtronik_21_param_state
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
    alias: Wiederhole, bis Parameter Warmwasser Solltemperatur Wunschwert gesetzt
      werden konnte
  - if:
    - condition: template
      alias: NOT Parameter Warmwasser Solltemperatur gesetzt
      value_template: '{{ (state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''temperature_hot_water_target'']
        != states(''input_number.luxtronik_21_ww_solltemperatur_wunschwert'')|int)
        }}'
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - WW Haus 21 Warmwasser Solltemperatur Wunschwert
          nicht gesetzt
        message: 'Warmwasser Temperatur Wunschwert Soll:  {{states(''input_number.luxtronik_21_ww_solltemperatur_wunschwert'')|int}}

          Warmwasser Temperatur Wunschwert Ist :  {{state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''temperature_hot_water_target'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Sende eine Benachrichtigung, wenn die Warmwasser Solltemperatur Wunschwert
      nicht gesetzt werden konnte
  mode: single
- id: '1684689622478'
  alias: Schalte WW - Setze WW Solltemperatur Wunschwert Haus 23 (bei Änderung)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_number.luxtronik_23_ww_solltemperatur_wunschwert
  condition: []
  action:
  - repeat:
      while:
      - condition: and
        conditions:
        - condition: template
          alias: NOT Parameter Warmwasser Solltemperatur Wunschwert gesetzt
          value_template: '{{ (state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''temperature_hot_water_target'']
            != states(''input_number.luxtronik_23_ww_solltemperatur_wunschwert'')|int)
            }}'
        - condition: template
          value_template: '{{ (repeat.index < 5) }}'
      sequence:
      - service: script.schalte_warmwasser_zieltemperatur_wunschwert
        data:
          heatpump: 23
          value: '{{ states(''input_number.luxtronik_23_ww_solltemperatur_wunschwert'')|int
            }}'
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
      - service: homeassistant.update_entity
        data: {}
        target:
          entity_id: sensor.luxtronik_23_param_state
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
    alias: Wiederhole, bis Parameter Warmwasser Solltemperatur Wunschwert gesetzt
      werden konnte
  - if:
    - condition: template
      alias: NOT Parameter Warmwasser Solltemperatur gesetzt
      value_template: '{{ (state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''temperature_hot_water_target'']
        != states(''input_number.luxtronik_23_ww_solltemperatur_wunschwert'')|int)
        }}'
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - WW Haus 23 Warmwasser Solltemperatur Wunschwert
          nicht gesetzt
        message: 'Warmwasser Temperatur Wunschwert Soll:  {{states(''input_number.luxtronik_23_ww_solltemperatur_wunschwert'')|int}}

          Warmwasser Temperatur Wunschwert Ist :  {{state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''temperature_hot_water_target'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Sende eine Benachrichtigung, wenn die Warmwasser Solltemperatur Wunschwert
      nicht gesetzt werden konnte
  mode: single
- id: '1684689654053'
  alias: Schalte WW - Setze WW Solltemperatur Wunschwert Haus 25 (bei Änderung)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_number.luxtronik_25_ww_solltemperatur_wunschwert
  condition: []
  action:
  - repeat:
      while:
      - condition: and
        conditions:
        - condition: template
          alias: NOT Parameter Warmwasser Solltemperatur Wunschwert gesetzt
          value_template: '{{ (state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''temperature_hot_water_target'']
            != states(''input_number.luxtronik_25_ww_solltemperatur_wunschwert'')|int)
            }}'
        - condition: template
          value_template: '{{ (repeat.index < 5) }}'
      sequence:
      - service: script.schalte_warmwasser_zieltemperatur_wunschwert
        data:
          heatpump: 25
          value: '{{ states(''input_number.luxtronik_25_ww_solltemperatur_wunschwert'')|int
            }}'
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
      - service: homeassistant.update_entity
        data: {}
        target:
          entity_id: sensor.luxtronik_25_param_state
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
    alias: Wiederhole, bis Parameter Warmwasser Solltemperatur Wunschwert gesetzt
      werden konnte
  - if:
    - condition: template
      alias: NOT Parameter Warmwasser Solltemperatur gesetzt
      value_template: '{{ (state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''temperature_hot_water_target'']
        != states(''input_number.luxtronik_25_ww_solltemperatur_wunschwert'')|int)
        }}'
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - WW Haus 25 Warmwasser Solltemperatur Wunschwert
          nicht gesetzt
        message: 'Warmwasser Temperatur Wunschwert Soll:  {{states(''input_number.luxtronik_25_ww_solltemperatur_wunschwert'')|int}}

          Warmwasser Temperatur Wunschwert Ist :  {{state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''temperature_hot_water_target'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Sende eine Benachrichtigung, wenn die Warmwasser Solltemperatur Wunschwert
      nicht gesetzt werden konnte
  mode: single
- id: '1684813307133'
  alias: Schalte HZ - Setze HZ Operation Mode Haus 19 (bei Änderung)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_select.luxtronik_19_hz_operation_mode
  condition: []
  action:
  - repeat:
      while:
      - condition: and
        conditions:
        - condition: template
          alias: NOT Parameter Heizung Operation Mode gesetzt
          value_template: '{{ (state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''heating_operation_mode'']
            != states(''input_select.luxtronik_19_hz_operation_mode'')|int) }}'
        - condition: template
          value_template: '{{ (repeat.index < 5) }}'
      sequence:
      - service: script.schalte_heizung_operation_mode
        data:
          heatpump: 19
          value: '{{ states(''input_select.luxtronik_19_hz_operation_mode'')|int }}'
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
      - service: homeassistant.update_entity
        data: {}
        target:
          entity_id: sensor.luxtronik_19_param_state
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
    alias: Wiederhole, bis Parameter Heizung Operation Mode gesetzt werden konnte
  - if:
    - condition: template
      alias: NOT Parameter Heizung Operation Mode gesetzt
      value_template: '{{ (state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''heating_operation_mode'']
        != states(''input_select.luxtronik_19_hz_operation_mode'')|int) }}'
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - WW Haus 19 Heizung Operation Mode nicht gesetzt
        message: 'Heizung Operation Mode Soll:  {{states(''input_select.luxtronik_19_hz_operation_mode'')|int}}

          Heizung Operation Mode Ist :  {{state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''heating_operation_mode'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_19_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_19_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Sende eine Benachrichtigung, wenn die Heizung Operation Mode nicht gesetzt
      werden konnte
  mode: single
- id: '1684813691132'
  alias: Schalte HZ - Setze HZ Operation Mode Haus 21 (bei Änderung)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_select.luxtronik_21_hz_operation_mode
  condition: []
  action:
  - repeat:
      while:
      - condition: and
        conditions:
        - condition: template
          alias: NOT Parameter Heizung Operation Mode gesetzt
          value_template: '{{ (state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''heating_operation_mode'']
            != states(''input_select.luxtronik_21_hz_operation_mode'')|int) }}'
        - condition: template
          value_template: '{{ (repeat.index < 5) }}'
      sequence:
      - service: script.schalte_heizung_operation_mode
        data:
          heatpump: 21
          value: '{{ states(''input_select.luxtronik_21_hz_operation_mode'')|int }}'
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
      - service: homeassistant.update_entity
        data: {}
        target:
          entity_id: sensor.luxtronik_21_param_state
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
    alias: Wiederhole, bis Parameter Heizung Operation Mode gesetzt werden konnte
  - if:
    - condition: template
      alias: NOT Parameter Heizung Operation Mode gesetzt
      value_template: '{{ (state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''heating_operation_mode'']
        != states(''input_select.luxtronik_21_hz_operation_mode'')|int) }}'
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - WW Haus 21 Heizung Operation Mode nicht gesetzt
        message: 'Heizung Operation Mode Soll:  {{states(''input_select.luxtronik_21_hz_operation_mode'')|int}}

          Heizung Operation Mode Ist :  {{state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''heating_operation_mode'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_21_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_21_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Sende eine Benachrichtigung, wenn die Heizung Operation Mode nicht gesetzt
      werden konnte
  mode: single
- id: '1684813733948'
  alias: Schalte HZ - Setze HZ Operation Mode Haus 23 (bei Änderung)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_select.luxtronik_23_hz_operation_mode
  condition: []
  action:
  - repeat:
      while:
      - condition: and
        conditions:
        - condition: template
          alias: NOT Parameter Heizung Operation Mode gesetzt
          value_template: '{{ (state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''heating_operation_mode'']
            != states(''input_select.luxtronik_23_hz_operation_mode'')|int) }}'
        - condition: template
          value_template: '{{ (repeat.index < 5) }}'
      sequence:
      - service: script.schalte_heizung_operation_mode
        data:
          heatpump: 23
          value: '{{ states(''input_select.luxtronik_23_hz_operation_mode'')|int }}'
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
      - service: homeassistant.update_entity
        data: {}
        target:
          entity_id: sensor.luxtronik_23_param_state
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
    alias: Wiederhole, bis Parameter Heizung Operation Mode gesetzt werden konnte
  - if:
    - condition: template
      alias: NOT Parameter Heizung Operation Mode gesetzt
      value_template: '{{ (state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''heating_operation_mode'']
        != states(''input_select.luxtronik_23_hz_operation_mode'')|int) }}'
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - WW Haus 23 Heizung Operation Mode nicht gesetzt
        message: 'Heizung Operation Mode Soll:  {{states(''input_select.luxtronik_23_hz_operation_mode'')|int}}

          Heizung Operation Mode Ist :  {{state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''heating_operation_mode'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_23_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_23_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Sende eine Benachrichtigung, wenn die Heizung Operation Mode nicht gesetzt
      werden konnte
  mode: single
- id: '1684813761728'
  alias: Schalte HZ - Setze HZ Operation Mode Haus 25 (bei Änderung)
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_select.luxtronik_25_hz_operation_mode
  condition: []
  action:
  - repeat:
      while:
      - condition: and
        conditions:
        - condition: template
          alias: NOT Parameter Heizung Operation Mode gesetzt
          value_template: '{{ (state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''heating_operation_mode'']
            != states(''input_select.luxtronik_25_hz_operation_mode'')|int) }}'
        - condition: template
          value_template: '{{ (repeat.index < 5) }}'
      sequence:
      - service: script.schalte_heizung_operation_mode
        data:
          heatpump: 25
          value: '{{ states(''input_select.luxtronik_25_hz_operation_mode'')|int }}'
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
      - service: homeassistant.update_entity
        data: {}
        target:
          entity_id: sensor.luxtronik_25_param_state
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
    alias: Wiederhole, bis Parameter Heizung Operation Mode gesetzt werden konnte
  - if:
    - condition: template
      alias: NOT Parameter Heizung Operation Mode gesetzt
      value_template: '{{ (state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''heating_operation_mode'']
        != states(''input_select.luxtronik_25_hz_operation_mode'')|int) }}'
    then:
    - service: notify.administrator_rotseepark
      data:
        title: HA-Alert Rotseepark - WW Haus 25 Heizung Operation Mode nicht gesetzt
        message: 'Heizung Operation Mode Soll:  {{states(''input_select.luxtronik_25_hz_operation_mode'')|int}}

          Heizung Operation Mode Ist :  {{state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''heating_operation_mode'']}}

          Zeitpunkt: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''rawDeviceTimeCalc'']}}

          Status Standard: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''heatpump_state_string'']}}

          Status Extended: {{state_attr(''sensor.luxtronik_25_value_state'',''values'')[''heatpump_extendet_state_string'']}}

          Heizung Operation Modus: {{state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''heating_operation_mode'']}}
          /  {{state_attr(''sensor.luxtronik_25_param_state'',''parameters'')[''heating_operation_mode_string'']}}

          '
    alias: Sende eine Benachrichtigung, wenn die Heizung Operation Mode nicht gesetzt
      werden konnte
  mode: single
- id: '1684861404540'
  alias: Schalte WW - Prüfe alle 15 Minuten und produziere WW im Haus mit der tiefsten
    Temperatur (Nachtmodus)
  description: ''
  trigger:
  - platform: time_pattern
    minutes: /15
    hours: '0'
    alias: Time Pattern Trigger 0 Uhr alle 15 Minuten
  - platform: time_pattern
    hours: '1'
    minutes: /15
    alias: Time Pattern Trigger 1 Uhr alle 15 Minuten
  - platform: time_pattern
    hours: '2'
    minutes: /15
    alias: Time Pattern Trigger 2 Uhr alle 15 Minuten
  - platform: time_pattern
    hours: '3'
    minutes: /15
    alias: Time Pattern Trigger 3 Uhr alle 15 Minuten
  condition:
  - condition: time
    weekday:
    - mon
    - tue
    - wed
    - thu
    - fri
    - sat
    alias: Montag bis Samstag, weil am Sonntag die TDI ist
  action:
  - choose:
    - conditions:
      - condition: and
        conditions:
        - condition: state
          entity_id: binary_sensor.luxtronik19_bup_out
          state: 'off'
          for:
            hours: 0
            minutes: 30
            seconds: 0
          alias: Prüfen, ob BPU von Haus 19 seit mindestens 30 Minuten nicht läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik19_tbw'') < states(''sensor.luxtronik21_tbw'')
            or states(''binary_sensor.luxtronik21_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 19 Boiler kälter als Haus 21 oder der Boiler 21 nicht
            schon läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik19_tbw'') < states(''sensor.luxtronik23_tbw'')
            or states(''binary_sensor.luxtronik23_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 19 Boiler kälter als Haus 23 oder der Boiler 23 nicht
            schon läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik19_tbw'') < states(''sensor.luxtronik25_tbw'')
            or states(''binary_sensor.luxtronik25_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 19 Boiler kälter als Haus 25 oder der Boiler 25 nicht
            schon läuft
        - condition: or
          conditions:
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik19_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.7 ))|int
              \n and now().hour >= 2 and now().hour <= 4) \n else false\n}}"
            alias: TBW tiefer als der 30% Hysterese Schwellwert von 02:00 bis 04:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik19_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.8 ))|int
              \n and now().hour >= 1 and now().hour <= 4) \n else false\n}}"
            alias: TBW tiefer als der 20% Hysterese Schwellwert von 01:00 bis 04:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik19_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.9 ))|int
              \n and now().hour >= 0 and now().hour <= 4)\n else false\n}}"
            alias: TBW tiefer als der 10% Hysterese Schwellwert von 00:00 bis 04:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik19_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.4 ))|int
              \n and now().hour >= 2 and now().hour <= 4\n and states('sensor.forecast_solar_production_production_today')|int
              < 200) \n else false\n}}\n"
            alias: TBW tiefer als der 60% Hysterese Schwellwert von 02:00 bis 04:00
              UND Solar Forecast < 200 kWh
          alias: TBW - Hysterese Schwellwerte prüfen (Zeit, Forecast)
        alias: Vergleiche Haus 19 gegen die anderen Häuser
      sequence:
      - service: notify.administrator_rotseepark
        data:
          title: HA-Info Rotseepark - Nacht Tarif Prüfung erfolgreich -> Haus 19 gewält
          message: 'TBW aktuell: {{states(''sensor.luxtronik19_tbw'')}}

            '
      - service: input_number.set_value
        data:
          value: '{{ (states(''sensor.luxtronik19_tbw_soll'')|int - states(''sensor.luxtronik19_tbw'')|int
            - 1 )|int }}'
        target:
          entity_id: input_number.luxtronik_19_ww_hysterese
      - delay:
          hours: 0
          minutes: 8
          seconds: 0
          milliseconds: 0
      - service: input_number.set_value
        data:
          value: '{{ states(''input_number.luxtronik_ww_normalhysterese'')|int }}'
        target:
          entity_id: input_number.luxtronik_19_ww_hysterese
    - conditions:
      - condition: and
        conditions:
        - condition: state
          entity_id: binary_sensor.luxtronik21_bup_out
          state: 'off'
          for:
            hours: 0
            minutes: 30
            seconds: 0
          alias: Prüfen, ob BPU von Haus 21 seit mindestens 30 Minuten nicht läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik21_tbw'') < states(''sensor.luxtronik19_tbw'')
            or states(''binary_sensor.luxtronik19_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 21 Boiler kälter als Haus 19 oder der Boiler 19 nicht
            schon läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik21_tbw'') < states(''sensor.luxtronik23_tbw'')
            or states(''binary_sensor.luxtronik23_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 21 Boiler kälter als Haus 23 oder der Boiler 23 nicht
            schon läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik21_tbw'') < states(''sensor.luxtronik25_tbw'')
            or states(''binary_sensor.luxtronik25_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 21 Boiler kälter als Haus 25 oder der Boiler 25 nicht
            schon läuft
        - condition: or
          conditions:
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik21_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.7 ))|int
              \n and now().hour >= 2 and now().hour <= 4) \n else false\n}}"
            alias: TBW tiefer als der 30% Hysterese Schwellwert von 02:00 bis 04:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik21_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.8 ))|int
              \n and now().hour >= 1 and now().hour <= 4) \n else false\n}}"
            alias: TBW tiefer als der 20% Hysterese Schwellwert von 01:00 bis 04:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik21_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.9 ))|int
              \n and now().hour >= 0 and now().hour <= 4)\n else false\n}}"
            alias: TBW tiefer als der 10% Hysterese Schwellwert von 00:00 bis 04:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik21_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.4 ))|int
              \n and now().hour >= 2 and now().hour <= 4\n and states('sensor.forecast_solar_production_production_today')|int
              < 200) \n else false\n}}\n"
            alias: TBW tiefer als der 60% Hysterese Schwellwert von 02:00 bis 04:00
              UND Solar Forecast < 200 kWh
          alias: TBW - Hysterese Schwellwerte prüfen (Zeit, Forecast)
        alias: Vergleiche Haus 21 gegen die anderen Häuser
      sequence:
      - service: notify.administrator_rotseepark
        data:
          title: HA-Info Rotseepark - Nacht Tarif Prüfung erfolgreich -> Haus 21 gewält
          message: 'TBW aktuell: {{states(''sensor.luxtronik21_tbw'')}}

            '
      - service: input_number.set_value
        data:
          value: '{{ (states(''sensor.luxtronik21_tbw_soll'')|int - states(''sensor.luxtronik21_tbw'')|int
            - 1 )|int }}'
        target:
          entity_id: input_number.luxtronik_21_ww_hysterese
      - delay:
          hours: 0
          minutes: 8
          seconds: 0
          milliseconds: 0
      - service: input_number.set_value
        data:
          value: '{{ states(''input_number.luxtronik_ww_normalhysterese'')|int }}'
        target:
          entity_id: input_number.luxtronik_21_ww_hysterese
    - conditions:
      - condition: and
        conditions:
        - condition: state
          entity_id: binary_sensor.luxtronik23_bup_out
          state: 'off'
          for:
            hours: 0
            minutes: 30
            seconds: 0
          alias: Prüfen, ob BPU von Haus 23 seit mindestens 30 Minuten nicht läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik23_tbw'') < states(''sensor.luxtronik19_tbw'')
            or states(''binary_sensor.luxtronik19_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 23 Boiler kälter als Haus 19 oder der Boiler 19 nicht
            schon läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik23_tbw'') < states(''sensor.luxtronik21_tbw'')
            or states(''binary_sensor.luxtronik21_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 23 Boiler kälter als Haus 21 oder der Boiler 21 nicht
            schon läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik23_tbw'') < states(''sensor.luxtronik25_tbw'')
            or states(''binary_sensor.luxtronik25_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 23 Boiler kälter als Haus 25 oder der Boiler 25 nicht
            schon läuft
        - condition: or
          conditions:
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik23_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.7 ))|int
              \n and now().hour >= 2 and now().hour <= 4) \n else false\n}}"
            alias: TBW tiefer als der 30% Hysterese Schwellwert von 02:00 bis 04:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik23_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.8 ))|int
              \n and now().hour >= 1 and now().hour <= 4) \n else false\n}}"
            alias: TBW tiefer als der 20% Hysterese Schwellwert von 01:00 bis 04:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik23_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.9 ))|int
              \n and now().hour >= 0 and now().hour <= 4)\n else false\n}}"
            alias: TBW tiefer als der 10% Hysterese Schwellwert von 00:00 bis 04:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik23_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.4 ))|int
              \n and now().hour >= 2 and now().hour <= 4\n and states('sensor.forecast_solar_production_production_today')|int
              < 200) \n else false\n}}\n"
            alias: TBW tiefer als der 60% Hysterese Schwellwert von 02:00 bis 04:00
              UND Solar Forecast < 200 kWh
          alias: TBW - Hysterese Schwellwerte prüfen (Zeit, Forecast)
        alias: Vergleiche Haus 23 gegen die anderen Häuser
      sequence:
      - service: notify.administrator_rotseepark
        data:
          title: HA-Info Rotseepark - Nacht Tarif Prüfung erfolgreich -> Haus 23 gewält
          message: 'TBW aktuell: {{states(''sensor.luxtronik23_tbw'')}}

            '
      - service: input_number.set_value
        data:
          value: '{{ (states(''sensor.luxtronik23_tbw_soll'')|int - states(''sensor.luxtronik23_tbw'')|int
            - 1 )|int }}'
        target:
          entity_id: input_number.luxtronik_23_ww_hysterese
      - delay:
          hours: 0
          minutes: 8
          seconds: 0
          milliseconds: 0
      - service: input_number.set_value
        data:
          value: '{{ states(''input_number.luxtronik_ww_normalhysterese'')|int }}'
        target:
          entity_id: input_number.luxtronik_23_ww_hysterese
    - conditions:
      - condition: and
        conditions:
        - condition: state
          entity_id: binary_sensor.luxtronik25_bup_out
          state: 'off'
          for:
            hours: 0
            minutes: 30
            seconds: 0
          alias: Prüfen, ob BPU von Haus 25 seit mindestens 30 Minuten nicht läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik25_tbw'') < states(''sensor.luxtronik19_tbw'')
            or states(''binary_sensor.luxtronik19_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 25 Boiler kälter als Haus 19 oder der Boiler 19 nicht
            schon läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik25_tbw'') < states(''sensor.luxtronik21_tbw'')
            or states(''binary_sensor.luxtronik21_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 25 Boiler kälter als Haus 21 oder der Boiler 21 nicht
            schon läuft
        - condition: template
          value_template: '{{states(''sensor.luxtronik25_tbw'') < states(''sensor.luxtronik23_tbw'')
            or states(''binary_sensor.luxtronik23_bup_out'') == ''on'' }}'
          alias: Prüfen, ob Haus 25 Boiler kälter als Haus 23 oder der Boiler 23 nicht
            schon läuft
        - condition: or
          conditions:
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik25_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.7 ))|int
              \n and now().hour >= 2 and now().hour <= 4) \n else false\n}}"
            alias: TBW tiefer als der 30% Hysterese Schwellwert von 02:00 bis 04:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik25_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.8 ))|int
              \n and now().hour >= 1 and now().hour <= 4) \n else false\n}}"
            alias: TBW tiefer als der 20% Hysterese Schwellwert von 01:00 bis 04:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik25_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.9 ))|int
              \n and now().hour >= 0 and now().hour <= 4)\n else false\n}}"
            alias: TBW tiefer als der 10% Hysterese Schwellwert von 00:00 bis 04:00
          - condition: template
            value_template: "{{ true if (states('sensor.luxtronik25_tbw')|int < (states('input_number.luxtronik_ww_normaltemperatur')|int
              - (states('input_number.luxtronik_ww_normalhysterese')|int * 0.4 ))|int
              \n and now().hour >= 2 and now().hour <= 4\n and states('sensor.forecast_solar_production_production_today')|int
              < 200) \n else false\n}}\n"
            alias: TBW tiefer als der 60% Hysterese Schwellwert von 02:00 bis 04:00
              UND Solar Forecast < 200 kWh
          alias: TBW - Hysterese Schwellwerte prüfen (Zeit, Forecast)
        alias: Vergleiche Haus 25 gegen die anderen Häuser
      sequence:
      - service: notify.administrator_rotseepark
        data:
          title: HA-Info Rotseepark - Nacht Tarif Prüfung erfolgreich -> Haus 25 gewält
          message: 'TBW aktuell: {{states(''sensor.luxtronik25_tbw'')}}

            '
      - service: input_number.set_value
        data:
          value: '{{ (states(''sensor.luxtronik25_tbw_soll'')|int - states(''sensor.luxtronik25_tbw'')|int
            - 1 )|int }}'
        target:
          entity_id: input_number.luxtronik_25_ww_hysterese
      - delay:
          hours: 0
          minutes: 8
          seconds: 0
          milliseconds: 0
      - service: input_number.set_value
        data:
          value: '{{ states(''input_number.luxtronik_ww_normalhysterese'')|int }}'
        target:
          entity_id: input_number.luxtronik_25_ww_hysterese
    alias: Prüfen welches Haus das tiefste Brauchwasser hat und geladen werden soll
  trace:
    stored_traces: 40
  mode: single
- id: '1690825016699'
  alias: Schalte Tor - Einstellhalle Freigabe zur Öffnung und Schliessung
  description: ''
  trigger:
  - platform: sun
    event: sunset
    offset: 00:30:00
  - platform: time
    at: 07:00:00
  - platform: time
    at: '19:00:00'
  condition:
  - condition: time
    weekday:
    - fri
    - thu
    - wed
    - tue
    - mon
    after: 06:59:00
    before: '19:01:00'
  - condition: numeric_state
    entity_id: calendar.feiertag_luzern
    above: 0
  action:
  - if:
    - condition: time
      after: 06:59:00
      before: 07:01:00
    then:
    - service: switch.turn_on
      data: {}
      target:
        entity_id: switch.shelly_hobler_tor_switch_0
    else:
    - service: switch.turn_off
      data: {}
      target:
        entity_id: switch.shelly_hobler_tor_switch_0
  mode: single
- id: '1691037394505'
  alias: Schalte HZ - Heizung Umwälzpumpe abhängig Entgasung
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sensor.average_shelly_box_haus_19_switch_0_power_w
    above: 15
    for:
      hours: 0
      minutes: 1
      seconds: 0
  - platform: numeric_state
    entity_id: sensor.average_shelly_box_haus_19_switch_0_power_w
    below: 15
    for:
      hours: 0
      minutes: 5
      seconds: 0
  - platform: numeric_state
    entity_id: sensor.average_shelly_box_haus_21_switch_0_power_w
    above: 15
    for:
      hours: 0
      minutes: 1
      seconds: 0
  - platform: numeric_state
    entity_id: sensor.average_shelly_box_haus_21_switch_0_power_w
    below: 15
    for:
      hours: 0
      minutes: 5
      seconds: 0
  - platform: numeric_state
    entity_id: sensor.average_shelly_box_haus_23_switch_0_power_w
    above: 15
    for:
      hours: 0
      minutes: 1
      seconds: 0
  - platform: numeric_state
    entity_id: sensor.average_shelly_box_haus_23_switch_0_power_w
    below: 15
    for:
      hours: 0
      minutes: 5
      seconds: 0
  - platform: numeric_state
    entity_id: sensor.average_shelly_box_haus_25_switch_0_power_w
    above: 15
    for:
      hours: 0
      minutes: 1
      seconds: 0
  - platform: numeric_state
    entity_id: sensor.average_shelly_box_haus_25_switch_0_power_w
    below: 15
    for:
      hours: 0
      minutes: 5
      seconds: 0
  condition: []
  action:
  - if:
    - condition: numeric_state
      entity_id: sensor.average_shelly_box_haus_19_switch_0_power_w
      above: 15
    then:
    - service: switch.turn_on
      data: {}
      target:
        entity_id:
        - switch.shelly_box_haus_19_switch_1
    else:
    - service: switch.turn_off
      data: {}
      target:
        entity_id:
        - switch.shelly_box_haus_19_switch_1
  - if:
    - condition: numeric_state
      entity_id: sensor.average_shelly_box_haus_21_switch_0_power_w
      above: 15
    then:
    - service: switch.turn_on
      data: {}
      target:
        entity_id:
        - switch.shelly_box_haus_21_switch_1
    else:
    - service: switch.turn_off
      data: {}
      target:
        entity_id:
        - switch.shelly_box_haus_21_switch_1
  - if:
    - condition: numeric_state
      entity_id: sensor.average_shelly_box_haus_23_switch_0_power_w
      above: 15
    then:
    - service: switch.turn_on
      data: {}
      target:
        entity_id:
        - switch.shelly_box_haus_23_switch_1
    else:
    - service: switch.turn_off
      data: {}
      target:
        entity_id:
        - switch.shelly_box_haus_23_switch_1
  - if:
    - condition: numeric_state
      entity_id: sensor.average_shelly_box_haus_25_switch_0_power_w
      above: 15
    then:
    - service: switch.turn_on
      data: {}
      target:
        entity_id:
        - switch.shelly_box_haus_25_switch_1
    else:
    - service: switch.turn_off
      data: {}
      target:
        entity_id:
        - switch.shelly_box_haus_25_switch_1
  mode: single
- id: '1691358016187'
  alias: Monitoring Shelly H&T Feuchtigkeit, Temperatur, Batterie und Netzwerk
  description: ''
  trigger:
  - platform: time_pattern
    hours: /4
  - platform: state
    entity_id:
    - device_tracker.shelly_h_and_t_haus_19
    - device_tracker.shelly_h_and_t_haus_21
    - device_tracker.shelly_h_and_t_haus_23
    - device_tracker.shelly_h_and_t_haus_25
    to:
    - not_home
    - unavailable
    - unknown
    for:
      hours: 4
      minutes: 0
      seconds: 0
  - platform: numeric_state
    entity_id: sensor.shelly_h_and_t_haus_19_humidity
    above: 50
  - platform: numeric_state
    entity_id: sensor.shelly_h_and_t_haus_21_humidity
    above: 50
  - platform: numeric_state
    entity_id: sensor.shelly_h_and_t_haus_23_humidity
    above: 50
  - platform: numeric_state
    entity_id: sensor.shelly_h_and_t_haus_25_humidity
    above: 50
  - platform: numeric_state
    entity_id: sensor.shelly_h_and_t_haus_19_temperature
    above: 28
  - platform: numeric_state
    entity_id: sensor.shelly_h_and_t_haus_21_temperature
    above: 28
  - platform: numeric_state
    entity_id: sensor.shelly_h_and_t_haus_23_temperature
    above: 28
  - platform: numeric_state
    entity_id: sensor.shelly_h_and_t_haus_25_temperature
    above: 28
  - platform: numeric_state
    entity_id: sensor.shelly_h_and_t_haus_19_absolute_feuchte
    above: 11
  - platform: numeric_state
    entity_id: sensor.shelly_h_and_t_haus_21_absolute_feuchte
    above: 11
  - platform: numeric_state
    entity_id: sensor.shelly_h_and_t_haus_23_absolute_feuchte
    above: 11
  - platform: numeric_state
    entity_id: sensor.shelly_h_and_t_haus_25_absolute_feuchte
    above: 11
  condition:
  - condition: or
    conditions:
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_19_humidity
      below: 35
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_21_humidity
      below: 35
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_23_humidity
      below: 35
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_25_humidity
      below: 35
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_19_humidity
      above: 50
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_21_humidity
      above: 50
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_23_humidity
      above: 50
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_25_humidity
      above: 50
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_19_temperature
      below: 22
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_21_temperature
      below: 22
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_23_temperature
      below: 22
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_25_temperature
      below: 22
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_19_temperature
      above: 28
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_21_temperature
      above: 28
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_23_temperature
      above: 28
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_25_temperature
      above: 28
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_19_absolute_feuchte
      below: 9
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_21_absolute_feuchte
      below: 9
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_23_absolute_feuchte
      below: 9
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_25_absolute_feuchte
      below: 9
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_19_absolute_feuchte
      above: 11
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_21_absolute_feuchte
      above: 11
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_23_absolute_feuchte
      above: 11
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_25_absolute_feuchte
      above: 11
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_19_battery
      below: 10
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_21_battery
      below: 10
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_23_battery
      below: 10
    - condition: numeric_state
      entity_id: sensor.shelly_h_and_t_haus_25_battery
      below: 10
    - condition: state
      entity_id: device_tracker.shelly_h_and_t_haus_19
      state:
      - not_home
      - unavailable
      - unknown
      for:
        hours: 4
        minutes: 0
        seconds: 0
    - condition: state
      entity_id: device_tracker.shelly_h_and_t_haus_21
      state:
      - not_home
      - unavailable
      - unknown
      for:
        hours: 4
        minutes: 0
        seconds: 0
    - condition: state
      entity_id: device_tracker.shelly_h_and_t_haus_23
      state:
      - not_home
      - unavailable
      - unknown
      for:
        hours: 4
        minutes: 0
        seconds: 0
    - condition: state
      entity_id: device_tracker.shelly_h_and_t_haus_25
      state:
      - not_home
      - unavailable
      - unknown
      for:
        hours: 4
        minutes: 0
        seconds: 0
  action:
  - service: notify.administrator_rotseepark
    data:
      title: 'HA-Alert Heizungsraum: Shelly H&T prüfen'
      message: "IST-Werte sind ...\nRelative Feuchte ... (35 bis 50% rfH)\nHaus 19
        - {{ states('sensor.shelly_h_and_t_haus_19_humidity') }} % rfH\nHaus 21 -
        {{ states('sensor.shelly_h_and_t_haus_21_humidity') }} % rfH\nHaus 23 - {{
        states('sensor.shelly_h_and_t_haus_23_humidity') }} % rfH\nHaus 25 - {{ states('sensor.shelly_h_and_t_haus_25_humidity')
        }} % rfH\nTemperatur ... (22 bis 28 °C)\nHaus 19 - {{ states('sensor.shelly_h_and_t_haus_19_temperature')
        }} °C\nHaus 21 - {{ states('sensor.shelly_h_and_t_haus_21_temperature') }}
        °C\nHaus 23 - {{ states('sensor.shelly_h_and_t_haus_23_temperature') }} °C\nHaus
        25 - {{ states('sensor.shelly_h_and_t_haus_25_temperature') }} °C\nAbsolute
        Feuchte ... (9 bis 11 g/m³)\nHaus 19 - {{ states('sensor.shelly_h_and_t_haus_19_absolute_feuchte')
        }} g/m³\nHaus 21 - {{ states('sensor.shelly_h_and_t_haus_21_absolute_feuchte')
        }} g/m³\nHaus 23 - {{ states('sensor.shelly_h_and_t_haus_23_absolute_feuchte')
        }} g/m³\nHaus 25 - {{ states('sensor.shelly_h_and_t_haus_25_absolute_feuchte')
        }} g/m³\nBatteriezustand ... (10 - 90 %)\nHaus 19 - {{ states('sensor.shelly_h_and_t_haus_19_battery')
        }}%\nHaus 21 - {{ states('sensor.shelly_h_and_t_haus_21_battery') }}%  \nHaus
        23 - {{ states('sensor.shelly_h_and_t_haus_23_battery') }}%  \nHaus 25 - {{
        states('sensor.shelly_h_and_t_haus_25_battery') }}%  \nNetzwerk ... (normally
        not_home - only check, when any other state are fine)\nHaus 19 - {{ states('device_tracker.shelly_h_and_t_haus_19')
        }}\nHaus 21 - {{ states('device_tracker.shelly_h_and_t_haus_21') }}\nHaus
        23 - {{ states('device_tracker.shelly_h_and_t_haus_23') }}\nHaus 25 - {{ states('device_tracker.shelly_h_and_t_haus_25')
        }}"
  mode: single
- id: '1691392231544'
  alias: Monitoring Zaptec Count, Offline, Network
  description: ''
  trigger: []
  condition: []
  action: []
  mode: single
- id: '1691471382318'
  alias: Monitoring Netatmo Keller Feuchtigkeit, Temperatur, Batterie
  description: ''
  trigger:
  - platform: time_pattern
    hours: /4
  - platform: numeric_state
    entity_id: sensor.netatmo_keller_gang_humidity
    above: 60
  - platform: numeric_state
    entity_id: sensor.netatmo_keller_buhler_humidity
    above: 60
  - platform: numeric_state
    entity_id: sensor.netatmo_keller_gang_temperature
    above: 22
  - platform: numeric_state
    entity_id: sensor.netatmo_keller_buhler_temperature
    above: 22
  - platform: numeric_state
    entity_id: sensor.netatmo_keller_gang_absolute_feuchte
    above: 11
  - platform: numeric_state
    entity_id: sensor.netatmo_keller_buhler_absolute_feuchte
    above: 11
  condition: []
  action:
  - if:
    - condition: or
      conditions:
      - condition: numeric_state
        entity_id: sensor.netatmo_keller_gang_humidity
        below: 50
      - condition: numeric_state
        entity_id: sensor.netatmo_keller_buhler_humidity
        below: 50
      - condition: numeric_state
        entity_id: sensor.netatmo_keller_gang_humidity
        above: 60
      - condition: numeric_state
        entity_id: sensor.netatmo_keller_buhler_humidity
        above: 60
      - condition: numeric_state
        entity_id: sensor.netatmo_keller_gang_temperature
        below: 12
      - condition: numeric_state
        entity_id: sensor.netatmo_keller_buhler_temperature
        below: 12
      - condition: numeric_state
        entity_id: sensor.netatmo_keller_gang_temperature
        above: 22
      - condition: numeric_state
        entity_id: sensor.netatmo_keller_buhler_temperature
        above: 22
      - condition: numeric_state
        entity_id: sensor.netatmo_keller_gang_absolute_feuchte
        below: 8
      - condition: numeric_state
        entity_id: sensor.netatmo_keller_buhler_absolute_feuchte
        below: 8
      - condition: numeric_state
        entity_id: sensor.netatmo_keller_gang_absolute_feuchte
        above: 11
      - condition: numeric_state
        entity_id: sensor.netatmo_keller_buhler_absolute_feuchte
        above: 11
      - condition: numeric_state
        entity_id: sensor.netatmo_keller_gang_battery_percent
        below: 10
      - condition: numeric_state
        entity_id: sensor.netatmo_outdoor_battery_percent
        below: 10
    then:
    - service: notify.administrator_rotseepark
      data:
        title: 'HA-Alert Kellerräume: Netatmo Keller prüfen'
        message: 'IST-Werte sind ... (Outdoor ist nicht zu prüfen)

          Relative Feuchte ... (50 - 60 % rfH)

          Gang    - {{ states(''sensor.netatmo_keller_gang_humidity'') }} % rfH

          Bühler  - {{ states(''sensor.netatmo_keller_buhler_humidity'') }} % rfH

          Outdoor - {{ states(''sensor.netatmo_outdoor_humidity'') }} % rfH

          Temperatur ... (12 - 22 °C)

          Gang    - {{ states(''sensor.netatmo_keller_gang_temperature'') }} °C

          Bühler  - {{ states(''sensor.netatmo_keller_buhler_temperature'') }} °C

          Outdoor - {{ states(''sensor.netatmo_outdoor_temperature'') }} °C

          Absolute Feuchte ... (8 - 11 g/m³)

          Gang    - {{ states(''sensor.netatmo_keller_gang_absolute_feuchte'') }}
          g/m³

          Bühler  - {{ states(''sensor.netatmo_keller_buhler_absolute_feuchte'') }}
          g/m³

          Outdoor - {{ states(''sensor.netatmo_outdoor_absolute_feuchte'') }} g/m³

          Batteriezustand ... (10% - 90%)

          Gang    - {{ states(''sensor.netatmo_keller_gang_battery_percent'') }}%

          Outdoor - {{ states(''sensor.netatmo_outdoor_battery_percent'') }}%  '
    alias: Prüfen ob Abweichungen in den Soll Werten Temperatur, Feuchte und Batterie
      -> dann Mitteilung
  - if:
    - condition: template
      value_template: "{{ \n     (states('sensor.netatmo_keller_buhler_absolute_feuchte')|float
        <\n      states('sensor.netatmo_outdoor_absolute_feuchte')|float) \n  or (states('sensor.netatmo_keller_gang_absolute_feuchte')|float
        <\n      states('sensor.netatmo_outdoor_absolute_feuchte')|float) \n}}"
    then:
    - service: notify.administrator_rotseepark
      data:
        title: 'HA-Info Kellerräume: Absolute Feuchte Outdoor höher als Indoor'
        message: 'Absolute Feuchte ... (8 - 10 g/m³)

          Gang    - {{ states(''sensor.netatmo_keller_gang_absolute_feuchte'') }}
          g/m³

          Bühler  - {{ states(''sensor.netatmo_keller_buhler_absolute_feuchte'') }}
          g/m³

          Outdoor - {{ states(''sensor.netatmo_outdoor_absolute_feuchte'') }} g/m³'
    alias: Prüfen ob absolute Feuchte draussen höher ist als innen -> dann Mitteilung
  - if:
    - condition: template
      value_template: "{{ \n  (now().hour > 22 or now().hour < 6)\n  and states('sensor.netatmo_keller_buhler_noise')|float
        < 47\n}}"
    then:
    - service: notify.administrator_rotseepark
      data:
        title: 'HA-Alert Kellerräume: Lärmpegel der Lüftung ist zu tief (läuft sie
          nicht?)'
        message: 'Lärmpegel ... (mindestens 47 dB)

          Bühler  - {{ states(''sensor.netatmo_keller_buhler_noise'') }} dB

          Stunde  - {{ now().hour }}'
    alias: Prüfen ob Lüftung zu wenig Lärm macht -> dann Mitteilung
  mode: single
- id: '1692770037460'
  alias: Monitoring Heatpump 21 - Brauchwasser Erzeugung Energie Verbrauch
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.luxtronik21_bup
    from: 'off'
    to: 'on'
  condition: []
  action:
  - variables:
      bup_start: '{{ now() }}'
  - service: utility_meter.calibrate
    data:
      value: '0'
    target:
      entity_id:
      - sensor.heatpump_21_ww_power_consumption_helper
      - sensor.gwf_21_hz_ug_kw_helper
    alias: Zurücksetzen der Utility Meter für Warmwasser Erzeugung kW und Stromverbrauch
  - delay:
      hours: 0
      minutes: 2
      seconds: 0
      milliseconds: 0
  - service: input_number.set_value
    data:
      value: '{{ states(''sensor.luxtronik21_tbw'')|float }}'
    target:
      entity_id: input_number.luxtronik_21_tbw_degc_helper
    alias: Speichere die aktuelle Brauchwasser Temperatur
  - repeat:
      while:
      - condition: template
        value_template: '{{ states(''sensor.luxtronik21_tbw'') >= states(''input_number.luxtronik_21_tbw_degc_helper'')
          }}'
        alias: Brauchwasser Temperatur >= gespeicherte Temperatur
      sequence:
      - service: input_number.set_value
        data:
          value: '{{ states(''sensor.luxtronik21_tbw'')|float }}'
        target:
          entity_id: input_number.luxtronik_21_tbw_degc_helper
        alias: Speichere die aktuelle Brauchwasser Temperatur
      - wait_for_trigger:
        - platform: state
          entity_id:
          - sensor.luxtronik21_tbw
        alias: Warten, bis Brauchwasser Temperatur ändert
    alias: Warten, solange die Brauchwasser Temperatur steigend ist
  - repeat:
      while:
      - condition: template
        value_template: '{{ states(''sensor.luxtronik21_tbw'') <= states(''input_number.luxtronik_21_tbw_degc_helper'')
          }}'
        alias: Brauchwasser Temperatur <= gespeicherte Temperatur
      sequence:
      - service: input_number.set_value
        data:
          value: '{{ states(''sensor.luxtronik21_tbw'')|float }}'
        target:
          entity_id: input_number.luxtronik_21_tbw_degc_helper
        alias: Speichere die aktuelle Brauchwasser Temperatur
      - wait_for_trigger:
        - platform: state
          entity_id:
          - sensor.luxtronik21_tbw
        alias: Warten, bis Brauchwasser Temperatur ändert
    alias: Warten, solange die Brauchwasser Temperatur sinkend ist
  - variables:
      btw_low_ende: '{{ now() }}'
      btw_low: '{{ states(''sensor.luxtronik21_tbw'') }}'
      btw_lowtime: '{{ now() - strptime(bup_start, ''%Y-%m-%d %H:%M:%S.%f%z'') }}'
      btw_lowminute: '{{ ((now().timestamp() - strptime(bup_start, ''%Y-%m-%d %H:%M:%S.%f%z'').timestamp())/60)|round(0)
        }}'
  - wait_for_trigger:
    - platform: numeric_state
      entity_id: sensor.luxtronik21_tvl
      above: 49.9
    alias: Warten bis Vorlauf Temperatur 50°
  - variables:
      tvl_50_watt: '{{ states(''sensor.solar_consumption_21_ww_wp'') }}'
  - wait_for_trigger:
    - platform: numeric_state
      entity_id: sensor.luxtronik21_tvl
      above: 54.9
    alias: Warten bis Vorlauf Temperatur 55°
  - variables:
      tvl_55_watt: '{{ states(''sensor.solar_consumption_21_ww_wp'') }}'
  - wait_template: '{{ states(''sensor.luxtronik21_tvl'')|int >= 60 or states(''binary_sensor.luxtronik21_bup'')
      == ''off'' }}'
    continue_on_timeout: true
    alias: Warten bis Vorlauf Temperatur 60°
  - variables:
      tvl_60_watt: '{{ states(''sensor.solar_consumption_21_ww_wp'') }}'
  - if:
    - condition: state
      entity_id: binary_sensor.luxtronik21_bup
      state: 'on'
    then:
    - wait_for_trigger:
      - platform: state
        entity_id:
        - binary_sensor.luxtronik21_bup
        from: 'on'
        to: 'off'
      alias: Warten, bis die Brauchwasser Produktion endet
    alias: Warten, bis die Brauchwasser Produktion endet, sofern sie noch läuft
  - wait_for_trigger:
    - platform: state
      entity_id:
      - binary_sensor.luxtronik21_bup
      from: 'on'
      to: 'off'
    alias: Warten, bis die Brauchwasser Produktion endet
    enabled: false
  - variables:
      bup_ende: '{{ now() }}'
  - variables:
      pumpen_kw: '{{  (  ( 2300/1000/60* ( strptime(bup_ende, ''%Y-%m-%d %H:%M:%S.%f%z'').timestamp()  -
        strptime(bup_start, ''%Y-%m-%d %H:%M:%S.%f%z'').timestamp() )/60 )|round(1)  )
        }}'
    alias: Variablen pumpen_kw definieren (Hochrechnung kW Bedarf der Pumpen)
  - variables:
      btw_lowdiff: '{{ (( states(''input_number.luxtronik_21_ww_solltemperatur'')|float
        )-(btw_low)|float+(5/60*(btw_lowminute)|float))|round(1) }}'
    alias: Variablen btw_lowdiff definieren (Tiefste berechnete Temperatur)
  - variables:
      esti_kw_b: '{{  ((4400/4*3/1000)*1.16*btw_lowdiff)|round(1)  }}'
    alias: Variablen esti_kw_b definieren (Hochrechnung kW Bedarf btw und Umwälzvolumen)
  - service: input_number.set_value
    data:
      value: '{{ 0 if is_state(''sensor.heatpump_21_ww_power_consumption_helper'',
        ''unknown'')  else states(''sensor.heatpump_21_ww_power_consumption_helper'')|float}}'
    target:
      entity_id: input_number.heatpump_21_ww_power_consumption_helper
    alias: Speichere den Strom Verbrauch von dieser Ladung
  - wait_for_trigger:
    - platform: state
      entity_id:
      - sensor.gwf_21_all_ww_l_helper
    alias: Warten bis der Warmwasser l Utility Meter das nächste mal ändert
    timeout:
      hours: 1
      minutes: 0
      seconds: 0
      milliseconds: 0
  - service: input_number.set_value
    data:
      value: '{{ states(''sensor.gwf_21_all_ww_l_helper'')|float }}'
    target:
      entity_id: input_number.gwf_21_ww_l_helper
    alias: Speichere den Warmwasserverbrauch seit der letzten Ladung
  - variables:
      esti_kw_a: '{{  ((states(''input_number.gwf_21_ww_l_helper'')|float)/1000*1.16*
        (states(''input_number.luxtronik_21_ww_solltemperatur'')|float-15))|round(1)  }}'
    alias: Variablen esti_kw_a definieren (Hochrechnung kW Bedarf anhand l Verbrauch
      GWF)
  - service: utility_meter.calibrate
    data:
      value: '0'
    target:
      entity_id:
      - sensor.gwf_21_all_ww_l_helper
    alias: Zurücksetzen der Utility Meter für Warmwasserverbrauch
  - service: input_number.set_value
    data:
      value: '{{ states(''sensor.gwf_21_hz_ug_kw_helper'')|float }}'
    target:
      entity_id: input_number.gwf_21_hz_ug_kw_helper
    alias: Speichere den Kilowatt Verbrauch von dieser Ladung
  - service: input_number.set_value
    data:
      value: '{{ esti_kw_a|float }}'
    target:
      entity_id: input_number.bwm21_variable_esti_kw_a
  - service: input_number.set_value
    data:
      value: '{{ esti_kw_b|float }}'
    target:
      entity_id: input_number.bwm21_variable_esti_kw_b
  - service: input_number.set_value
    data:
      value: '{{ tvl_50_watt|float }}'
    target:
      entity_id: input_number.bwm21_variable_tvl_50_watt
  - service: input_number.set_value
    data:
      value: '{{ tvl_55_watt|float }}'
    target:
      entity_id: input_number.bwm21_variable_tvl_55_watt
  - service: input_number.set_value
    data:
      value: '{{ tvl_60_watt|float }}'
    target:
      entity_id: input_number.bwm21_variable_tvl_60_watt
  - variables:
      gwf_ende: '{{ now() }}'
  - service: notify.administrator_rotseepark
    data:
      title: 'HA-Info Heatpump 21: Die Boiler Ladung ist beendet'
      message: "*** Ablaufzeiten ***\nBUP Start   - {{ bup_start }} \nBTW Low End
        - {{ btw_low_ende }} \nBUP End     - {{ bup_ende }} \nGWF End     - {{ gwf_ende
        }} \n*** Low Temperatur ermitteln ***\nBTW Low     - {{ btw_low }} Tiefpunkt
        Brauchwasser Temperatur\nBTW LowT    - {{ btw_lowtime }} Zeitdauer von Start
        bis Tiefpunkt\nBTW LowM    - {{ btw_lowminute }} Minuten von Start bis Tiefpunkt\nBTW
        LowDiff - {{ btw_lowdiff }} Differenz Tiefpunkt BW zu Soll\n*** Stromverbrauch
        Wärmepumpe ***\nStrom kW    - {{ states('input_number.heatpump_21_ww_power_consumption_helper')|round(1)
        }} kW Verbrauch ganze Anlage\nPumpen kW   - {{ pumpen_kw }} System kW durch
        Pumpen\nNetto kW WP - {{ (states('input_number.heatpump_21_ww_power_consumption_helper')
        |float - pumpen_kw)|round(1) }} Netto kW von Wärmepumpe\n50° TVL W   - {{
        tvl_50_watt }}\n55° TVL W   - {{ tvl_55_watt }}\n60° TVL W   - {{ tvl_60_watt
        }}\n*** Warmwasser Verbrauch ***\nl WW       - {{ states('input_number.gwf_21_ww_l_helper')
        }} l seit letzter Ladung\n*** kW Hochrechnungen und GWF Zähler VL/RL ***\nEsti
        kW A   - {{ esti_kw_a }} kW anhand l Verbrauch\nEsti kW B   - {{ esti_kw_b
        }} kW anhand btw low und Umwälzvolumen\nVL/RL kW    - {{ states('input_number.gwf_21_hz_ug_kw_helper')
        }} kW Energie im VL/RL entnommen\n*** Errechnete Wirkungsgrade ***\nWG Platte
        \  - {{ (((esti_kw_a + esti_kw_b)/2)/ states('input_number.gwf_21_hz_ug_kw_helper')|float*100)|round(0)
        }}% Wirkungsgrad Plattentauscher\nWG Faktor   - {{ ((states('input_number.gwf_21_hz_ug_kw_helper')|float)
        /(states('input_number.heatpump_21_ww_power_consumption_helper')|float  -
        pumpen_kw))|round(1) }} Faktor Wärme VL/RL versus kW Verdichter"
  mode: single
- id: '1693137410563'
  alias: System Startup Automation (Install apk)
  description: ''
  trigger:
  - platform: homeassistant
    event: start
  condition: []
  action:
  - service: shell_command.setup_apk
    data: {}
  mode: single
- id: '1694292079482'
  alias: Monitoring Heatpump 25 - Brauchwasser Erzeugung Energie Verbrauch
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.luxtronik25_bup
    from: 'off'
    to: 'on'
  condition: []
  action:
  - variables:
      bup_start: '{{ now() }}'
  - service: utility_meter.calibrate
    data:
      value: '0'
    target:
      entity_id:
      - sensor.heatpump_25_ww_power_consumption_helper
      - sensor.gwf_25_hz_ug_kw_helper
    alias: Zurücksetzen der Utility Meter für Warmwasser Erzeugung kW und Stromverbrauch
  - delay:
      hours: 0
      minutes: 2
      seconds: 0
      milliseconds: 0
  - service: input_number.set_value
    data:
      value: '{{ states(''sensor.luxtronik25_tbw'')|float }}'
    target:
      entity_id: input_number.luxtronik_25_tbw_degc_helper
    alias: Speichere die aktuelle Brauchwasser Temperatur
  - repeat:
      while:
      - condition: template
        value_template: '{{ states(''sensor.luxtronik25_tbw'') >= states(''input_number.luxtronik_25_tbw_degc_helper'')
          }}'
        alias: Brauchwasser Temperatur >= gespeicherte Temperatur
      sequence:
      - service: input_number.set_value
        data:
          value: '{{ states(''sensor.luxtronik25_tbw'')|float }}'
        target:
          entity_id: input_number.luxtronik_25_tbw_degc_helper
        alias: Speichere die aktuelle Brauchwasser Temperatur
      - wait_for_trigger:
        - platform: state
          entity_id:
          - sensor.luxtronik25_tbw
        alias: Warten, bis Brauchwasser Temperatur ändert
    alias: Warten, solange die Brauchwasser Temperatur steigend ist
  - repeat:
      while:
      - condition: template
        value_template: '{{ states(''sensor.luxtronik25_tbw'') <= states(''input_number.luxtronik_25_tbw_degc_helper'')
          }}'
        alias: Brauchwasser Temperatur <= gespeicherte Temperatur
      sequence:
      - service: input_number.set_value
        data:
          value: '{{ states(''sensor.luxtronik25_tbw'')|float }}'
        target:
          entity_id: input_number.luxtronik_25_tbw_degc_helper
        alias: Speichere die aktuelle Brauchwasser Temperatur
      - wait_for_trigger:
        - platform: state
          entity_id:
          - sensor.luxtronik25_tbw
        alias: Warten, bis Brauchwasser Temperatur ändert
    alias: Warten, solange die Brauchwasser Temperatur sinkend ist
  - variables:
      btw_low_ende: '{{ now() }}'
      btw_low: '{{ states(''sensor.luxtronik25_tbw'') }}'
      btw_lowtime: '{{ now() - strptime(bup_start, ''%Y-%m-%d %H:%M:%S.%f%z'') }}'
      btw_lowminute: '{{ ((now().timestamp() - strptime(bup_start, ''%Y-%m-%d %H:%M:%S.%f%z'').timestamp())/60)|round(0)
        }}'
  - wait_for_trigger:
    - platform: numeric_state
      entity_id: sensor.luxtronik25_tvl
      above: 49.9
    alias: Warten bis Vorlauf Temperatur 50°
  - variables:
      tvl_50_watt: '{{ states(''sensor.solar_consumption_25_ww_wp'') }}'
  - wait_for_trigger:
    - platform: numeric_state
      entity_id: sensor.luxtronik25_tvl
      above: 54.9
    alias: Warten bis Vorlauf Temperatur 55°
  - variables:
      tvl_55_watt: '{{ states(''sensor.solar_consumption_25_ww_wp'') }}'
  - wait_template: '{{ states(''sensor.luxtronik25_tvl'')|int >= 60 or states(''binary_sensor.luxtronik25_bup'')
      == ''off'' }}'
    continue_on_timeout: true
    alias: Warten bis Vorlauf Temperatur 60°
  - variables:
      tvl_60_watt: '{{ states(''sensor.solar_consumption_25_ww_wp'') }}'
  - if:
    - condition: state
      entity_id: binary_sensor.luxtronik25_bup
      state: 'on'
    then:
    - wait_for_trigger:
      - platform: state
        entity_id:
        - binary_sensor.luxtronik25_bup
        from: 'on'
        to: 'off'
      alias: Warten, bis die Brauchwasser Produktion endet
    alias: Warten, bis die Brauchwasser Produktion endet, sofern sie noch läuft
  - wait_for_trigger:
    - platform: state
      entity_id:
      - binary_sensor.luxtronik25_bup
      from: 'on'
      to: 'off'
    alias: Warten, bis die Brauchwasser Produktion endet
    enabled: false
  - variables:
      bup_ende: '{{ now() }}'
  - variables:
      pumpen_kw: '{{  (  ( 2300/1000/60* ( strptime(bup_ende, ''%Y-%m-%d %H:%M:%S.%f%z'').timestamp()  -
        strptime(bup_start, ''%Y-%m-%d %H:%M:%S.%f%z'').timestamp() )/60 )|round(1)  )
        }}'
    alias: Variablen pumpen_kw definieren (Hochrechnung kW Bedarf der Pumpen)
  - variables:
      btw_lowdiff: '{{ (( states(''input_number.luxtronik_25_ww_solltemperatur'')|float
        )-(btw_low)|float+(5/60*(btw_lowminute)|float))|round(1) }}'
    alias: Variablen btw_lowdiff definieren (Tiefste berechnete Temperatur)
  - variables:
      esti_kw_b: '{{  ((4400/4*3/1000)*1.16*btw_lowdiff)|round(1)  }}'
    alias: Variablen esti_kw_b definieren (Hochrechnung kW Bedarf btw und Umwälzvolumen)
  - service: input_number.set_value
    data:
      value: '{{ 0 if is_state(''sensor.heatpump_25_ww_power_consumption_helper'',
        ''unknown'')  else states(''sensor.heatpump_25_ww_power_consumption_helper'')|float}}'
    target:
      entity_id: input_number.heatpump_25_ww_power_consumption_helper
    alias: Speichere den Strom Verbrauch von dieser Ladung
  - wait_for_trigger:
    - platform: state
      entity_id:
      - sensor.gwf_25_all_ww_l_helper
    alias: Warten bis der Warmwasser l Utility Meter das nächste mal ändert
    timeout:
      hours: 1
      minutes: 0
      seconds: 0
      milliseconds: 0
  - service: input_number.set_value
    data:
      value: '{{ states(''sensor.gwf_25_all_ww_l_helper'')|float }}'
    target:
      entity_id: input_number.gwf_25_ww_l_helper
    alias: Speichere den Warmwasserverbrauch seit der letzten Ladung
  - variables:
      esti_kw_a: '{{  ((states(''input_number.gwf_25_ww_l_helper'')|float)/1000*1.16*
        (states(''input_number.luxtronik_25_ww_solltemperatur'')|float-15))|round(1)  }}'
    alias: Variablen esti_kw_a definieren (Hochrechnung kW Bedarf anhand l Verbrauch
      GWF)
  - service: utility_meter.calibrate
    data:
      value: '0'
    target:
      entity_id:
      - sensor.gwf_25_all_ww_l_helper
    alias: Zurücksetzen der Utility Meter für Warmwasserverbrauch
  - service: input_number.set_value
    data:
      value: '{{ states(''sensor.gwf_25_hz_ug_kw_helper'')|float }}'
    target:
      entity_id: input_number.gwf_25_hz_ug_kw_helper
    alias: Speichere den Kilowatt Verbrauch von dieser Ladung
  - service: input_number.set_value
    data:
      value: '{{ esti_kw_a|float }}'
    target:
      entity_id: input_number.bwm25_variable_esti_kw_a
  - service: input_number.set_value
    data:
      value: '{{ esti_kw_b|float }}'
    target:
      entity_id: input_number.bwm25_variable_esti_kw_b
  - service: input_number.set_value
    data:
      value: '{{ tvl_50_watt|float }}'
    target:
      entity_id: input_number.bwm25_variable_tvl_50_watt
  - service: input_number.set_value
    data:
      value: '{{ tvl_55_watt|float }}'
    target:
      entity_id: input_number.bwm25_variable_tvl_55_watt
  - service: input_number.set_value
    data:
      value: '{{ tvl_60_watt|float }}'
    target:
      entity_id: input_number.bwm25_variable_tvl_60_watt
  - variables:
      gwf_ende: '{{ now() }}'
  - service: notify.administrator_rotseepark
    data:
      title: 'HA-Info Heatpump 25: Die Boiler Ladung ist beendet'
      message: "*** Ablaufzeiten ***\nBUP Start   - {{ bup_start }} \nBTW Low End
        - {{ btw_low_ende }} \nBUP End     - {{ bup_ende }} \nGWF End     - {{ gwf_ende
        }} \n*** Low Temperatur ermitteln ***\nBTW Low     - {{ btw_low }} Tiefpunkt
        Brauchwasser Temperatur\nBTW LowT    - {{ btw_lowtime }} Zeitdauer von Start
        bis Tiefpunkt\nBTW LowM    - {{ btw_lowminute }} Minuten von Start bis Tiefpunkt\nBTW
        LowDiff - {{ btw_lowdiff }} Differenz Tiefpunkt BW zu Soll\n*** Stromverbrauch
        Wärmepumpe ***\nStrom kW    - {{ states('input_number.heatpump_25_ww_power_consumption_helper')|round(1)
        }} kW Verbrauch ganze Anlage\nPumpen kW   - {{ pumpen_kw }} System kW durch
        Pumpen\nNetto kW WP - {{ (states('input_number.heatpump_25_ww_power_consumption_helper')
        |float - pumpen_kw)|round(1) }} Netto kW von Wärmepumpe\n50° TVL W   - {{
        tvl_50_watt }}\n55° TVL W   - {{ tvl_55_watt }}\n60° TVL W   - {{ tvl_60_watt
        }}\n*** Warmwasser Verbrauch ***\nl WW       - {{ states('input_number.gwf_25_ww_l_helper')
        }} l seit letzter Ladung\n*** kW Hochrechnungen und GWF Zähler VL/RL ***\nEsti
        kW A   - {{ esti_kw_a }} kW anhand l Verbrauch\nEsti kW B   - {{ esti_kw_b
        }} kW anhand btw low und Umwälzvolumen\nVL/RL kW    - {{ states('input_number.gwf_25_hz_ug_kw_helper')
        }} kW Energie im VL/RL entnommen\n*** Errechnete Wirkungsgrade ***\nWG Platte
        \  - {{ (((esti_kw_a + esti_kw_b)/2)/ states('input_number.gwf_25_hz_ug_kw_helper')|float*100)|round(0)
        }}% Wirkungsgrad Plattentauscher\nWG Faktor   - {{ ((states('input_number.gwf_25_hz_ug_kw_helper')|float)
        /(states('input_number.heatpump_25_ww_power_consumption_helper')|float  -
        pumpen_kw))|round(1) }} Faktor Wärme VL/RL versus kW Verdichter"
  mode: single
- id: '1694404354860'
  alias: Monitoring Heatpump 19 - Brauchwasser Erzeugung Energie Verbrauch
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.luxtronik19_bup
    from: 'off'
    to: 'on'
  condition: []
  action:
  - variables:
      bup_start: '{{ now() }}'
  - service: utility_meter.calibrate
    data:
      value: '0'
    target:
      entity_id:
      - sensor.heatpump_19_ww_power_consumption_helper
      - sensor.gwf_19_hz_ug_kw_helper
    alias: Zurücksetzen der Utility Meter für Warmwasser Erzeugung kW und Stromverbrauch
  - delay:
      hours: 0
      minutes: 2
      seconds: 0
      milliseconds: 0
  - service: input_number.set_value
    data:
      value: '{{ states(''sensor.luxtronik19_tbw'')|float }}'
    target:
      entity_id: input_number.luxtronik_19_tbw_degc_helper
    alias: Speichere die aktuelle Brauchwasser Temperatur
  - repeat:
      while:
      - condition: template
        value_template: '{{ states(''sensor.luxtronik19_tbw'') >= states(''input_number.luxtronik_19_tbw_degc_helper'')
          }}'
        alias: Brauchwasser Temperatur >= gespeicherte Temperatur
      sequence:
      - service: input_number.set_value
        data:
          value: '{{ states(''sensor.luxtronik19_tbw'')|float }}'
        target:
          entity_id: input_number.luxtronik_19_tbw_degc_helper
        alias: Speichere die aktuelle Brauchwasser Temperatur
      - wait_for_trigger:
        - platform: state
          entity_id:
          - sensor.luxtronik19_tbw
        alias: Warten, bis Brauchwasser Temperatur ändert
    alias: Warten, solange die Brauchwasser Temperatur steigend ist
  - repeat:
      while:
      - condition: template
        value_template: '{{ states(''sensor.luxtronik19_tbw'') <= states(''input_number.luxtronik_19_tbw_degc_helper'')
          }}'
        alias: Brauchwasser Temperatur <= gespeicherte Temperatur
      sequence:
      - service: input_number.set_value
        data:
          value: '{{ states(''sensor.luxtronik19_tbw'')|float }}'
        target:
          entity_id: input_number.luxtronik_19_tbw_degc_helper
        alias: Speichere die aktuelle Brauchwasser Temperatur
      - wait_for_trigger:
        - platform: state
          entity_id:
          - sensor.luxtronik19_tbw
        alias: Warten, bis Brauchwasser Temperatur ändert
    alias: Warten, solange die Brauchwasser Temperatur sinkend ist
  - variables:
      btw_low_ende: '{{ now() }}'
      btw_low: '{{ states(''sensor.luxtronik19_tbw'') }}'
      btw_lowtime: '{{ now() - strptime(bup_start, ''%Y-%m-%d %H:%M:%S.%f%z'') }}'
      btw_lowminute: '{{ ((now().timestamp() - strptime(bup_start, ''%Y-%m-%d %H:%M:%S.%f%z'').timestamp())/60)|round(0)
        }}'
  - wait_for_trigger:
    - platform: numeric_state
      entity_id: sensor.luxtronik19_tvl
      above: 49.9
    alias: Warten bis Vorlauf Temperatur 50°
  - variables:
      tvl_50_watt: '{{ states(''sensor.solar_consumption_19_ww_wp'') }}'
  - wait_for_trigger:
    - platform: numeric_state
      entity_id: sensor.luxtronik19_tvl
      above: 54.9
    alias: Warten bis Vorlauf Temperatur 55°
  - variables:
      tvl_55_watt: '{{ states(''sensor.solar_consumption_19_ww_wp'') }}'
  - wait_template: '{{ states(''sensor.luxtronik19_tvl'')|int >= 60 or states(''binary_sensor.luxtronik19_bup'')
      == ''off'' }}'
    continue_on_timeout: true
    alias: Warten bis Vorlauf Temperatur 60°
  - variables:
      tvl_60_watt: '{{ states(''sensor.solar_consumption_19_ww_wp'') }}'
  - if:
    - condition: state
      entity_id: binary_sensor.luxtronik19_bup
      state: 'on'
    then:
    - wait_for_trigger:
      - platform: state
        entity_id:
        - binary_sensor.luxtronik19_bup
        from: 'on'
        to: 'off'
      alias: Warten, bis die Brauchwasser Produktion endet
    alias: Warten, bis die Brauchwasser Produktion endet, sofern sie noch läuft
  - wait_for_trigger:
    - platform: state
      entity_id:
      - binary_sensor.luxtronik19_bup
      from: 'on'
      to: 'off'
    alias: Warten, bis die Brauchwasser Produktion endet
    enabled: false
  - variables:
      bup_ende: '{{ now() }}'
  - variables:
      pumpen_kw: '{{  (  ( 2300/1000/60* ( strptime(bup_ende, ''%Y-%m-%d %H:%M:%S.%f%z'').timestamp()  -
        strptime(bup_start, ''%Y-%m-%d %H:%M:%S.%f%z'').timestamp() )/60 )|round(1)  )
        }}'
    alias: Variablen pumpen_kw definieren (Hochrechnung kW Bedarf der Pumpen)
  - variables:
      btw_lowdiff: '{{ (( states(''input_number.luxtronik_19_ww_solltemperatur'')|float
        )-(btw_low)|float+(5/60*(btw_lowminute)|float))|round(1) }}'
    alias: Variablen btw_lowdiff definieren (Tiefste berechnete Temperatur)
  - variables:
      esti_kw_b: '{{  ((4400/4*3/1000)*1.16*btw_lowdiff)|round(1)  }}'
    alias: Variablen esti_kw_b definieren (Hochrechnung kW Bedarf btw und Umwälzvolumen)
  - service: input_number.set_value
    data:
      value: '{{ 0 if is_state(''sensor.heatpump_19_ww_power_consumption_helper'',
        ''unknown'')  else states(''sensor.heatpump_19_ww_power_consumption_helper'')|float}}'
    target:
      entity_id: input_number.heatpump_19_ww_power_consumption_helper
    alias: Speichere den Strom Verbrauch von dieser Ladung
  - wait_for_trigger:
    - platform: state
      entity_id:
      - sensor.gwf_19_all_ww_l_helper
    alias: Warten bis der Warmwasser l Utility Meter das nächste mal ändert
    timeout:
      hours: 1
      minutes: 0
      seconds: 0
      milliseconds: 0
  - service: input_number.set_value
    data:
      value: '{{ states(''sensor.gwf_19_all_ww_l_helper'')|float }}'
    target:
      entity_id: input_number.gwf_19_ww_l_helper
    alias: Speichere den Warmwasserverbrauch seit der letzten Ladung
  - variables:
      esti_kw_a: '{{  ((states(''input_number.gwf_19_ww_l_helper'')|float)*1.16* (states(''input_number.luxtronik_19_ww_solltemperatur'')|float-15))|round(1)  }}'
    alias: Variablen esti_kw_a definieren (Hochrechnung kW Bedarf anhand l Verbrauch
      GWF)
  - service: utility_meter.calibrate
    data:
      value: '0'
    target:
      entity_id:
      - sensor.gwf_19_all_ww_l_helper
    alias: Zurücksetzen der Utility Meter für Warmwasserverbrauch
  - service: input_number.set_value
    data:
      value: '{{ states(''sensor.gwf_19_hz_ug_kw_helper'')|float }}'
    target:
      entity_id: input_number.gwf_19_hz_ug_kw_helper
    alias: Speichere den Kilowatt Verbrauch von dieser Ladung
  - service: input_number.set_value
    data:
      value: '{{ esti_kw_a|float }}'
    target:
      entity_id: input_number.bwm19_variable_esti_kw_a
  - service: input_number.set_value
    data:
      value: '{{ esti_kw_b|float }}'
    target:
      entity_id: input_number.bwm19_variable_esti_kw_b
  - service: input_number.set_value
    data:
      value: '{{ tvl_50_watt|float }}'
    target:
      entity_id: input_number.bwm19_variable_tvl_50_watt
  - service: input_number.set_value
    data:
      value: '{{ tvl_55_watt|float }}'
    target:
      entity_id: input_number.bwm19_variable_tvl_55_watt
  - service: input_number.set_value
    data:
      value: '{{ tvl_60_watt|float }}'
    target:
      entity_id: input_number.bwm19_variable_tvl_60_watt
  - variables:
      gwf_ende: '{{ now() }}'
  - service: notify.administrator_rotseepark
    data:
      title: 'HA-Info Heatpump 19: Die Boiler Ladung ist beendet'
      message: "*** Ablaufzeiten ***\nBUP Start   - {{ bup_start }} \nBTW Low End
        - {{ btw_low_ende }} \nBUP End     - {{ bup_ende }} \nGWF End     - {{ gwf_ende
        }} \n*** Low Temperatur ermitteln ***\nBTW Low     - {{ btw_low }} Tiefpunkt
        Brauchwasser Temperatur\nBTW LowT    - {{ btw_lowtime }} Zeitdauer von Start
        bis Tiefpunkt\nBTW LowM    - {{ btw_lowminute }} Minuten von Start bis Tiefpunkt\nBTW
        LowDiff - {{ btw_lowdiff }} Differenz Tiefpunkt BW zu Soll\n*** Stromverbrauch
        Wärmepumpe ***\nStrom kW    - {{ states('input_number.heatpump_19_ww_power_consumption_helper')|round(1)
        }} kW Verbrauch ganze Anlage\nPumpen kW   - {{ pumpen_kw }} System kW durch
        Pumpen\nNetto kW WP - {{ (states('input_number.heatpump_19_ww_power_consumption_helper')
        |float - pumpen_kw)|round(1) }} Netto kW von Wärmepumpe\n50° TVL W   - {{
        tvl_50_watt }}\n55° TVL W   - {{ tvl_55_watt }}\n60° TVL W   - {{ tvl_60_watt
        }}\n*** Warmwasser Verbrauch ***\nl WW       - {{ states('input_number.gwf_19_ww_l_helper')
        }} l seit letzter Ladung\n*** kW Hochrechnungen und GWF Zähler VL/RL ***\nEsti
        kW A   - {{ esti_kw_a }} kW anhand l Verbrauch\nEsti kW B   - {{ esti_kw_b
        }} kW anhand btw low und Umwälzvolumen\nVL/RL kW    - {{ states('input_number.gwf_19_hz_ug_kw_helper')
        }} kW Energie im VL/RL entnommen\n*** Errechnete Wirkungsgrade ***\nWG Platte
        \  - {{ (((esti_kw_a + esti_kw_b)/2)/ states('input_number.gwf_19_hz_ug_kw_helper')|float*100)|round(0)
        }}% Wirkungsgrad Plattentauscher\nWG Faktor   - {{ ((states('input_number.gwf_19_hz_ug_kw_helper')|float)
        /(states('input_number.heatpump_19_ww_power_consumption_helper')|float  -
        pumpen_kw))|round(1) }} Faktor Wärme VL/RL versus kW Verdichter"
  mode: single
- id: '1694404401938'
  alias: Monitoring Heatpump 23 - Brauchwasser Erzeugung Energie Verbrauch
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.luxtronik23_bup
    from: 'off'
    to: 'on'
  condition: []
  action:
  - variables:
      bup_start: '{{ now() }}'
  - service: utility_meter.calibrate
    data:
      value: '0'
    target:
      entity_id:
      - sensor.heatpump_23_ww_power_consumption_helper
      - sensor.gwf_23_hz_ug_kw_helper
    alias: Zurücksetzen der Utility Meter für Warmwasser Erzeugung kW und Stromverbrauch
  - delay:
      hours: 0
      minutes: 2
      seconds: 0
      milliseconds: 0
  - service: input_number.set_value
    data:
      value: '{{ states(''sensor.luxtronik23_tbw'')|float }}'
    target:
      entity_id: input_number.luxtronik_23_tbw_degc_helper
    alias: Speichere die aktuelle Brauchwasser Temperatur
  - repeat:
      while:
      - condition: template
        value_template: '{{ states(''sensor.luxtronik23_tbw'') >= states(''input_number.luxtronik_23_tbw_degc_helper'')
          }}'
        alias: Brauchwasser Temperatur >= gespeicherte Temperatur
      sequence:
      - service: input_number.set_value
        data:
          value: '{{ states(''sensor.luxtronik23_tbw'')|float }}'
        target:
          entity_id: input_number.luxtronik_23_tbw_degc_helper
        alias: Speichere die aktuelle Brauchwasser Temperatur
      - wait_for_trigger:
        - platform: state
          entity_id:
          - sensor.luxtronik23_tbw
        alias: Warten, bis Brauchwasser Temperatur ändert
    alias: Warten, solange die Brauchwasser Temperatur steigend ist
  - repeat:
      while:
      - condition: template
        value_template: '{{ states(''sensor.luxtronik23_tbw'') <= states(''input_number.luxtronik_23_tbw_degc_helper'')
          }}'
        alias: Brauchwasser Temperatur <= gespeicherte Temperatur
      sequence:
      - service: input_number.set_value
        data:
          value: '{{ states(''sensor.luxtronik23_tbw'')|float }}'
        target:
          entity_id: input_number.luxtronik_23_tbw_degc_helper
        alias: Speichere die aktuelle Brauchwasser Temperatur
      - wait_for_trigger:
        - platform: state
          entity_id:
          - sensor.luxtronik23_tbw
        alias: Warten, bis Brauchwasser Temperatur ändert
    alias: Warten, solange die Brauchwasser Temperatur sinkend ist
  - variables:
      btw_low_ende: '{{ now() }}'
      btw_low: '{{ states(''sensor.luxtronik23_tbw'') }}'
      btw_lowtime: '{{ now() - strptime(bup_start, ''%Y-%m-%d %H:%M:%S.%f%z'') }}'
      btw_lowminute: '{{ ((now().timestamp() - strptime(bup_start, ''%Y-%m-%d %H:%M:%S.%f%z'').timestamp())/60)|round(0)
        }}'
  - wait_for_trigger:
    - platform: numeric_state
      entity_id: sensor.luxtronik23_tvl
      above: 49.9
    alias: Warten bis Vorlauf Temperatur 50°
  - variables:
      tvl_50_watt: '{{ states(''sensor.solar_consumption_23_ww_wp'') }}'
  - wait_for_trigger:
    - platform: numeric_state
      entity_id: sensor.luxtronik23_tvl
      above: 54.9
    alias: Warten bis Vorlauf Temperatur 55°
  - variables:
      tvl_55_watt: '{{ states(''sensor.solar_consumption_23_ww_wp'') }}'
  - wait_template: '{{ states(''sensor.luxtronik23_tvl'')|int >= 60 or states(''binary_sensor.luxtronik23_bup'')
      == ''off'' }}'
    continue_on_timeout: true
    alias: Warten bis Vorlauf Temperatur 60°
  - variables:
      tvl_60_watt: '{{ states(''sensor.solar_consumption_23_ww_wp'') }}'
  - if:
    - condition: state
      entity_id: binary_sensor.luxtronik23_bup
      state: 'on'
    then:
    - wait_for_trigger:
      - platform: state
        entity_id:
        - binary_sensor.luxtronik23_bup
        from: 'on'
        to: 'off'
      alias: Warten, bis die Brauchwasser Produktion endet
    alias: Warten, bis die Brauchwasser Produktion endet, sofern sie noch läuft
  - wait_for_trigger:
    - platform: state
      entity_id:
      - binary_sensor.luxtronik23_bup
      from: 'on'
      to: 'off'
    alias: Warten, bis die Brauchwasser Produktion endet
    enabled: false
  - variables:
      bup_ende: '{{ now() }}'
  - variables:
      pumpen_kw: '{{  (  ( 2300/1000/60* ( strptime(bup_ende, ''%Y-%m-%d %H:%M:%S.%f%z'').timestamp()  -
        strptime(bup_start, ''%Y-%m-%d %H:%M:%S.%f%z'').timestamp() )/60 )|round(1)  )
        }}'
    alias: Variablen pumpen_kw definieren (Hochrechnung kW Bedarf der Pumpen)
  - variables:
      btw_lowdiff: '{{ (( states(''input_number.luxtronik_23_ww_solltemperatur'')|float
        )-(btw_low)|float+(5/60*(btw_lowminute)|float))|round(1) }}'
    alias: Variablen btw_lowdiff definieren (Tiefste berechnete Temperatur)
  - variables:
      esti_kw_b: '{{  ((4400/4*3/1000)*1.16*btw_lowdiff)|round(1)  }}'
    alias: Variablen esti_kw_b definieren (Hochrechnung kW Bedarf btw und Umwälzvolumen)
  - service: input_number.set_value
    data:
      value: '{{ 0 if is_state(''sensor.heatpump_23_ww_power_consumption_helper'',
        ''unknown'')  else states(''sensor.heatpump_23_ww_power_consumption_helper'')|float}}'
    target:
      entity_id: input_number.heatpump_23_ww_power_consumption_helper
    alias: Speichere den Strom Verbrauch von dieser Ladung
  - wait_for_trigger:
    - platform: state
      entity_id:
      - sensor.gwf_23_all_ww_l_helper
    alias: Warten bis der Warmwasser l Utility Meter das nächste mal ändert
    timeout:
      hours: 1
      minutes: 0
      seconds: 0
      milliseconds: 0
  - service: input_number.set_value
    data:
      value: '{{ states(''sensor.gwf_23_all_ww_l_helper'')|float }}'
    target:
      entity_id: input_number.gwf_23_ww_l_helper
    alias: Speichere den Warmwasserverbrauch seit der letzten Ladung
  - variables:
      esti_kw_a: '{{  ((states(''input_number.gwf_23_ww_l_helper'')|float)*1.16* (states(''input_number.luxtronik_23_ww_solltemperatur'')|float-15))|round(1)  }}'
    alias: Variablen esti_kw_a definieren (Hochrechnung kW Bedarf anhand l Verbrauch
      GWF)
  - service: utility_meter.calibrate
    data:
      value: '0'
    target:
      entity_id:
      - sensor.gwf_23_all_ww_l_helper
    alias: Zurücksetzen der Utility Meter für Warmwasserverbrauch
  - service: input_number.set_value
    data:
      value: '{{ states(''sensor.gwf_23_hz_ug_kw_helper'')|float }}'
    target:
      entity_id: input_number.gwf_23_hz_ug_kw_helper
    alias: Speichere den Kilowatt Verbrauch von dieser Ladung
  - service: input_number.set_value
    data:
      value: '{{ esti_kw_a|float }}'
    target:
      entity_id: input_number.bwm23_variable_esti_kw_a
  - service: input_number.set_value
    data:
      value: '{{ esti_kw_b|float }}'
    target:
      entity_id: input_number.bwm23_variable_esti_kw_b
  - service: input_number.set_value
    data:
      value: '{{ tvl_50_watt|float }}'
    target:
      entity_id: input_number.bwm23_variable_tvl_50_watt
  - service: input_number.set_value
    data:
      value: '{{ tvl_55_watt|float }}'
    target:
      entity_id: input_number.bwm23_variable_tvl_55_watt
  - service: input_number.set_value
    data:
      value: '{{ tvl_60_watt|float }}'
    target:
      entity_id: input_number.bwm23_variable_tvl_60_watt
  - variables:
      gwf_ende: '{{ now() }}'
  - service: notify.administrator_rotseepark
    data:
      title: 'HA-Info Heatpump 23: Die Boiler Ladung ist beendet'
      message: "*** Ablaufzeiten ***\nBUP Start   - {{ bup_start }} \nBTW Low End
        - {{ btw_low_ende }} \nBUP End     - {{ bup_ende }} \nGWF End     - {{ gwf_ende
        }} \n*** Low Temperatur ermitteln ***\nBTW Low     - {{ btw_low }} Tiefpunkt
        Brauchwasser Temperatur\nBTW LowT    - {{ btw_lowtime }} Zeitdauer von Start
        bis Tiefpunkt\nBTW LowM    - {{ btw_lowminute }} Minuten von Start bis Tiefpunkt\nBTW
        LowDiff - {{ btw_lowdiff }} Differenz Tiefpunkt BW zu Soll\n*** Stromverbrauch
        Wärmepumpe ***\nStrom kW    - {{ states('input_number.heatpump_23_ww_power_consumption_helper')|round(1)
        }} kW Verbrauch ganze Anlage\nPumpen kW   - {{ pumpen_kw }} System kW durch
        Pumpen\nNetto kW WP - {{ (states('input_number.heatpump_23_ww_power_consumption_helper')
        |float - pumpen_kw)|round(1) }} Netto kW von Wärmepumpe\n50° TVL W   - {{
        tvl_50_watt }}\n55° TVL W   - {{ tvl_55_watt }}\n60° TVL W   - {{ tvl_60_watt
        }}\n*** Warmwasser Verbrauch ***\nl WW       - {{ states('input_number.gwf_23_ww_l_helper')
        }} l seit letzter Ladung\n*** kW Hochrechnungen und GWF Zähler VL/RL ***\nEsti
        kW A   - {{ esti_kw_a }} kW anhand l Verbrauch\nEsti kW B   - {{ esti_kw_b
        }} kW anhand btw low und Umwälzvolumen\nVL/RL kW    - {{ states('input_number.gwf_23_hz_ug_kw_helper')
        }} kW Energie im VL/RL entnommen\n*** Errechnete Wirkungsgrade ***\nWG Platte
        \  - {{ (((esti_kw_a + esti_kw_b)/2)/ states('input_number.gwf_23_hz_ug_kw_helper')|float*100)|round(0)
        }}% Wirkungsgrad Plattentauscher\nWG Faktor   - {{ ((states('input_number.gwf_23_hz_ug_kw_helper')|float)
        /(states('input_number.heatpump_23_ww_power_consumption_helper')|float  -
        pumpen_kw))|round(1) }} Faktor Wärme VL/RL versus kW Verdichter"
  mode: single
