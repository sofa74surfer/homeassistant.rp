platform: template
sensors:

# ####### ####################### #######
# ####### Forecast Sensoren Solar #######
# ####### ####################### #######

#
# Einzelsensoren Today Remaining mit "unavailable" Schutz
#
  forecast_solar_production_today_remaining_1:
    friendly_name: "Forecast Solar Production Remaining Today kW 1"
    value_template: "{{ states('forecast_solar_production_today_remaining_1') if states('sensor.energy_production_today_remaining')|safe == 'unavailable' else states('sensor.energy_production_today_remaining')|float }}"
    device_class: power
    unit_of_measurement: "kW"
    attribute_templates:
      last_updated:  "{{ now().day|string+'.'+now().month|string+'.'+now().year|string+' '+now().hour|string+':'+now().minute|string }}"
  forecast_solar_production_today_remaining_2:
    friendly_name: "Forecast Solar Production Remaining Today kW 2"
    value_template: "{{ states('forecast_solar_production_today_remaining_2') if states('sensor.energy_production_today_remaining_2')|safe == 'unavailable' else states('sensor.energy_production_today_remaining_2')|float }}"
    device_class: power
    unit_of_measurement: "kW"
    attribute_templates:
      last_updated:  "{{ now().day|string+'.'+now().month|string+'.'+now().year|string+' '+now().hour|string+':'+now().minute|string }}"
  forecast_solar_production_today_remaining_3:
    friendly_name: "Forecast Solar Production Remaining Today kW 3"
    value_template: "{{ states('forecast_solar_production_today_remaining_3') if states('sensor.energy_production_today_remaining_3')|safe == 'unavailable' else states('sensor.energy_production_today_remaining_3')|float }}"
    device_class: power
    unit_of_measurement: "kW"
    attribute_templates:
      last_updated:  "{{ now().day|string+'.'+now().month|string+'.'+now().year|string+' '+now().hour|string+':'+now().minute|string }}"
  forecast_solar_production_today_remaining_4:
    friendly_name: "Forecast Solar Production Remaining Today kW 4"
    value_template: "{{ states('forecast_solar_production_today_remaining_4') if states('sensor.energy_production_today_remaining_4')|safe == 'unavailable' else states('sensor.energy_production_today_remaining_4')|float }}"
    device_class: power
    unit_of_measurement: "kW"
    attribute_templates:
      last_updated:  "{{ now().day|string+'.'+now().month|string+'.'+now().year|string+' '+now().hour|string+':'+now().minute|string }}"
  forecast_solar_production_today_remaining_5:
    friendly_name: "Forecast Solar Production Remaining Today kW 5"
    value_template: "{{ states('forecast_solar_production_today_remaining_5') if states('sensor.energy_production_today_remaining_5')|safe == 'unavailable' else states('sensor.energy_production_today_remaining_5')|float }}"
    device_class: power
    unit_of_measurement: "kW"
    attribute_templates:
      last_updated:  "{{ now().day|string+'.'+now().month|string+'.'+now().year|string+' '+now().hour|string+':'+now().minute|string }}"
  forecast_solar_production_today_remaining_6:
    friendly_name: "Forecast Solar Production Remaining Today kW 6"
    value_template: "{{ states('forecast_solar_production_today_remaining_6') if states('sensor.energy_production_today_remaining_6')|safe == 'unavailable' else states('sensor.energy_production_today_remaining_6')|float }}"
    device_class: power
    unit_of_measurement: "kW"
    attribute_templates:
      last_updated:  "{{ now().day|string+'.'+now().month|string+'.'+now().year|string+' '+now().hour|string+':'+now().minute|string }}"
  forecast_solar_production_today_remaining_7:
    friendly_name: "Forecast Solar Production Remaining Today kW 7"
    value_template: "{{ states('forecast_solar_production_today_remaining_7') if states('sensor.energy_production_today_remaining_7')|safe == 'unavailable' else states('sensor.energy_production_today_remaining_7')|float }}"
    device_class: power
    unit_of_measurement: "kW"
    attribute_templates:
      last_updated:  "{{ now().day|string+'.'+now().month|string+'.'+now().year|string+' '+now().hour|string+':'+now().minute|string }}"
  forecast_solar_production_today_remaining_8:
    friendly_name: "Forecast Solar Production Remaining Today kW 8"
    value_template: "{{ states('forecast_solar_production_today_remaining_8') if states('sensor.energy_production_today_remaining_8')|safe == 'unavailable' else states('sensor.energy_production_today_remaining_8')|float }}"
    device_class: power
    unit_of_measurement: "kW"
    attribute_templates:
      last_updated:  "{{ now().day|string+'.'+now().month|string+'.'+now().year|string+' '+now().hour|string+':'+now().minute|string }}"
