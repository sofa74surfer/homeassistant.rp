# ####### ######################### #######
# ####### Wattage Sensoren Heatpump #######
# ####### ######################### #######

- sensor:
    - name: "Heatpump Power"
      # friendly_name: "Heatpump W"
      unique_id: template.sensor_heatpump_power
      device_class: power
      unit_of_measurement: "W"
      state: >
        {{ (
          (0 if states('sensor.solar_consumption_19') == 'unknown' 
             or states('sensor.solar_consumption_19') == 'unavailable'
             else states('sensor.solar_consumption_19')|float) +
          (0 if states('sensor.solar_consumption_21') == 'unknown' 
             or states('sensor.solar_consumption_21') == 'unavailable'
             else states('sensor.solar_consumption_21')|float) +
          (0 if states('sensor.solar_consumption_23') == 'unknown' 
             or states('sensor.solar_consumption_23') == 'unavailable'
             else states('sensor.solar_consumption_23')|float) +
          (0 if states('sensor.solar_consumption_25') == 'unknown' 
             or states('sensor.solar_consumption_25') == 'unavailable'
             else states('sensor.solar_consumption_25')|float) 
        )|round(0)
        }}
      attributes:
        last_updated: "{{ now().strftime('%d.%m.%Y %H:%M') }}"

    - name: "Heatpump Power Ww"
      # friendly_name: "Heatpump WW W"
      unique_id: template.sensor_heatpump_power_ww
      device_class: power
      unit_of_measurement: "W"
      state: >
        {{ (
          (0 if states('sensor.solar_consumption_19_ww') == 'unknown' 
             or states('sensor.solar_consumption_19_ww') == 'unavailable'
             else states('sensor.solar_consumption_19_ww')|float) +
          (0 if states('sensor.solar_consumption_21_ww') == 'unknown' 
             or states('sensor.solar_consumption_21_ww') == 'unavailable'
             else states('sensor.solar_consumption_21_ww')|float) +
          (0 if states('sensor.solar_consumption_23_ww') == 'unknown' 
             or states('sensor.solar_consumption_23_ww') == 'unavailable'
             else states('sensor.solar_consumption_23_ww')|float) +
          (0 if states('sensor.solar_consumption_25_ww') == 'unknown' 
             or states('sensor.solar_consumption_25_ww') == 'unavailable'
             else states('sensor.solar_consumption_25_ww')|float) 
        )|round(0)
        }}
      attributes:
        last_updated: "{{ now().strftime('%d.%m.%Y %H:%M') }}"

    - name: "Heatpump Power Ww Wp"
      # friendly_name: "Heatpump WW WP W"
      unique_id: template.sensor_heatpump_power_ww_wp
      device_class: power
      unit_of_measurement: "W"
      state: >
        {{ (
          (0 if states('sensor.solar_consumption_19_ww_wp') == 'unknown' 
             or states('sensor.solar_consumption_19_ww_wp') == 'unavailable'
             else states('sensor.solar_consumption_19_ww_wp')|float) +
          (0 if states('sensor.solar_consumption_21_ww_wp') == 'unknown' 
             or states('sensor.solar_consumption_21_ww_wp') == 'unavailable'
             else states('sensor.solar_consumption_21_ww_wp')|float) +
          (0 if states('sensor.solar_consumption_23_ww_wp') == 'unknown' 
             or states('sensor.solar_consumption_23_ww_wp') == 'unavailable'
             else states('sensor.solar_consumption_23_ww_wp')|float) +
          (0 if states('sensor.solar_consumption_25_ww_wp') == 'unknown' 
             or states('sensor.solar_consumption_25_ww_wp') == 'unavailable'
             else states('sensor.solar_consumption_25_ww_wp')|float) 
        )|round(0)
        }}
      attributes:
        last_updated: "{{ now().strftime('%d.%m.%Y %H:%M') }}"

    - name: "Heatpump Power Ww El"
      # friendly_name: "Heatpump WW EL W"
      unique_id: template.sensor_heatpump_power_ww_el
      device_class: power
      unit_of_measurement: "W"
      state: >
        {{ (
          (0 if states('sensor.solar_consumption_19_ww_el') == 'unknown' 
             or states('sensor.solar_consumption_19_ww_el') == 'unavailable'
             else states('sensor.solar_consumption_19_ww_el')|float) +
          (0 if states('sensor.solar_consumption_21_ww_el') == 'unknown' 
             or states('sensor.solar_consumption_21_ww_el') == 'unavailable'
             else states('sensor.solar_consumption_21_ww_el')|float) +
          (0 if states('sensor.solar_consumption_23_ww_el') == 'unknown' 
             or states('sensor.solar_consumption_23_ww_el') == 'unavailable'
             else states('sensor.solar_consumption_23_ww_el')|float) +
          (0 if states('sensor.solar_consumption_25_ww_el') == 'unknown' 
             or states('sensor.solar_consumption_25_ww_el') == 'unavailable'
             else states('sensor.solar_consumption_25_ww_el')|float) 
        )|round(0)
        }}
      attributes:
        last_updated: "{{ now().strftime('%d.%m.%Y %H:%M') }}"

    - name: "Heatpump Power Hz"
      # friendly_name: "Heatpump HZ W"
      unique_id: template.sensor_heatpump_power_hz
      device_class: power
      unit_of_measurement: "W"
      state: >
        {{ (
          (0 if states('sensor.solar_consumption_19_hz') == 'unknown' 
             or states('sensor.solar_consumption_19_hz') == 'unavailable'
             else states('sensor.solar_consumption_19_hz')|float) +
          (0 if states('sensor.solar_consumption_21_hz') == 'unknown' 
             or states('sensor.solar_consumption_21_hz') == 'unavailable'
             else states('sensor.solar_consumption_21_hz')|float) +
          (0 if states('sensor.solar_consumption_23_hz') == 'unknown' 
             or states('sensor.solar_consumption_23_hz') == 'unavailable'
             else states('sensor.solar_consumption_23_hz')|float) +
          (0 if states('sensor.solar_consumption_25_hz') == 'unknown' 
             or states('sensor.solar_consumption_25_hz') == 'unavailable'
             else states('sensor.solar_consumption_25_hz')|float) 
        )|round(0)
        }}
      attributes:
        last_updated: "{{ now().strftime('%d.%m.%Y %H:%M') }}"

    - name: "Heatpump Power Co"
      # friendly_name: "Heatpump co W"
      unique_id: template.sensor_heatpump_power_co
      device_class: power
      unit_of_measurement: "W"
      state: >
        {{ (
          (0 if states('sensor.solar_consumption_19_co') == 'unknown' 
             or states('sensor.solar_consumption_19_co') == 'unavailable'
             else states('sensor.solar_consumption_19_co')|float) +
          (0 if states('sensor.solar_consumption_21_co') == 'unknown' 
             or states('sensor.solar_consumption_21_co') == 'unavailable'
             else states('sensor.solar_consumption_21_co')|float) +
          (0 if states('sensor.solar_consumption_23_co') == 'unknown' 
             or states('sensor.solar_consumption_23_co') == 'unavailable'
             else states('sensor.solar_consumption_23_co')|float) +
          (0 if states('sensor.solar_consumption_25_co') == 'unknown' 
             or states('sensor.solar_consumption_25_co') == 'unavailable'
             else states('sensor.solar_consumption_25_co')|float) 
        )|round(0)
        }}
      attributes:
        last_updated: "{{ now().strftime('%d.%m.%Y %H:%M') }}"

    - name: "Heatpump Power Standby"
      # friendly_name: "Heatpump Standby W"
      unique_id: template.sensor_heatpump_power_standby
      device_class: power
      unit_of_measurement: "W"
      state: >
        {{ (
          (0 if states('sensor.solar_consumption_19_standby') == 'unknown' 
             or states('sensor.solar_consumption_19_standby') == 'unavailable'
             else states('sensor.solar_consumption_19_standby')|float) +
          (0 if states('sensor.solar_consumption_21_standby') == 'unknown' 
             or states('sensor.solar_consumption_21_standby') == 'unavailable'
             else states('sensor.solar_consumption_21_standby')|float) +
          (0 if states('sensor.solar_consumption_23_standby') == 'unknown' 
             or states('sensor.solar_consumption_23_standby') == 'unavailable'
             else states('sensor.solar_consumption_23_standby')|float) +
          (0 if states('sensor.solar_consumption_25_standby') == 'unknown' 
             or states('sensor.solar_consumption_25_standby') == 'unavailable'
             else states('sensor.solar_consumption_25_standby')|float) 
        )|round(0)
        }}
      attributes:
        last_updated: "{{ now().strftime('%d.%m.%Y %H:%M') }}"
