# ####### ########################### #######
# ####### Absolute Feuchte Shelly     #######
# ####### ########################### #######

# Shelly Secomat Haus 19 (Raum 1)
- sensor:
    - name: "Shelly HT Secomat 19.1 absolute feuchte"
      unique_id: template.shelly_ht_secomat_19_1_absolute_feuchte
      device_class: weight
      unit_of_measurement: "g"
      state: >
        {% set humidity = states('sensor.shelly_h_t_secomat_19_1_humidity')|float(none) %}
        {% set temperature = states('sensor.shelly_h_t_secomat_19_1_temperature')|float(none) %}
        {% if humidity is number and temperature is number %}
          {{ ((10**5 * 18.016 / 8314.3 * humidity / 100 * 6.1078 * 
              10**((7.5 * temperature) / (237.3 + temperature)) / 
              (temperature + 273.15))|round(1)) }}
        {% else %}
          {{ states('sensor.shelly_ht_secomat_19_1_absolute_feuchte') }}
        {% endif %}

# Shelly Secomat Haus 19 (Raum 2)
- sensor:
    - name: "Shelly HT Secomat 19.2 absolute feuchte"
      unique_id: template.shelly_ht_secomat_19_2_absolute_feuchte
      device_class: weight
      unit_of_measurement: "g"
      state: >
        {% set humidity = states('sensor.shelly_h_t_secomat_19_2_humidity')|float(none) %}
        {% set temperature = states('sensor.shelly_h_t_secomat_19_2_temperature')|float(none) %}
        {% if humidity is number and temperature is number %}
          {{ ((10**5 * 18.016 / 8314.3 * humidity / 100 * 6.1078 * 
              10**((7.5 * temperature) / (237.3 + temperature)) / 
              (temperature + 273.15))|round(1)) }}
        {% else %}
          {{ states('sensor.shelly_ht_secomat_19_2_absolute_feuchte') }}
        {% endif %}

# Shelly Secomat Haus 25 (Raum 1)
- sensor:
    - name: "Shelly HT Secomat 25.1 absolute feuchte"
      unique_id: template.shelly_ht_secomat_25_1_absolute_feuchte
      device_class: weight
      unit_of_measurement: "g"
      state: >
        {% set humidity = states('sensor.shelly_h_t_secomat_25_1_humidity')|float(none) %}
        {% set temperature = states('sensor.shelly_h_t_secomat_25_1_temperature')|float(none) %}
        {% if humidity is number and temperature is number %}
          {{ ((10**5 * 18.016 / 8314.3 * humidity / 100 * 6.1078 * 
              10**((7.5 * temperature) / (237.3 + temperature)) / 
              (temperature + 273.15))|round(1)) }}
        {% else %}
          {{ states('sensor.shelly_ht_secomat_25_1_absolute_feuchte') }}
        {% endif %}

# Shelly Secomat Haus 25 (Raum 2)
- sensor:
    - name: "Shelly HT Secomat 25.2 absolute feuchte"
      unique_id: template.shelly_ht_secomat_25_2_absolute_feuchte
      device_class: weight
      unit_of_measurement: "g"
      state: >
        {% set humidity = states('sensor.shelly_h_t_secomat_25_2_humidity')|float(none) %}
        {% set temperature = states('sensor.shelly_h_t_secomat_25_2_temperature')|float(none) %}
        {% if humidity is number and temperature is number %}
          {{ ((10**5 * 18.016 / 8314.3 * humidity / 100 * 6.1078 * 
              10**((7.5 * temperature) / (237.3 + temperature)) / 
              (temperature + 273.15))|round(1)) }}
        {% else %}
          {{ states('sensor.shelly_ht_secomat_25_2_absolute_feuchte') }}
        {% endif %}
