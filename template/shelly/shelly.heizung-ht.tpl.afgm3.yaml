# ####### ########################### #######
# ####### Absolute Feuchte Shelly     #######
# ####### ########################### #######

- sensor:
    - name: "Shelly H and T Haus 19 Absolute Feuchte"
      unique_id: template.shelly_h_and_t_haus_19_absolute_feuchte
      device_class: weight
      unit_of_measurement: "g"
      state: >
        {% set humidity = states('sensor.shelly_h_and_t_haus_19_humidity')|float(none) %}
        {% set temperature = states('sensor.shelly_h_and_t_haus_19_temperature')|float(none) %}
        {% if humidity is number and temperature is number %}
          {{ ((10**5 * 18.016 / 8314.3 * humidity / 100 * 6.1078 * 
              10**((7.5 * temperature) / (237.3 + temperature)) / 
              (temperature + 273.15))|round(1)) }}
        {% else %}
          {{ states('sensor.shelly_h_and_t_haus_19_absolute_feuchte') }}
        {% endif %}

    - name: "Shelly H and T Haus 21 Absolute Feuchte"
      unique_id: template.shelly_h_and_t_haus_21_absolute_feuchte
      device_class: weight
      unit_of_measurement: "g"
      state: >
        {% set humidity = states('sensor.shelly_h_and_t_haus_21_humidity')|float(none) %}
        {% set temperature = states('sensor.shelly_h_and_t_haus_21_temperature')|float(none) %}
        {% if humidity is number and temperature is number %}
          {{ ((10**5 * 18.016 / 8314.3 * humidity / 100 * 6.1078 * 
              10**((7.5 * temperature) / (237.3 + temperature)) / 
              (temperature + 273.15))|round(1)) }}
        {% else %}
          {{ states('sensor.shelly_h_and_t_haus_21_absolute_feuchte') }}
        {% endif %}

    - name: "Shelly H and T Haus 23 Absolute Feuchte"
      unique_id: template.shelly_h_and_t_haus_23_absolute_feuchte
      device_class: weight
      unit_of_measurement: "g"
      state: >
        {% set humidity = states('sensor.shelly_h_and_t_haus_23_humidity')|float(none) %}
        {% set temperature = states('sensor.shelly_h_and_t_haus_23_temperature')|float(none) %}
        {% if humidity is number and temperature is number %}
          {{ ((10**5 * 18.016 / 8314.3 * humidity / 100 * 6.1078 * 
              10**((7.5 * temperature) / (237.3 + temperature)) / 
              (temperature + 273.15))|round(1)) }}
        {% else %}
          {{ states('sensor.shelly_h_and_t_haus_23_absolute_feuchte') }}
        {% endif %}

    - name: "Shelly H and T Haus 25 Absolute Feuchte"
      unique_id: template.shelly_h_and_t_haus_25_absolute_feuchte
      device_class: weight
      unit_of_measurement: "g"
      state: >
        {% set humidity = states('sensor.shelly_h_and_t_haus_25_humidity')|float(none) %}
        {% set temperature = states('sensor.shelly_h_and_t_haus_25_temperature')|float(none) %}
        {% if humidity is number and temperature is number %}
          {{ ((10**5 * 18.016 / 8314.3 * humidity / 100 * 6.1078 * 
              10**((7.5 * temperature) / (237.3 + temperature)) / 
              (temperature + 273.15))|round(1)) }}
        {% else %}
          {{ states('sensor.shelly_h_and_t_haus_25_absolute_feuchte') }}
        {% endif %}
